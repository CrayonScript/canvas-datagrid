{"version":3,"sources":["webpack://canvasDatagrid/webpack/bootstrap","webpack://canvasDatagrid/./lib/component.js","webpack://canvasDatagrid/./lib/contextMenu.js","webpack://canvasDatagrid/./lib/defaults.js","webpack://canvasDatagrid/./lib/dom.js","webpack://canvasDatagrid/./lib/draw.js","webpack://canvasDatagrid/./lib/events.js","webpack://canvasDatagrid/./lib/intf.js","webpack://canvasDatagrid/./lib/main.js","webpack://canvasDatagrid/./lib/publicMethods.js","webpack://canvasDatagrid/./lib/touch.js","webpack://canvasDatagrid/./node_modules/is-printable-key-event/dist/index.js"],"names":["define","defaults","typeMap","component","dehyphenateProperty","hyphenateProperty","prop","replace","p","nextLetterCap","Array","prototype","forEach","call","char","toUpperCase","cust","toLowerCase","getDefaultItem","base","item","i","r","filter","applyComponentStyle","supressChangeAndDrawEvents","intf","isComponent","cStyle","window","getComputedStyle","tagName","canvas","defs","computedStyle","styles","def","val","getPropertyValue","setStyleProperty","dispatchEvent","requestAnimationFrame","resize","style","data","strData","JSON","parse","e","Error","schema","strSchema","number","strNum","n","parseInt","isNaN","strBool","test","string","str","getObservableAttributes","attrs","attributes","attr","push","disconnectedCallback","connected","connectedCallback","parentDOMNode","innerHTML","appendChild","observe","adoptedCallback","attributeChangedCallback","attrName","oldVal","newVal","tfn","dataType","name","addEventListener","eval","observer","MutationObserver","mutations","checkInnerHTML","checkStyle","mutation","attributeName","target","nodeName","parentNode","addedNodes","length","type","characterData","childList","subtree","document","querySelectorAll","el","self","zIndexTop","hoverScrollTimeout","autoCompleteContext","applyContextItemStyle","contextItemContainer","createInlineStyle","mobile","createContextMenu","ev","pos","items","parentContextMenu","container","createElement","upArrow","downArrow","children","selectedIndex","rect","isArray","createItems","childMenuArrow","removeChildContext","relatedTarget","contextMenu","contains","dispose","splice","indexOf","undefined","removeEventListener","setAttribute","contextAddCallback","getAttribute","cPos","getBoundingClientRect","left","childContextMenuMarginLeft","offsetWidth","top","childContextMenuMarginTop","bottom","right","createChildContext","apply","addItem","addContent","content","title","childContextMenuArrowHTML","click","clickIndex","idx","Event","checkArrowVisibility","scrollTop","removeChild","scrollHeight","offsetHeight","startHoverScroll","t","a","contextHoverScrollAmount","setTimeout","contextHoverScrollRateMs","endHoverScroll","clearTimeout","init","loc","s","scrollOffset","contextMenuZIndex","x","y","height","position","color","contextMenuArrowColor","textAlign","zIndex","inputDropdown","maxHeight","innerHeight","autocompleteBottomMargin","minWidth","width","hasFocus","deltaY","scrollLeft","deltaX","contextMenuArrowUpHTML","contextMenuArrowDownHTML","body","contextMenuWindowMargin","innerWidth","parentGrid","c","Object","defineProperty","get","set","value","isFinite","index","createFilterContextMenuItems","filterContainer","filterLabel","filterAutoCompleteButton","filterInput","cell","header","iRect","checkRegExpErrorState","background","contextFilterInputBackground","contextFilterInputColor","invalidFilterRegEx","contextFilterInvalidRegExpBackground","contextFilterInvalidRegExpColor","fillAutoComplete","count","blanksItem","row","cellValue","String","trim","blankValues","includes","blanksText","maxAutoCompleteItems","formatters","stopPropagation","disposeAutocomplete","keys","concat","map","key","createAutoCompleteContext","autoCompleteItems","onclick","disposeContextMenu","preventDefault","setFilter","en","columnFilters","filterOptionText","contextFilterButtonHTML","cf","h","getHeaderByName","removeFilterOptionText","removeFilterClick","controlInput","focus","addDefaultContextMenuItem","isNormalCell","isBackground","isColumnHeaderCellCap","isScrollBar","isCorner","isRowHeader","showFilter","showCopy","selections","reduce","copyText","execCommand","showPaste","clipBoardData","pasteText","paste","columnIndex","rowIndex","draw","showColumnSelector","columnSelectorText","d","getSchema","column","toggleColumnVisibility","hidden","setStorageData","columnSelectorHiddenText","columnSelectorVisibleText","hideColumnText","saveAppearance","showClearSettingsOption","sizes","rows","columns","clearSettingsOptionText","createRowOrders","createColumnOrders","storedSettings","columnWidth","cellWidth","cellHeight","allowSorting","showOrderByOption","showOrderByOptionTextAsc","order","showOrderByOptionTextDesc","contextmenuEvent","overridePos","createDiposeEvent","contextPosition","getLayerPos","NativeEvent","getCellAt","isGrid","contextMenuMarginLeft","canvasOffsetLeft","contextMenuMarginTop","canvasOffsetTop","mobileContextMenuMargin","getClippingRect","ele","boundingRect","eleRect","clipRect","w","parentRect","Infinity","columnHeaderCellHeight","getColumnHeaderCellHeight","rowHeaderCellWidth","getRowHeaderCellWidth","offsetTop","scrollBarWidth","offsetLeft","clipElement","clip","scrollingElement","nodeType","resizeEditInput","input","editCell","bm","gridBorderCollapse","borderWidth","cellBorderWidth","getVisibleCellByIndex","mobileEditInputHeight","cellPaddingLeft","ignoreScrollOffset","offsetParent","clientX","clientY","isChildGrid","endEdit","abort","abortEdit","newValue","oldValue","changes","defaultValue","aborted","addRow","createNewRowData","beginEditAt","inEnterMode","editable","adjacentCells","enumItems","enu","option","valueInEnum","scrollIntoView","setActiveCell","getAdjacentCells","multiLine","editCellZIndex","fontSize","editCellFontSize","scale","cellValueIsEmpty","shouldClearCellValue","nx","ny","altKey","nextRowIndex","shiftKey","Math","max","min","last","first","className","css","verticalAlign","marginLeft","padding","border","contextFilterInputBorder","borderRadius","contextFilterInputBorderRadius","lineHeight","fontWeight","fontFamily","contextFilterInputFontFamily","contextFilterInputFontSize","contextMenuBackground","contextMenuColor","contextFilterButtonBorder","contextFilterButtonBorderRadius","contextMenuFilterButtonFontFamily","contextMenuFilterButtonFontSize","cssFloat","childContextMenuArrowColor","contextMenuChildArrowFontSize","contextMenuFontFamily","contextMenuFontSize","contextMenuBorder","contextMenuPadding","contextMenuBorderRadius","opacity","contextMenuOpacity","overflow","contextMenuHoverBackground","contextMenuHoverColor","display","cursor","boxSizing","outline","margin","mobileEditFontFamily","mobileEditFontSize","editCellBorder","editCellColor","editCellBackgroundColor","appearance","webkitAppearance","mozAppearance","editCellPaddingLeft","editCellFontFamily","boxShadow","editCellBoxShadow","contextMenuItemMargin","contextMenuItemBorderRadius","contextMenuLabelMargin","contextMenuLabelDisplay","contextMenuLabelMinWidth","maxWidth","contextMenuLabelMaxWidth","whiteSpace","contextMenuCursor","contextMenuFilterInvalidExpresion","appendTo","setDom","ctx","context","eventParent","onblur","blur","parentIsCanvas","getContext","textBaseline","parentNodeStyle","touchstart","mouseup","mousedown","dblclick","mousemove","scrollWheel","copy","cut","keypress","keyup","keydown","perfCounters","cachedImagesDrawn","drawCount","perfWindowSize","entityCount","hiddenFrozenColumnCount","scrollDebugCounters","touchPPSCounters","htmlImageCache","fillArray","low","high","step","drawPerfLine","perfArr","arrIndex","useAbs","beginPath","moveTo","cx","cy","abs","lineTo","strokeStyle","stroke","drawOnAllImagesLoaded","loaded","html","img","complete","drawHtml","v","formattedValue","cacheKey","toString","round","drawImage","Image","onload","src","btoa","drawOrderByArrow","mt","columnHeaderOrderByArrowMarginTop","ml","columnHeaderOrderByArrowMarginLeft","mr","columnHeaderOrderByArrowMarginRight","aw","columnHeaderOrderByArrowWidth","ah","columnHeaderOrderByArrowHeight","fillStyle","columnHeaderOrderByArrowColor","columnHeaderOrderByArrowBorderColor","orderDirection","fill","drawTreeArrow","treeArrowMarginTop","treeArrowMarginRight","treeArrowMarginLeft","treeArrowWidth","treeArrowHeight","treeArrowColor","treeArrowBorderColor","openChildren","radiusRect","radius","b","quadraticCurveTo","fillRect","strokeRect","fillText","text","fillCircle","arc","PI","strokeCircle","clipFrozenArea","mode","lastFrozenColumnPixel","lastFrozenRowPixel","fillHandle","selectionHandleType","strokeHandle","addselectionHandle","hw","selectionHandleSize","tr","br","tl","bl","addBorderLine","l","addEllipsis","ellipsisCache","measureText","wrapText","splitChar","lines","calculatedLineHeight","word","words","split","textHeight","out","wrap","cellWhiteSpace","autoResize","autoResizeRows","elWidth","et","ellipsisText","elClipLength","plWidth","clippedVal","ogWordWidth","previousLine","line","cHeight","paddedHeight","measure","paddedWidth","originText","stepLength","direction","substr","drawText","ll","fontHeight","vPos","hPos","paddingLeft","orderByArrowWidth","horizontalAlignment","paddingRight","verticalAlignment","paddingBottom","lineSpacing","debug","active","font","debugFont","debugColor","stringify","pw","idx_ord","sortColumnIndex","getFrozenColumnsWidth","frozenColumn","getColummnWidth","internal","visible","checkScrollHeight","rowHeaderCell","treeGrid","rowOpen","rowHeight","cornerCell","rd","aCell","bc","selectionBorders","moveBorders","selectionHandles","rowHeaders","u","currentCell","performance","now","visibleRowHeights","orders","drawScrollBars","drawCorner","scrollBox","entities","m","scrollBarBoxMargin","scrollBarBorderColor","lineWidth","scrollBarBorderWidth","horizontalBox","horizontalBar","scrollBoxWidth","scrollWidth","verticalBox","verticalBar","scrollBoxHeight","horizontalBarVisible","scrollBarBackgroundColor","scrollBarBoxColor","horizontalBoxVisible","scrollBarActiveColor","scrollBarBoxBorderRadius","visibleCells","unshift","verticalBarVisible","verticalBoxVisible","scrollBarCornerBorderColor","scrollBarCornerBackgroundColor","corner","createHandlesOverlayArray","allowMovingSelection","selectionBorderTop","selectionBorderRight","selectionHandle","selectionBorderLeft","selectionBorderBottom","selectionHandleBehavior","createBorderOverlayArray","drawArray","propPrefix","offsetPoint","selectionBorder","isHeader","drawCell","rowOrderIndex","drawEach","headerIndex","columnOrderIndex","cellStyle","cellGridAttributes","isColumnHeader","selected","hovered","hovers","activeCell","rawValue","activeHeader","f","orderByArrowSize","treeArrowSize","visibleRows","paddingTop","cellLineHeight","cellLineSpacing","sortRowIndex","isNormal","gridId","userHeight","userWidth","cellHeightWithChildGrid","cellWidthWithChildGrid","save","tree","showRowNumbers","childGrids","createGrid","cellGridHeight","grid","orderBy","console","warn","filterTextPrefix","movingSelection","moveOffset","restore","drawRowHeader","rowData","showRowHeaders","drawHeaders","g","o","columnHeaderCell","nonFrozenHeaderWidth","drawHeaderColumnRange","start","end","rArgs","rhIndex","frozenRow","showColumnHeaders","scrollPixelLeft","columnHeaderCellBorderWidth","scrollIndexLeft","isColumnHeaderCell","endCap","drawRow","treeHeight","rowSansTreeHeight","trees","scrollIndexRight","scrollPixelRight","initDraw","drawBackground","gridBackgroundColor","drawFrozenRows","ln","allowFreezingRows","frozenMarkerBorderWidth","frozenMarkerWidth","drawRows","snapToRow","scrollPixelTop","scrollIndexTop","scrollIndexBottom","scrollPixelBottom","showNewRow","newRow","drawMoveMarkers","moveOverlayBorderWidth","moveOverlayBorderColor","setLineDash","moveOverlayBorderSegments","drawReorderMarkers","reorderObject","dragOffset","reorderMarkerBackgroundColor","reorderMarkerBorderWidth","reorderMarkerBorderColor","dragMode","reorderMarkerIndexBorderWidth","reorderMarkerIndexBorderColor","reorderTarget","drawBorder","gridBorderWidth","gridBorderColor","drawSelectionBorders","selectionOverlayBorderWidth","selectionOverlayBorderColor","dsb","drawSelectionHandles","selectionHandleBorderWidth","selectionHandleBorderColor","selectionHandleColor","az","touchSelectHandleZone","ax","ay","drawActiveCell","cl","acx","acy","acw","ach","selectionMode","activeCellOverlayBorderWidth","activeCellOverlayBorderColor","getHeaderWidth","drawFrozenMarkers","my","mx","xHover","yHover","allowFreezingColumns","frozenMarkerHoverColor","frozenMarkerColor","frozenMarkerHoverBorderColor","frozenMarkerBorderColor","freezeMarkerPosition","frozenMarkerActiveColor","frozenMarkerActiveBorderColor","drawPerfLines","showPerformance","px","py","ph","dpl","debugPerfChartTextColor","toFixed","debugPerfChartBackground","debugScrollHeightColor","debugScrollWidthColor","debugPerformanceColor","debugEntitiesColor","debugTouchPPSXColor","debugTouchPPSYColor","pop","yPPS","xPPS","drawDebug","perf","perfDelta","frozenColumnsWidth","htmlImages","startScale","scaleDelta","zoomDeltaStart","touchLength","touches","touchPosition","touchPosition1","scrollIndex","scrollPixel","canvasOffset","touchDelta","touchAnimateTo","scrollAnimation","touchPPS","touchPPST","xPPST","yPPST","touchDuration","pointerLockPosition","size","mouse","touch","touchStart","dragContext","debugBackgroundColor","lh","isPrintableKeyEvent","require","wheeling","fn","events","removeEachListener","sfn","defaultPrevented","dispatchEachEvent","getRatio","maxPixelRatio","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","drawAfterResize","vb","nb","co","isScrollBoxCorner","sbw","ratio","cellBorder","columnHeaderCellBorder","dataHeight","dataWidth","dims","ch","checkScrollBoxVisibility","overflowX","overflowY","setScrollBoxSize","setCanvasSize","dim","appliedInlineStyles","isComponet","scrollCache","reduceSchema","accumulator","va","args","widthBoxRatio","heightBoxRatio","scrollBarBoxMinSize","scrollBarBoxWidth","bar","box","page","pageUpDownOverlap","scroll","dontDraw","floor","ctrl","ctrlKey","metaKey","persistantSelectionMode","singleSelectionMode","dragBounds","sBounds","delta","previousCell","scrollTimer","isInGrid","rowBoundaryCrossed","columnBoundaryCrossed","cellBoundaryCrossed","prefix","draggingItem","scrollModes","dragItem","selecting","dragStart","dragStartObject","getSelectionBounds","ignoreNextClick","selectRow","dragAddToSelection","selectionBounds","selectArea","autoScrollZone","startingBounds","checkSelectionChange","sb","getSelectedData","selectAll","columnHeaderClickBehavior","selectColumn","treeArrowClickRadius","toggleTree","dragResizeColumn","resizingStartingWidth","resizingStartingHeight","minColumnWidth","minRowHeight","resizeScrollZone","resizeChildGrids","globalRowResize","stopDragResize","scrollGrid","scrollPointerLock","scrollStartMode","movementX","movementY","scrollMode","scrollStart","scrollRepeatRate","selectionScrollIncrement","stopScrollGrid","exitPointerLock","dragReorder","columReorder","rowReorder","allowColumnReordering","allowRowReordering","source","reorderDeadZone","stopDragReorder","oIndex","tIndex","cr","dragMove","stopDragMove","moveSelection","freezeMove","stopFreezeMove","startFreezeMove","lastMouseDownTarget","button","move","freeze","requestPointerLock","dragging","cols","Number","isArrowKey","selectionFollowsActiveCell","selectedData","fitColumnToValues","autosize","deltaMode","touchHaltAnimation","scrollTo","pasteData","pasteValue","mimeType","startRowIndex","startColIndex","getVisibleSchema","isSupportedHtmlTable","htmlString","parseData","cleanedHtmlData","substring","match","cellData","forEachSelectedCell","colName","realRowIndex","cells","existingRowData","newRowData","assign","colIndex","columnName","affectedCells","getNextVisibleColumnIndex","visibleColumnIndex","getVisibleColumnIndexOf","event","clipboardItems","Map","from","clipboardData","supportedMimeTypes","pasteableItems","join","itemToPaste","pasteType","getAsString","tableRows","textRows","outputHeaders","outputHeaderKeys","sData","htmlSafe","fCopyCell","addHeaders","headers","useHtml","hVal","addCellValue","trRow","textRow","rowKeys","sSorted","setData","ctor","treeGridAttributes","storageName","invalidSearchExpClass","localStyleLibraryStorageKey","orderings","add","sortFunction","col","sort","filters","currentFilter","sorters","parsers","schemaHashes","componentL1Events","eventNames","expandToRow","orderedIndex","visibility","localStorage","setItem","tempSchema","applyDefaultValue","forEachHeader","getSchemaNameHash","applyFilter","refreshFromOrigialData","applyDataTransforms","getBestGuessDataType","drawChildGrids","gridKey","setTimer","selectionScrollZone","originalData","validateColumn","setDefaults","obj1","obj2","setAttributes","eachAttribute","setStyle","eachStyle","findColumnMaxTextLength","contextmenu","disconnect","tryLoadStoredSettings","reloadStoredValues","getDomRoot","shadowRoot","host","getFontName","fontStyle","getFontHeight","parseFloat","parseStyleValue","initProp","propName","getStyleProperty","styleKeys","supressDrawAndEvent","isDim","getItem","message","initialized","addStyleKeyIfNoneExists","publicStyleKeyIntf","initScrollBox","ie","navigator","userAgent","edge","webKit","moz","cursorGrab","cursorGrabing","cursorGrabbing","clearChangeLog","gotoCell","gotoRow","findColumnScrollLeft","findRowScrollTop","isCellVisible","isRowVisible","isColumnVisible","getSchemaFromData","expandTree","collapseTree","insertRow","deleteRow","insertColumn","deleteColumn","addColumn","setRowHeight","setColumnWidth","resetColumnWidths","resetRowHeights","selectNone","assertPxColor","clearPxColorAssertions","integerToAlpha","DOMStyles","valueObject","filterFor","filterRegExp","regEnd","pattern","exec","flags","flagLength","RegExp","toLocaleUpperCase","innerText","textContent","TypeError","currentCursor","find","eventName","RangeError","eachDataRow","setTreeGridAttributes","setCellGridAttributes","schemaGetter","schemaSetter","eachSchemaColumn","hideEachSchemaColumn","getTypes","parseInnerHtml","callback","etl","autoGenerateSchema","dataGetter","dataSetter","autoResizeColumns","sHeight","sWidth","setScrollTop","preventScrollEvent","setScrollLeft","supressDrawEvent","modules","slice","arguments","Grid","module","attachShadow","HTMLElement","create","customElements","observedAttributes","canvasDatagrid","exports","tKeys","argKey","tKey","sKey","ordA","charCodeAt","ordZ","len","fromCharCode","offsetX","offsetY","targetX","targetY","sbh","isColumnSelected","colIsSelected","shift","supressEvent","addCol","removeCol","st","de","ri","dragObject","childGrid","trArgs","treeGridHeight","dontSetStorageData","sorter","sel","xi","maxRowLength","minXi","yi","lastSourceIndex","cidx","useTouchScrollZones","getBorder","entitiy","borderResizeZone","tsz","touchScrollZone","moveMode","borderDragBehavior","moveBorder","xBorderBehavior","yBorderBehavior","isVerticalScrollBar","isHorizontalScrollBar","allowColumnResize","allowColumnResizeFromCell","allowRowHeaderResize","allowRowResize","allowRowResizeFromCell","rowGrabZoneSize","maxCol","minCol","mapEachSchemaColumn","bounds","rowHeaderCellFont","autosizePadding","autosizeHeaderCellPadding","rowHeaderCellPaddingRight","rowHeaderCellPaddingLeft","formatter","columnHeaderCellFont","headerCellPaddingRight","headerCellPaddingLeft","cellFont","cellPaddingRight","cellAutoResizePadding","total","getRowHeight","cellFormatterString","headerCell","asc","localeCompare","date","Date","getTime","touchTimerMs","debounceTouchMove","touchMoving","touchScrollTimeout","animationFrames","getTouchPos","touchIndex","easingFunctions","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easing","touchEasingMethod","calculatePPSTimed","touchSigmaTimed","calculatePPS","touchSigma","touchEndAnimation","touchReleaseAnimationDurationMs","stopAnimation","touchEditCell","touchCell","clearInterval","calculatePPSTimer","touchDeadZone","touchingCell","changedTouches","startingCell","touchContextTimeout","touchStartEvent","zoomAltered","touchStart1","touchScrollStart","touchContextMenuTimeMs","setInterval","touchEndEvents","touchmove","passive","touchend","touchcancel","touchSelect","handleType","touchSelecting","touchMove","rw","rScrollZone","lScrollZone","bScrollZone","tScrollZone","t1","t2","touchZoomSensitivity","touchZoomMin","touchZoomMax","touchScroll","dz","touchReleaseAcceleration","scrollAnimationPPSThreshold"],"mappings":"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","file":"canvas-datagrid.debug.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./lib/main.js\");\n","/*jslint browser: true, unparam: true, todo: true*/\n/*globals define: true, MutationObserver: false, requestAnimationFrame: false, performance: false, btoa: false*/\ndefine(['./defaults'], function (defaults) {\n    'use strict';\n    return function () {\n        var typeMap, component = {};\n        component.dehyphenateProperty = function hyphenateProperty(prop) {\n            prop = prop.replace('--cdg-', '');\n            var p = '', nextLetterCap;\n            Array.prototype.forEach.call(prop, function (char) {\n                if (nextLetterCap) {\n                    nextLetterCap = false;\n                    p += char.toUpperCase();\n                    return;\n                }\n                if (char === '-') {\n                    nextLetterCap = true;\n                    return;\n                }\n                p += char;\n            });\n            return p;\n        };\n        component.hyphenateProperty = function hyphenateProperty(prop, cust) {\n            var p = '';\n            Array.prototype.forEach.call(prop, function (char) {\n                if (char === char.toUpperCase()) {\n                    p += '-' + char.toLowerCase();\n                    return;\n                }\n                p += char;\n            });\n            return (cust ? '--cdg-' : '') + p;\n        };\n        function getDefaultItem(base, item) {\n            var i = {},\n                r;\n            defaults(i);\n            r = i.defaults[base].filter(function (i) {\n                return i[0].toLowerCase() === item.toLowerCase()\n                    || component.hyphenateProperty(i[0]) === item.toLowerCase()\n                    || component.hyphenateProperty(i[0], true) === item.toLowerCase();\n            })[0];\n            return r;\n        }\n        component.applyComponentStyle = function (supressChangeAndDrawEvents, intf) {\n            if (!intf.isComponent) { return; }\n            var cStyle = window.getComputedStyle(intf.tagName === 'CANVAS-DATAGRID' ? intf : intf.canvas, null),\n                defs = {};\n            intf.computedStyle = cStyle;\n            defaults(defs);\n            defs = defs.defaults.styles;\n            defs.forEach(function (def) {\n                var val;\n                val = cStyle.getPropertyValue(component.hyphenateProperty(def[0], true));\n                if (val === \"\") {\n                    val = cStyle.getPropertyValue(component.hyphenateProperty(def[0], false));\n                }\n                if (val !== \"\" && typeof val === 'string') {\n                    intf.setStyleProperty(def[0], typeMap[typeof def[1]](val\n                        .replace(/^\\s+/, '').replace(/\\s+$/, ''), def[1]), true);\n                }\n            });\n            if (!supressChangeAndDrawEvents && intf.dispatchEvent) {\n                requestAnimationFrame(function () { intf.resize(true); });\n                intf.dispatchEvent('stylechanged', intf.style);\n            }\n        };\n        typeMap = {\n            data: function (strData) {\n                try {\n                    return JSON.parse(strData);\n                } catch (e) {\n                    throw new Error('Cannot read JSON data in canvas-datagrid data.');\n                }\n            },\n            schema: function (strSchema) {\n                try {\n                    return JSON.parse(strSchema);\n                } catch (e) {\n                    throw new Error('Cannot read JSON data in canvas-datagrid schema attribute.');\n                }\n            },\n            number: function (strNum, def) {\n                var n = parseInt(strNum, 10);\n                return isNaN(n) ? def : n;\n            },\n            boolean: function (strBool) {\n                return (/true/i).test(strBool);\n            },\n            string: function (str) {\n                return str;\n            }\n        };\n        component.getObservableAttributes = function () {\n            var i = {}, attrs = ['data', 'schema', 'style', 'className', 'name'];\n            defaults(i);\n            i.defaults.attributes.forEach(function (attr) {\n                attrs.push(attr[0].toLowerCase());\n            });\n            return attrs;\n        };\n        component.disconnectedCallback = function () {\n            this.connected = false;\n        };\n        component.connectedCallback = function () {\n            var intf = this;\n            intf.parentDOMNode.innerHTML = \"\";\n            intf.parentDOMNode.appendChild(intf.canvas);\n            intf.connected = true;\n            component.observe(intf);\n            component.applyComponentStyle(true, intf);\n            intf.resize(true);\n        };\n        component.adoptedCallback = function () {\n            this.resize();\n        };\n        component.attributeChangedCallback = function (attrName, oldVal, newVal) {\n            var tfn, intf = this, def;\n            if (attrName === 'style') {\n                component.applyComponentStyle(false, intf);\n                return;\n            }\n            if (attrName === 'data') {\n                if (intf.dataType === 'application/x-canvas-datagrid') {\n                    intf.dataType = 'application/json+x-canvas-datagrid';\n                }\n                intf.data = newVal;\n                return;\n            }\n            if (attrName === 'schema') {\n                intf.schema = typeMap.schema(newVal);\n                return;\n            }\n            if (attrName === 'name') {\n                intf.name = newVal;\n                return;\n            }\n            if (attrName === 'class' || attrName === 'className') {\n                return;\n            }\n            def = getDefaultItem('attributes', attrName);\n            if (def) {\n                tfn = typeMap[typeof def[1]];\n                intf.attributes[def[0]] = tfn(newVal);\n                return;\n            }\n            if (/^on/.test(attrName)) {\n                intf.addEventListener('on' + attrName, function (e) {\n                    eval(newVal);\n                });\n            }\n            return;\n        };\n        component.observe = function (intf) {\n            var observer;\n            if (!window.MutationObserver) { return; }\n            intf.applyComponentStyle = function () { component.applyComponentStyle(false, intf); intf.resize(); };\n            /**\n             * Applies the computed css styles to the grid.  In some browsers, changing directives in attached style sheets does not automatically update the styles in this component.  It is necessary to call this method to update in these cases.\n             * @memberof canvasDatagrid\n             * @name applyComponentStyle\n             * @method\n             */\n            observer = new window.MutationObserver(function (mutations) {\n                var checkInnerHTML, checkStyle;\n                Array.prototype.forEach.call(mutations, function (mutation) {\n                    if (mutation.attributeName === 'class'\n                            || mutation.attributeName === 'style') {\n                        checkStyle = true;\n                        return;\n                    }\n                    if (mutation.target.nodeName === 'STYLE') {\n                        checkStyle = true;\n                        return;\n                    }\n                    if (mutation.target.parentNode\n                            && mutation.target.parentNode.nodeName === 'STYLE') {\n                        checkStyle = true;\n                        return;\n                    }\n                    if (mutation.target === intf && (mutation.addedNodes.length > 0 || mutation.type === 'characterData')) {\n                        checkInnerHTML = true;\n                    }\n                });\n                if (checkStyle) {\n                    intf.applyComponentStyle(false, intf);\n                }\n                if (checkInnerHTML) {\n                    if (intf.dataType === 'application/x-canvas-datagrid') {\n                        intf.dataType = 'application/json+x-canvas-datagrid';\n                    }\n                    intf.data = intf.innerHTML;\n                }\n            });\n            observer.observe(intf, { characterData: true, childList: true, attributes: true, subtree: true });\n            Array.prototype.forEach.call(document.querySelectorAll('style'), function (el) {\n                observer.observe(el, { characterData: true, childList: true, attributes: true, subtree: true });\n            });\n        };\n        return component;\n    };\n});\n","/*jslint browser: true, unparam: true, todo: true*/\n/*globals define: true, MutationObserver: false, requestAnimationFrame: false, performance: false, btoa: false, Event: false*/\ndefine([], function () {\n    'use strict';\n    return function (self) {\n        var zIndexTop, hoverScrollTimeout, autoCompleteContext;\n        function applyContextItemStyle(contextItemContainer) {\n            self.createInlineStyle(contextItemContainer, 'canvas-datagrid-context-menu-item' + (self.mobile ? '-mobile' : ''));\n            contextItemContainer.addEventListener('mouseover', function () {\n                self.createInlineStyle(contextItemContainer, 'canvas-datagrid-context-menu-item:hover');\n            });\n            contextItemContainer.addEventListener('mouseout', function () {\n                self.createInlineStyle(contextItemContainer, 'canvas-datagrid-context-menu-item');\n            });\n        }\n        function createContextMenu(ev, pos, items, parentContextMenu) {\n            var container = document.createElement('div'),\n                upArrow = document.createElement('div'),\n                downArrow = document.createElement('div'),\n                children = [],\n                selectedIndex = -1,\n                intf = {},\n                rect;\n            if (!Array.isArray(items)) { throw new Error('createContextMenu expects an array.'); }\n            function createItems() {\n                items.forEach(function (item) {\n                    var contextItemContainer = document.createElement('div'),\n                        childMenuArrow;\n                    function removeChildContext(e) {\n                        if (e.relatedTarget === container\n                                || item.contextMenu.container === e.relatedTarget\n                                || childMenuArrow === e.relatedTarget\n                                || (contextItemContainer === e.relatedTarget)\n                                || item.contextMenu.container.contains(e.relatedTarget)\n                                ) { return; }\n                        item.contextMenu.dispose();\n                        children.splice(children.indexOf(item.contextMenu), 1);\n                        item.contextMenu = undefined;\n                        contextItemContainer.removeEventListener('mouseout', removeChildContext);\n                        container.removeEventListener('mouseout', removeChildContext);\n                        contextItemContainer.setAttribute('contextOpen', '0');\n                        contextItemContainer.setAttribute('opening', '0');\n                    }\n                    function contextAddCallback(items) {\n                        // check yet again if the user hasn't moved off\n                        if (contextItemContainer.getAttribute('opening') !== '1' ||\n                                contextItemContainer.getAttribute('contextOpen') === '1') {\n                            return;\n                        }\n                        var cPos = contextItemContainer.getBoundingClientRect();\n                        cPos = {\n                            left: cPos.left + self.style.childContextMenuMarginLeft + container.offsetWidth,\n                            top: cPos.top + self.style.childContextMenuMarginTop,\n                            bottom: cPos.bottom,\n                            right: cPos.right\n                        };\n                        item.contextMenu = createContextMenu(ev, cPos, items, intf);\n                        contextItemContainer.setAttribute('contextOpen', '1');\n                        contextItemContainer.addEventListener('mouseout', removeChildContext);\n                        container.addEventListener('mouseout', removeChildContext);\n                        children.push(item.contextMenu);\n                    }\n                    function createChildContext() {\n                        var i;\n                        if (contextItemContainer.getAttribute('contextOpen') === '1') {\n                            return;\n                        }\n                        contextItemContainer.setAttribute('opening', '1');\n                        if (typeof item.items === 'function') {\n                            i  = item.items.apply(intf, [function (items) {\n                                contextAddCallback(items);\n                            }]);\n                            if (i !== undefined && Array.isArray(i)) {\n                                contextAddCallback(i);\n                            }\n                            return;\n                        }\n                        contextAddCallback(item.items);\n                    }\n                    function addItem(item) {\n                        function addContent(content) {\n                            if (content === null) { return; }\n                            if (typeof content === 'function') {\n                                return addContent(content(ev));\n                            }\n                            if (typeof content === 'object') {\n                                contextItemContainer.appendChild(content);\n                                return;\n                            }\n                            applyContextItemStyle(contextItemContainer);\n                            contextItemContainer.innerHTML = content;\n                            return;\n                        }\n                        addContent(item.title);\n                        item.contextItemContainer = contextItemContainer;\n                        if ((item.items && item.items.length > 0) || typeof item.items === 'function') {\n                            childMenuArrow = document.createElement('div');\n                            self.createInlineStyle(childMenuArrow, 'canvas-datagrid-context-child-arrow');\n                            childMenuArrow.innerHTML = self.style.childContextMenuArrowHTML;\n                            contextItemContainer.appendChild(childMenuArrow);\n                            contextItemContainer.addEventListener('mouseover', createChildContext);\n                            contextItemContainer.addEventListener('mouseout', function () {\n                                contextItemContainer.setAttribute('opening', '0');\n                            });\n                        }\n                        if (item.click) {\n                            contextItemContainer.addEventListener('click', function (ev) {\n                                item.click.apply(self, [ev]);\n                            });\n                        }\n                    }\n                    addItem(item);\n                    container.appendChild(contextItemContainer);\n                });\n            }\n            function clickIndex(idx) {\n                items[idx].contextItemContainer.dispatchEvent(new Event('click'));\n            }\n            function checkArrowVisibility() {\n                if (container.scrollTop > 0) {\n                    self.parentDOMNode.appendChild(upArrow);\n                } else if (upArrow.parentNode) {\n                    upArrow.parentNode.removeChild(upArrow);\n                }\n                if (container.scrollTop >= container.scrollHeight - container.offsetHeight && downArrow.parentNode) {\n                    downArrow.parentNode.removeChild(downArrow);\n                } else if (container.scrollHeight - container.offsetHeight > 0\n                        && !(container.scrollTop >= container.scrollHeight - container.offsetHeight)) {\n                    self.parentDOMNode.appendChild(downArrow);\n                }\n            }\n            function startHoverScroll(type) {\n                return function t() {\n                    var a = self.attributes.contextHoverScrollAmount;\n                    if (type === 'up' && container.scrollTop === 0) { return; }\n                    if (type === 'down' && container.scrollTop === container.scrollHeight) { return; }\n                    container.scrollTop += (type === 'up' ? -a : a);\n                    hoverScrollTimeout = setTimeout(t, self.attributes.contextHoverScrollRateMs, type);\n                };\n            }\n            function endHoverScroll(type) {\n                return function () {\n                    clearTimeout(hoverScrollTimeout);\n                };\n            }\n            function init() {\n                var loc = {},\n                    s = self.scrollOffset(self.canvas);\n                if (zIndexTop === undefined) {\n                    zIndexTop = self.style.contextMenuZIndex;\n                }\n                createItems();\n                self.createInlineStyle(container, 'canvas-datagrid-context-menu' + (self.mobile ? '-mobile' : ''));\n                loc.x = pos.left - s.left;\n                loc.y = pos.top - s.top;\n                loc.height = 0;\n                zIndexTop += 1;\n                container.style.position = 'absolute';\n                upArrow.style.color = self.style.contextMenuArrowColor;\n                downArrow.style.color = self.style.contextMenuArrowColor;\n                [upArrow, downArrow].forEach(function (el) {\n                    el.style.textAlign = 'center';\n                    el.style.position = 'absolute';\n                    el.style.zIndex = zIndexTop + 1;\n                });\n                container.style.zIndex = zIndexTop;\n                if (parentContextMenu && parentContextMenu.inputDropdown) {\n                    container.style.maxHeight = window.innerHeight - loc.y - self.style.autocompleteBottomMargin + 'px';\n                    container.style.minWidth = pos.width + 'px';\n                    loc.y += pos.height;\n                }\n                if (self.mobile) {\n                    container.style.width = pos.width + 'px';\n                }\n                container.style.left = loc.x + 'px';\n                container.style.top = loc.y + 'px';\n                container.addEventListener('scroll', checkArrowVisibility);\n                container.addEventListener('wheel', function (e) {\n                    if (self.hasFocus) {\n                        container.scrollTop += e.deltaY;\n                        container.scrollLeft += e.deltaX;\n                    }\n                    checkArrowVisibility();\n                });\n                upArrow.innerHTML = self.style.contextMenuArrowUpHTML;\n                downArrow.innerHTML = self.style.contextMenuArrowDownHTML;\n                container.appendChild(upArrow);\n                document.body.appendChild(downArrow);\n                document.body.appendChild(container);\n                rect = container.getBoundingClientRect();\n                // TODO: fix !(parentContextMenu && parentContextMenu.inputDropdown) state (autocomplete)\n                if (rect.bottom > window.innerHeight) {\n                    if (!(parentContextMenu && parentContextMenu.inputDropdown)) {\n                        loc.y -= (rect.bottom + self.style.contextMenuWindowMargin) - window.innerHeight;\n                    }\n                    if (loc.y < 0) { loc.y = self.style.contextMenuWindowMargin; }\n                    if (container.offsetHeight > window.innerHeight - self.style.contextMenuWindowMargin) {\n                        container.style.height = window.innerHeight - (self.style.contextMenuWindowMargin * 2) + 'px';\n                    }\n                }\n                if (rect.right > window.innerWidth) {\n                    loc.x -= rect.right - window.innerWidth + self.style.contextMenuWindowMargin;\n                }\n                if (loc.x < 0) { loc.x = self.style.contextMenuWindowMargin; }\n                if (loc.y < 0) { loc.y = self.style.contextMenuWindowMargin; }\n                container.style.left = loc.x + 'px';\n                container.style.top = loc.y + 'px';\n                rect = container.getBoundingClientRect();\n                upArrow.style.top = rect.top + 'px';\n                downArrow.style.top = rect.top + rect.height - downArrow.offsetHeight + 'px';\n                upArrow.style.left = rect.left + 'px';\n                downArrow.style.left = rect.left + 'px';\n                downArrow.style.width = container.offsetWidth + 'px';\n                upArrow.style.width = container.offsetWidth + 'px';\n                downArrow.addEventListener('mouseover', startHoverScroll('down'));\n                downArrow.addEventListener('mouseout', endHoverScroll('down'));\n                upArrow.addEventListener('mouseover', startHoverScroll('up'));\n                upArrow.addEventListener('mouseout', endHoverScroll('up'));\n                checkArrowVisibility();\n            }\n            intf.parentGrid = self.intf;\n            intf.parentContextMenu = parentContextMenu;\n            intf.container = container;\n            init();\n            intf.clickIndex = clickIndex;\n            intf.rect = rect;\n            intf.items = items;\n            intf.upArrow = upArrow;\n            intf.downArrow = downArrow;\n            intf.dispose = function () {\n                clearTimeout(hoverScrollTimeout);\n                children.forEach(function (c) {\n                    c.dispose();\n                });\n                [downArrow, upArrow, container].forEach(function (el) {\n                    if (el.parentNode) { el.parentNode.removeChild(el); }\n                });\n            };\n            Object.defineProperty(intf, 'selectedIndex', {\n                get: function () {\n                    return selectedIndex;\n                },\n                set: function (value) {\n                    if (typeof value !== 'number' || isNaN(value || !isFinite(value))) {\n                        throw new Error('Context menu selected index must be a sane number.');\n                    }\n                    selectedIndex = value;\n                    if (selectedIndex > items.length - 1) {\n                        selectedIndex = items.length - 1;\n                    }\n                    if (selectedIndex < 0) {\n                        selectedIndex = 0;\n                    }\n                    items.forEach(function (item, index) {\n                        if (index === selectedIndex) {\n                            return self.createInlineStyle(item.contextItemContainer, 'canvas-datagrid-context-menu-item:hover');\n                        }\n                        self.createInlineStyle(item.contextItemContainer, 'canvas-datagrid-context-menu-item');\n                    });\n                }\n            });\n            return intf;\n        }\n        function createFilterContextMenuItems(e) {\n            var filterContainer = document.createElement('div'),\n                filterLabel = document.createElement('div'),\n                filterAutoCompleteButton = document.createElement('button'),\n                filterInput = document.createElement('input'),\n                n = e.cell && e.cell.header ? e.cell.header.title || e.cell.header.name : '',\n                iRect;\n            function checkRegExpErrorState() {\n                filterInput.style.background = self.style.contextFilterInputBackground;\n                filterInput.style.color = self.style.contextFilterInputColor;\n                if (self.invalidFilterRegEx) {\n                    filterInput.style.background = self.style.contextFilterInvalidRegExpBackground;\n                    filterInput.style.color = self.style.contextFilterInvalidRegExpColor;\n                }\n            }\n            function fillAutoComplete() {\n                var count = 0;\n                var items = {};\n                var blanksItem = [];\n\n                self.data.forEach(function (row) {\n                    var cellValue = row[e.cell.header.name] == null ? \n                        row[e.cell.header.name] : String(row[e.cell.header.name]).trim();\n                    var value = self.blankValues.includes(cellValue) ? self.attributes.blanksText : cellValue;\n\n                    if (items[value] || count > self.attributes.maxAutoCompleteItems) { return; }\n                    count += 1;\n                    items[value] = {\n                        title: self.formatters[e.cell.header.type || 'string']({ cell: { value: value }}),\n                        click: function (e) {\n                            filterInput.value = value;\n                            e.stopPropagation();\n                            filterInput.dispatchEvent(new Event('keyup'));\n                            self.disposeAutocomplete();\n                            return;\n                        }\n                    };\n                });\n\n                if (Object.keys(items).indexOf(self.attributes.blanksText) !== -1 ) {\n                    blanksItem.push(items[self.attributes.blanksText]);\n                    delete items[self.attributes.blanksText];\n                }\n\n                return blanksItem.concat(\n                    Object.keys(items).map(function (key) {\n                        return items[key];\n                    })\n                );\n            }\n\n            function createAutoCompleteContext(ev) {\n                if (ev && [\"ArrowDown\", \"ArrowUp\", \"Enter\", \"Tab\"].includes(ev.key)) {\n                    return;\n                }\n\n                var autoCompleteItems = fillAutoComplete();\n\n                iRect = filterInput.getBoundingClientRect();\n                if (autoCompleteContext) {\n                    autoCompleteContext.dispose();\n                    autoCompleteContext = undefined;\n                }\n                autoCompleteContext = createContextMenu(e, {\n                    left: iRect.left,\n                    top: iRect.top,\n                    right: iRect.right,\n                    bottom: iRect.bottom,\n                    height: iRect.height,\n                    width: iRect.width\n                }, autoCompleteItems, {inputDropdown: true});\n                autoCompleteContext.selectedIndex = 0;\n            }\n            self.createInlineStyle(filterLabel, 'canvas-datagrid-context-menu-label');\n            self.createInlineStyle(filterAutoCompleteButton, 'canvas-datagrid-context-menu-filter-button');\n            self.createInlineStyle(filterInput, 'canvas-datagrid-context-menu-filter-input');\n            checkRegExpErrorState();\n            filterInput.onclick = self.disposeAutocomplete;\n            filterInput.addEventListener('keydown', function (e) {\n                if (e.key === \"ArrowDown\") {\n                    autoCompleteContext.selectedIndex += 1;\n                }\n\n                if (e.key === \"ArrowUp\") {\n                    autoCompleteContext.selectedIndex -= 1;\n                }\n\n                if (e.key === \"Enter\") {\n                    autoCompleteContext.clickIndex(autoCompleteContext.selectedIndex);\n                    self.disposeContextMenu();\n                }\n\n                if (e.key === \"Tab\") {\n                    autoCompleteContext.clickIndex(autoCompleteContext.selectedIndex);\n                    e.preventDefault();\n                }\n\n                if (e.key === \"Escape\") {\n                    self.disposeContextMenu();\n                }\n            });\n            filterInput.addEventListener('keyup', function () {\n                self.setFilter(e.cell.header.name, filterInput.value);\n            });\n            filterInput.addEventListener('keyup', createAutoCompleteContext);\n            ['focus', 'blur', 'keydown', 'keyup', 'change'].forEach(function (en) {\n                filterInput.addEventListener(en, checkRegExpErrorState);\n            });\n            filterInput.value = e.cell.header ? self.columnFilters[e.cell.header.name] || '' : '';\n            filterLabel.innerHTML = self.attributes.filterOptionText.replace(/%s/g, n);\n            filterAutoCompleteButton.onclick = function () {\n                if (autoCompleteContext) {\n                    return self.disposeAutocomplete();\n                }\n                createAutoCompleteContext();\n            };\n            filterAutoCompleteButton.innerHTML = self.style.contextFilterButtonHTML;\n            filterContainer.addEventListener('click', function (e) {\n                return e.stopPropagation();\n            });\n            filterContainer.appendChild(filterLabel);\n            filterContainer.appendChild(filterInput);\n            filterContainer.appendChild(filterAutoCompleteButton);\n            e.items.push({\n                title: filterContainer\n            });\n            if (Object.keys(self.columnFilters).length) {\n                Object.keys(self.columnFilters).forEach(function (cf) {\n                    var h = self.getHeaderByName(cf);\n                    e.items.push({\n                        title: self.attributes.removeFilterOptionText.replace(/%s/g, h.title || h.name),\n                        click: function removeFilterClick(e) {\n                            e.preventDefault();\n                            self.setFilter(cf, '');\n                            self.controlInput.focus();\n                        }\n                    });\n                });\n            }\n        }\n        function addDefaultContextMenuItem(e) {\n            var isNormalCell = !(e.cell.isBackground || e.cell.isColumnHeaderCellCap\n                    || e.cell.isScrollBar || e.cell.isCorner || e.cell.isRowHeader)\n                    && e.cell.header;\n            if (self.attributes.showFilter && isNormalCell) {\n                createFilterContextMenuItems(e);\n            }\n            if (self.attributes.showCopy\n                    && self.selections.reduce(function (p, r) {\n                        return p + r.length;\n                    }, 0) > 0) {\n                e.items.push({\n                    title: self.attributes.copyText,\n                    click: function () {\n                        document.execCommand('copy');\n                        self.disposeContextMenu();\n                        self.controlInput.focus();\n                    }\n                });\n            }\n            if (self.attributes.showPaste && self.clipBoardData) {\n                e.items.push({\n                    title: self.attributes.pasteText,\n                    click: function () {\n                        self.paste(self.clipBoardData, e.cell.columnIndex, e.cell.rowIndex);\n                        self.draw();\n                    }\n                });\n            }\n            if (self.attributes.showColumnSelector) {\n                e.items.push({\n                    title: self.attributes.columnSelectorText,\n                    items: function () {\n                        var d = [];\n                        self.getSchema().forEach(function (column) {\n                            function toggleColumnVisibility(e) {\n                                column.hidden = !column.hidden;\n                                self.dispatchEvent('togglecolumn', {column: column, hidden: column.hidden});\n                                e.preventDefault();\n                                self.stopPropagation(e);\n                                self.disposeContextMenu();\n                                self.resize(true);\n                                self.setStorageData();\n                            }\n                            var el = document.createElement('div');\n                            applyContextItemStyle(el);\n                            el.addEventListener('touchstart', toggleColumnVisibility);\n                            el.addEventListener('click', toggleColumnVisibility);\n                            el.innerHTML = (column.hidden ? self.attributes.columnSelectorHiddenText\n                                    : self.attributes.columnSelectorVisibleText)\n                                    + (column.title || column.name);\n                            d.push({\n                                title: el\n                            });\n                        });\n                        return d;\n                    }\n                });\n                if (e.cell && e.cell.header && e.cell.columnIndex > -1) {\n                    e.items.push({\n                        title: self.attributes.hideColumnText\n                            .replace(/%s/ig, e.cell.header.title || e.cell.header.name),\n                        click: function (ev) {\n                            self.getSchema()[e.cell.columnIndex].hidden = true;\n                            ev.preventDefault();\n                            self.stopPropagation(ev);\n                            self.disposeContextMenu();\n                            self.setStorageData();\n                            setTimeout(function () { self.resize(true); }, 10);\n                        }\n                    });\n                }\n            }\n            if (self.attributes.saveAppearance && self.attributes.showClearSettingsOption\n                    && (Object.keys(self.sizes.rows).length > 0\n                        || Object.keys(self.sizes.columns).length > 0)) {\n                e.items.push({\n                    title: self.attributes.clearSettingsOptionText,\n                    click: function (e) {\n                        e.preventDefault();\n                        self.sizes.rows = {};\n                        self.sizes.columns = {};\n                        self.createRowOrders();\n                        self.createColumnOrders();\n                        self.storedSettings = undefined;\n                        self.dispatchEvent('resizecolumn', {columnWidth: self.style.cellWidth});\n                        self.dispatchEvent('resizerow', {cellHeight: self.style.cellHeight});\n                        self.setStorageData();\n                        self.resize(true);\n                        self.disposeContextMenu();\n                        self.controlInput.focus();\n                    }\n                });\n            }\n            if (self.attributes.allowSorting && self.attributes.showOrderByOption && isNormalCell) {\n                e.items.push({\n                    title: self.attributes.showOrderByOptionTextAsc.replace('%s', e.cell.header.title || e.cell.header.name),\n                    click: function (ev) {\n                        ev.preventDefault();\n                        self.order(e.cell.header.name, 'asc');\n                        self.controlInput.focus();\n                    }\n                });\n                e.items.push({\n                    title: self.attributes.showOrderByOptionTextDesc.replace('%s', e.cell.header.title || e.cell.header.name),\n                    click: function (ev) {\n                        ev.preventDefault();\n                        self.order(e.cell.header.name, 'desc');\n                        self.disposeContextMenu();\n                        self.controlInput.focus();\n                    }\n                });\n            }\n        }\n        self.disposeAutocomplete = function () {\n            if (autoCompleteContext) {\n                autoCompleteContext.dispose();\n                autoCompleteContext = undefined;\n            }\n        };\n        self.disposeContextMenu = function () {\n            document.removeEventListener('click', self.disposeContextMenu);\n            zIndexTop = self.style.contextMenuZIndex;\n            self.disposeAutocomplete();\n            if (self.contextMenu) {\n                self.contextMenu.dispose();\n            }\n            self.contextMenu = undefined;\n        };\n        self.contextmenuEvent = function (e, overridePos) {\n            if (!self.hasFocus && e.target !== self.canvas) {\n                return;\n            }\n            function createDiposeEvent() {\n                requestAnimationFrame(function () {\n                    document.addEventListener('click', self.disposeContextMenu);\n                    document.removeEventListener('mouseup', createDiposeEvent);\n                });\n            }\n            var contextPosition,\n                items = [],\n                pos = overridePos || self.getLayerPos(e),\n                ev = {\n                    NativeEvent: e,\n                    cell: self.getCellAt(pos.x, pos.y),\n                    items: items\n                };\n            if (!ev.cell.isGrid) {\n                addDefaultContextMenuItem(ev);\n            }\n            if (self.dispatchEvent('contextmenu', ev)) {\n                return;\n            }\n            if (!ev.cell.isGrid) {\n                if (self.contextMenu) {\n                    self.disposeContextMenu();\n                }\n                contextPosition = {\n                    left: pos.x + pos.rect.left\n                        + self.style.contextMenuMarginLeft + self.canvasOffsetLeft,\n                    top: pos.y + pos.rect.top\n                        + self.style.contextMenuMarginTop + self.canvasOffsetTop,\n                    right: ev.cell.width + ev.cell.x + pos.rect.left,\n                    bottom: ev.cell.height + ev.cell.y + pos.rect.top,\n                    height: ev.cell.height,\n                    width: ev.cell.width\n                };\n                if (self.mobile) {\n                    contextPosition.left = self.style.mobileContextMenuMargin + 'px';\n                    contextPosition.width = self.width - (self.style.mobileContextMenuMargin * 2) + 'px';\n                }\n                self.contextMenu = createContextMenu(ev, contextPosition, items);\n                document.addEventListener('mouseup', createDiposeEvent);\n                e.preventDefault();\n            }\n        };\n        return;\n    };\n});\n","/*jslint browser: true, unparam: true, todo: true*/\n/*globals define: true, MutationObserver: false, requestAnimationFrame: false, performance: false, btoa: false*/\ndefine([], function () {\n    'use strict';\n    return function (self) {\n        self.defaults = {\n            attributes: [\n                ['allowColumnReordering', true],\n                ['allowColumnResize', true],\n                ['allowColumnResizeFromCell', false],\n                ['allowFreezingRows', false],\n                ['allowFreezingColumns', false],\n                ['allowMovingSelection', true],\n                ['allowRowHeaderResize', true],\n                ['allowRowReordering', false],\n                ['allowRowResize', true],\n                ['allowRowResizeFromCell', false],\n                ['allowSorting', true],\n                ['autoGenerateSchema', false],\n                ['autoResizeColumns', false],\n                ['autoResizeRows', false],\n                ['blanksText', '(Blanks)'],\n                ['borderDragBehavior', 'none'],\n                ['borderResizeZone', 10],\n                ['clearSettingsOptionText', 'Clear saved settings'],\n                ['columnHeaderClickBehavior', 'sort'],\n                ['columnSelectorHiddenText', '&nbsp;&nbsp;&nbsp;'],\n                ['columnSelectorText', 'Add/Remove columns'],\n                ['columnSelectorVisibleText', '\\u2713'],\n                ['contextHoverScrollAmount', 2],\n                ['contextHoverScrollRateMs', 5],\n                ['copyHeadersOnSelectAll', true],\n                ['copyText', 'Copy'],\n                ['debug', false],\n                ['editable', true],\n                ['ellipsisText', '...'],\n                ['filterOptionText', 'Filter %s'],\n                ['filterTextPrefix', '(filtered) '],\n                ['globalRowResize', false],\n                ['hideColumnText', 'Hide %s'],\n                ['maxAutoCompleteItems', 200],\n                ['multiLine', false],\n                ['name', ''],\n                ['pageUpDownOverlap', 1],\n                ['pasteText', 'Paste'],\n                ['persistantSelectionMode', false],\n                ['removeFilterOptionText', 'Remove filter on %s'],\n                ['reorderDeadZone', 3],\n                ['resizeScrollZone', 20],\n                ['rowGrabZoneSize', 5],\n                ['saveAppearance', true],\n                ['scrollAnimationPPSThreshold', 0.75],\n                ['scrollPointerLock', false],\n                ['scrollRepeatRate', 75],\n                ['selectionFollowsActiveCell', false],\n                ['selectionHandleBehavior', 'none'],\n                ['selectionMode', 'cell'],\n                ['selectionScrollIncrement', 20],\n                ['selectionScrollZone', 20],\n                ['showClearSettingsOption', true],\n                ['showColumnHeaders', true],\n                ['showColumnSelector', true],\n                ['showCopy', false],\n                ['showFilter', true],\n                ['showNewRow', false],\n                ['showOrderByOption', true],\n                ['showOrderByOptionTextAsc', 'Order by %s ascending'],\n                ['showOrderByOptionTextDesc', 'Order by %s descending'],\n                ['showPaste', false],\n                ['showPerformance', false],\n                ['showRowHeaders', true],\n                ['showRowNumbers', true],\n                ['singleSelectionMode', false],\n                ['snapToRow', false],\n                ['touchContextMenuTimeMs', 800],\n                ['touchDeadZone', 3],\n                ['touchEasingMethod', 'easeOutQuad'],\n                ['touchReleaseAcceleration', 1000],\n                ['touchReleaseAnimationDurationMs', 2000],\n                ['touchScrollZone', 20],\n                ['touchSelectHandleZone', 20],\n                ['touchZoomSensitivity', 0.005],\n                ['touchZoomMin', 0.5],\n                ['touchZoomMax', 1.75],\n                ['maxPixelRatio', 2],\n                ['tree', false],\n                ['treeHorizontalScroll', false]\n            ],\n            styles: [\n                ['activeCellBackgroundColor', 'rgba(255, 255, 255, 1)'],\n                ['activeCellBorderColor', 'rgba(110, 168, 255, 1)'],\n                ['activeCellBorderWidth', 1],\n                ['activeCellColor', 'rgba(0, 0, 0, 1)'],\n                ['activeCellFont', '16px sans-serif'],\n                ['activeCellHoverBackgroundColor', 'rgba(255, 255, 255, 1)'],\n                ['activeCellHorizontalAlignment', 'left'],\n                ['activeCellHoverColor', 'rgba(0, 0, 0, 1)'],\n                ['activeCellOverlayBorderColor', 'rgba(66, 133, 244, 1)'],\n                ['activeCellOverlayBorderWidth', 1],\n                ['activeCellPaddingBottom', 5],\n                ['activeCellPaddingLeft', 5],\n                ['activeCellPaddingRight', 5],\n                ['activeCellPaddingTop', 5],\n                ['activeCellSelectedBackgroundColor', 'rgba(236, 243, 255, 1)'],\n                ['activeCellSelectedColor', 'rgba(0, 0, 0, 1)'],\n                ['activeCellVerticalAlignment', 'center'],\n                ['activeColumnHeaderCellBackgroundColor', 'rgba(225, 225, 225, 1)'],\n                ['activeColumnHeaderCellColor', 'rgba(0, 0, 0, 1)'],\n                ['activeRowHeaderCellBackgroundColor', 'rgba(225, 225, 225, 1)'],\n                ['activeRowHeaderCellColor', 'rgba(0, 0, 0, 1)'],\n                ['autocompleteBottomMargin', 60],\n                ['autosizeHeaderCellPadding', 8],\n                ['autosizePadding', 5],\n                ['cellAutoResizePadding', 13],\n                ['cellBackgroundColor', 'rgba(255, 255, 255, 1)'],\n                ['cellBorderColor', 'rgba(195, 199, 202, 1)'],\n                ['cellBorderWidth', 1],\n                ['cellColor', 'rgba(0, 0, 0, 1)'],\n                ['cellFont', '16px sans-serif'],\n                ['cellGridHeight', 250],\n                ['cellHeight', 24],\n                ['cellHeightWithChildGrid', 150],\n                ['cellHorizontalAlignment', 'left'],\n                ['cellHoverBackgroundColor', 'rgba(255, 255, 255, 1)'],\n                ['cellHoverColor', 'rgba(0, 0, 0, 1)'],\n                ['cellPaddingBottom', 5],\n                ['cellPaddingLeft', 5],\n                ['cellPaddingRight', 5],\n                ['cellPaddingTop', 5],\n                ['cellSelectedBackgroundColor', 'rgba(236, 243, 255, 1)'],\n                ['cellSelectedColor', 'rgba(0, 0, 0, 1)'],\n                ['cellVerticalAlignment', 'center'],\n                ['cellWidth', 250],\n                ['cellWidthWithChildGrid', 250],\n                ['cellWhiteSpace', 'nowrap'],\n                ['cellLineHeight', 1],\n                ['cellLineSpacing', 3],\n                ['childContextMenuArrowColor', 'rgba(43, 48, 43, 1)'],\n                ['childContextMenuArrowHTML', '&#x25BA;'],\n                ['childContextMenuMarginLeft', -11],\n                ['childContextMenuMarginTop', -6],\n                ['columnHeaderCellBackgroundColor', 'rgba(240, 240, 240, 1)'],\n                ['columnHeaderCellBorderColor', 'rgba(172, 172, 172, 1)'],\n                ['columnHeaderCellBorderWidth', 1],\n                ['columnHeaderCellCapBackgroundColor', 'rgba(240, 240, 240, 1)'],\n                ['columnHeaderCellCapBorderColor', 'rgba(172, 172, 172, 1)'],\n                ['columnHeaderCellCapBorderWidth', 1],\n                ['columnHeaderCellColor', 'rgba(50, 50, 50, 1)'],\n                ['columnHeaderCellFont', '16px sans-serif'],\n                ['columnHeaderCellHeight', 25],\n                ['columnHeaderCellHorizontalAlignment', 'left'],\n                ['columnHeaderCellHoverBackgroundColor', 'rgba(235, 235, 235, 1)'],\n                ['columnHeaderCellHoverColor', 'rgba(0, 0, 0, 1)'],\n                ['columnHeaderCellPaddingBottom', 5],\n                ['columnHeaderCellPaddingLeft', 5],\n                ['columnHeaderCellPaddingRight', 5],\n                ['columnHeaderCellPaddingTop', 5],\n                ['columnHeaderCellVerticalAlignment', 'center'],\n                ['columnHeaderOrderByArrowBorderColor', 'rgba(195, 199, 202, 1)'],\n                ['columnHeaderOrderByArrowBorderWidth', 1],\n                ['columnHeaderOrderByArrowColor', 'rgba(155, 155, 155, 1)'],\n                ['columnHeaderOrderByArrowHeight', 8],\n                ['columnHeaderOrderByArrowMarginLeft', 0],\n                ['columnHeaderOrderByArrowMarginRight', 5],\n                ['columnHeaderOrderByArrowMarginTop', 6],\n                ['columnHeaderOrderByArrowWidth', 13],\n                ['contextFilterButtonBorder', 'solid 1px rgba(158, 163, 169, 1)'],\n                ['contextFilterButtonBorderRadius', '3px'],\n                ['contextFilterButtonHTML', '&#x25BC;'],\n                ['contextFilterInputBackground', 'rgba(255,255,255,1)'],\n                ['contextFilterInputBorder', 'solid 1px rgba(158, 163, 169, 1)'],\n                ['contextFilterInputBorderRadius', '0'],\n                ['contextFilterInputColor', 'rgba(0,0,0,1)'],\n                ['contextFilterInputFontFamily', 'sans-serif'],\n                ['contextFilterInputFontSize', '14px'],\n                ['contextFilterInvalidRegExpBackground', 'rgba(180, 6, 1, 1)'],\n                ['contextFilterInvalidRegExpColor', 'rgba(255, 255, 255, 1)'],\n                ['contextMenuArrowColor', 'rgba(43, 48, 43, 1)'],\n                ['contextMenuArrowDownHTML', '&#x25BC;'],\n                ['contextMenuArrowUpHTML', '&#x25B2;'],\n                ['contextMenuBackground', 'rgba(240, 240, 240, 1)'],\n                ['contextMenuBorder', 'solid 1px rgba(158, 163, 169, 1)'],\n                ['contextMenuBorderRadius', '3px'],\n                ['contextMenuChildArrowFontSize', '12px'],\n                ['contextMenuColor', 'rgba(43, 48, 43, 1)'],\n                ['contextMenuCursor', 'default'],\n                ['contextMenuFilterButtonFontFamily', 'sans-serif'],\n                ['contextMenuFilterButtonFontSize', '10px'],\n                ['contextMenuFilterInvalidExpresion', 'rgba(237, 155, 156, 1)'],\n                ['contextMenuFontFamily', 'sans-serif'],\n                ['contextMenuFontSize', '16px'],\n                ['contextMenuHoverBackground', 'rgba(182, 205, 250, 1)'],\n                ['contextMenuHoverColor', 'rgba(43, 48, 153, 1)'],\n                ['contextMenuItemBorderRadius', '3px'],\n                ['contextMenuItemMargin', '2px'],\n                ['contextMenuLabelDisplay', 'inline-block'],\n                ['contextMenuLabelMargin', '0 3px 0 0'],\n                ['contextMenuLabelMaxWidth', '700px'],\n                ['contextMenuLabelMinWidth', '75px'],\n                ['contextMenuMarginLeft', 3],\n                ['contextMenuMarginTop', -3],\n                ['contextMenuOpacity', '0.98'],\n                ['contextMenuPadding', '2px'],\n                ['contextMenuWindowMargin', 30],\n                ['contextMenuZIndex', 10000],\n                ['cornerCellBackgroundColor', 'rgba(240, 240, 240, 1)'],\n                ['cornerCellBorderColor', 'rgba(202, 202, 202, 1)'],\n                ['debugBackgroundColor', 'rgba(0, 0, 0, .0)'],\n                ['debugColor', 'rgba(255, 15, 24, 1)'],\n                ['debugEntitiesColor', 'rgba(76, 231, 239, 1.00)'],\n                ['debugFont', '11px sans-serif'],\n                ['debugPerfChartBackground', 'rgba(29, 25, 26, 1.00)'],\n                ['debugPerfChartTextColor', 'rgba(255, 255, 255, 0.8)'],\n                ['debugPerformanceColor', 'rgba(252, 255, 37, 1.00)'],\n                ['debugScrollHeightColor', 'rgba(248, 33, 103, 1.00)'],\n                ['debugScrollWidthColor', 'rgba(66, 255, 27, 1.00)'],\n                ['debugTouchPPSXColor', 'rgba(246, 102, 24, 1.00)'],\n                ['debugTouchPPSYColor', 'rgba(186, 0, 255, 1.00)'],\n                ['display', 'inline-block'],\n                ['editCellBackgroundColor', 'white'],\n                ['editCellBorder', 'solid 1px rgba(110, 168, 255, 1)'],\n                ['editCellBoxShadow', '0 2px 5px rgba(0,0,0,0.4)'],\n                ['editCellColor', 'black'],\n                ['editCellFontFamily', 'sans-serif'],\n                ['editCellFontSize', '16px'],\n                ['editCellPaddingLeft', 4],\n                ['editCellZIndex', 10000],\n                ['frozenMarkerHoverColor', 'rgba(236, 243, 255, 1)'],\n                ['frozenMarkerHoverBorderColor', 'rgba(110, 168, 255, 1)'],\n                ['frozenMarkerActiveColor', 'rgba(236, 243, 255, 1)'],\n                ['frozenMarkerActiveBorderColor', 'rgba(110, 168, 255, 1)'],\n                ['frozenMarkerColor', 'rgba(222, 222, 222, 1)'],\n                ['frozenMarkerBorderColor', 'rgba(168, 168, 168, 1)'],\n                ['frozenMarkerBorderWidth', 1],\n                ['frozenMarkerWidth', 2],\n                ['gridBackgroundColor', 'rgba(240, 240, 240, 1)'],\n                ['gridBorderCollapse', 'collapse'],\n                ['gridBorderColor', 'rgba(202, 202, 202, 1)'],\n                ['gridBorderWidth', 1],\n                ['height', 'auto'],\n                ['maxHeight', 'inherit'],\n                ['maxWidth', 'inherit'],\n                ['minColumnWidth', 45],\n                ['minHeight', 'inherit'],\n                ['minRowHeight', 24],\n                ['minWidth', 'inherit'],\n                ['mobileContextMenuMargin', 10],\n                ['mobileEditInputHeight', 30],\n                ['mobileEditFontFamily', 'sans-serif'],\n                ['mobileEditFontSize', '16px'],\n                ['moveOverlayBorderWidth', 1],\n                ['moveOverlayBorderColor', 'rgba(66, 133, 244, 1)'],\n                ['moveOverlayBorderSegments', '12, 7'],\n                ['name', 'default'],\n                ['overflowY', 'auto'],\n                ['overflowX', 'auto'],\n                ['reorderMarkerBackgroundColor', 'rgba(0, 0, 0, 0.1)'],\n                ['reorderMarkerBorderColor', 'rgba(0, 0, 0, 0.2)'],\n                ['reorderMarkerBorderWidth', 1.25],\n                ['reorderMarkerIndexBorderColor', 'rgba(66, 133, 244, 1)'],\n                ['reorderMarkerIndexBorderWidth', 2.75],\n                ['rowHeaderCellBackgroundColor', 'rgba(240, 240, 240, 1)'],\n                ['rowHeaderCellBorderColor', 'rgba(200, 200, 200, 1)'],\n                ['rowHeaderCellBorderWidth', 1],\n                ['rowHeaderCellColor', 'rgba(50, 50, 50, 1)'],\n                ['rowHeaderCellFont', '16px sans-serif'],\n                ['rowHeaderCellHeight', 25],\n                ['rowHeaderCellHorizontalAlignment', 'left'],\n                ['rowHeaderCellHoverBackgroundColor', 'rgba(235, 235, 235, 1)'],\n                ['rowHeaderCellHoverColor', 'rgba(0, 0, 0, 1)'],\n                ['rowHeaderCellPaddingBottom', 5],\n                ['rowHeaderCellPaddingLeft', 5],\n                ['rowHeaderCellPaddingRight', 5],\n                ['rowHeaderCellPaddingTop', 5],\n                ['rowHeaderCellSelectedBackgroundColor', 'rgba(217, 217, 217, 1)'],\n                ['rowHeaderCellSelectedColor', 'rgba(50, 50, 50, 1)'],\n                ['rowHeaderCellVerticalAlignment', 'center'],\n                ['rowHeaderCellWidth', 57],\n                ['scrollBarActiveColor', 'rgba(125, 125, 125, 1)'],\n                ['scrollBarBackgroundColor', 'rgba(240, 240, 240, 1)'],\n                ['scrollBarBorderColor', 'rgba(202, 202, 202, 1)'],\n                ['scrollBarBorderWidth', 0.5],\n                ['scrollBarBoxBorderRadius', 4.125],\n                ['scrollBarBoxColor', 'rgba(192, 192, 192, 1)'],\n                ['scrollBarBoxMargin', 2],\n                ['scrollBarBoxMinSize', 15],\n                ['scrollBarBoxWidth', 8],\n                ['scrollBarCornerBackgroundColor', 'rgba(240, 240, 240, 1)'],\n                ['scrollBarCornerBorderColor', 'rgba(202, 202, 202, 1)'],\n                ['scrollBarWidth', 11],\n                ['selectionHandleBorderColor', 'rgba(255, 255, 255, 1)'],\n                ['selectionHandleBorderWidth', 1.5],\n                ['selectionHandleColor', 'rgba(66, 133, 244, 1)'],\n                ['selectionHandleSize', 8],\n                ['selectionHandleType', 'square'],\n                ['selectionOverlayBorderColor', 'rgba(66, 133, 244, 1)'],\n                ['selectionOverlayBorderWidth', 1],\n                ['treeArrowBorderColor', 'rgba(195, 199, 202, 1)'],\n                ['treeArrowBorderWidth', 1],\n                ['treeArrowClickRadius', 5],\n                ['treeArrowColor', 'rgba(155, 155, 155, 1)'],\n                ['treeArrowHeight', 8],\n                ['treeArrowMarginLeft', 0],\n                ['treeArrowMarginRight', 5],\n                ['treeArrowMarginTop', 6],\n                ['treeArrowWidth', 13],\n                ['treeGridHeight', 250],\n                ['width', 'auto']\n            ]\n        };\n    };\n});\n","/*jslint browser: true, unparam: true, todo: true*/\n/*globals define: true, MutationObserver: false, requestAnimationFrame: false, performance: false, btoa: false*/\ndefine([], function () {\n    'use strict';\n    return function (self) {\n        self.getClippingRect = function (ele) {\n            var boundingRect = self.position(self.parentNode),\n                eleRect = self.position(ele),\n                s = self.scrollOffset(self.canvas),\n                clipRect = {\n                    x: 0,\n                    y: 0,\n                    h: 0,\n                    w: 0\n                },\n                parentRect = {\n                    x: -Infinity,\n                    y: -Infinity,\n                    h: Infinity,\n                    w: Infinity\n                },\n                columnHeaderCellHeight = self.getColumnHeaderCellHeight(),\n                rowHeaderCellWidth = self.getRowHeaderCellWidth();\n            boundingRect.top -= s.top;\n            boundingRect.left -= s.left;\n            eleRect.top -= s.top;\n            eleRect.left -= s.left;\n            clipRect.h = boundingRect.top + boundingRect.height - ele.offsetTop - self.style.scrollBarWidth;\n            clipRect.w = boundingRect.left + boundingRect.width - ele.offsetLeft - self.style.scrollBarWidth;\n            clipRect.x = boundingRect.left + (eleRect.left * -1) + rowHeaderCellWidth;\n            clipRect.y = boundingRect.top + (eleRect.top * -1) + columnHeaderCellHeight;\n            return {\n                x: clipRect.x > parentRect.x ? clipRect.x : parentRect.x,\n                y: clipRect.y > parentRect.y ? clipRect.y : parentRect.y,\n                h: clipRect.h < parentRect.h ? clipRect.h : parentRect.h,\n                w: clipRect.w < parentRect.w ? clipRect.w : parentRect.w\n            };\n        };\n        self.clipElement = function (ele) {\n            var clipRect = self.getClippingRect(ele);\n            if (clipRect.w < 0) { clipRect.w = 0; }\n            if (clipRect.h < 0) { clipRect.h = 0; }\n            ele.style.clip = 'rect('\n                + clipRect.y + 'px,'\n                + clipRect.w + 'px,'\n                + clipRect.h + 'px,'\n                + clipRect.x + 'px'\n                + ')';\n            // INFO https://developer.mozilla.org/en-US/docs/Web/CSS/clip\n            // clip has been \"deprecated\" for clipPath.  Of course nothing but chrome\n            // supports clip path, so we'll keep using clip until someday clipPath becomes\n            // more widely support.  The code below works correctly, but setting clipPath and clip\n            // at the same time has undesirable results.\n            // ele.style.clipPath = 'polygon('\n            //     + clipRect.x + 'px ' + clipRect.y + 'px,'\n            //     + clipRect.x + 'px ' + clipRect.h + 'px,'\n            //     + clipRect.w + 'px ' + clipRect.h + 'px,'\n            //     + clipRect.w + 'px ' + clipRect.y + 'px'\n            //     + ')';\n        };\n        self.scrollOffset = function (e) {\n            var x = 0, y = 0, scrollingElement = document.scrollingElement || { scrollLeft: 0, scrollTop: 0 };\n            while (e.parentNode && e.nodeName !== 'CANVAS-DATAGRID' && e !== self.intf) {\n                if (e.nodeType !== 'canvas-datagrid-tree'\n                        && e.nodeType !== 'canvas-datagrid-cell') {\n                    x -= e.scrollLeft;\n                    y -= e.scrollTop;\n                }\n                e = e.parentNode;\n            }\n            return {\n                left: x - scrollingElement.scrollLeft,\n                top: y - scrollingElement.scrollTop\n            };\n        };\n        self.resizeEditInput = function () {\n            if (self.input && self.input.editCell) {\n                var pos = self.canvas.getBoundingClientRect(),\n                    s = self.scrollOffset(self.intf),\n                    bm = self.style.gridBorderCollapse === 'collapse' ? 1 : 2,\n                    borderWidth = (self.style.cellBorderWidth * bm),\n                    cell = self.getVisibleCellByIndex(self.input.editCell.columnIndex, self.input.editCell.rowIndex)\n                        || {x: -100, y: -100, height: 0, width: 0};\n                if (self.mobile) {\n                    self.input.style.left = '0';\n                    self.input.style.top = (self.height - self.style.mobileEditInputHeight) - borderWidth - 1 + 'px';\n                    self.input.style.height = self.style.mobileEditInputHeight + 'px';\n                    self.input.style.width = self.width - borderWidth - 1 + 'px';\n                    return;\n                }\n                self.input.style.left = pos.left + cell.x + self.canvasOffsetLeft - s.left + 'px';\n                self.input.style.top = pos.top + cell.y - self.style.cellBorderWidth + self.canvasOffsetTop - s.top + 'px';\n                self.input.style.height = cell.height - borderWidth + 'px';\n                self.input.style.width = cell.width - self.style.cellPaddingLeft + 'px';\n                self.clipElement(self.input);\n            }\n        };\n        self.position = function (e, ignoreScrollOffset) {\n            var x = 0, y = 0, s = e, h, w;\n            while (e.offsetParent && e.nodeName !== 'CANVAS-DATAGRID') {\n                x += e.offsetLeft;\n                y += e.offsetTop;\n                h = e.offsetHeight;\n                w = e.offsetWidth;\n                e = e.offsetParent;\n            }\n            if (ignoreScrollOffset) {\n                return {left: x, top: y, height: h, width: w};\n            }\n            e = s;\n            s = self.scrollOffset(e);\n            return { left: x + s.left, top: y + s.top, height: h, width: w };\n        };\n        self.getLayerPos = function (e) {\n            var rect = self.canvas.getBoundingClientRect(),\n                pos = {\n                    x: e.clientX - rect.left,\n                    y: e.clientY - rect.top\n                };\n            if (self.isChildGrid) {\n                pos.x -= self.canvasOffsetLeft;\n                pos.y -= self.canvasOffsetTop;\n            }\n            return {\n                x: pos.x,\n                y: pos.y,\n                rect: rect\n            };\n        };\n        /**\n         * Ends editing, optionally aborting the edit.\n         * @memberof canvasDatagrid\n         * @name endEdit\n         * @method\n         * @param {boolean} abort When true, abort the edit.\n         */\n        self.endEdit = function (abort) {\n            var cell = self.input.editCell,\n                y = cell.rowIndex;\n            function abortEdit() {\n                abort = true;\n            }\n            if (self.dispatchEvent('beforeendedit', {\n                    cell: cell,\n                    newValue: self.input.value,\n                    oldValue: cell.value,\n                    abort: abortEdit,\n                    input: self.input\n                })) { return false; }\n            if (self.input.value !== cell.value && !abort) {\n                self.changes[y] = self.changes[y] || {};\n                self.changes[y][cell.header.name] = self.input.value;\n                if (!cell.data) {\n                    self.data[cell.rowIndex] = {};\n                    cell.data = self.data[cell.rowIndex];\n                }\n                cell.data[cell.header.name] = self.input.value;\n                if (y === self.data.length) {\n                    if (self.dispatchEvent('newrow', {\n                            value: self.input.value,\n                            defaultValue: cell.value,\n                            aborted: abort,\n                            cell: cell,\n                            input: self.input\n                        })) { return false; }\n                    self.addRow(cell.data);\n                    self.createNewRowData();\n                }\n                self.draw(true);\n            }\n            if (self.input.parentNode) {\n                self.input.parentNode.removeChild(self.input);\n            }\n            self.intf.focus();\n            self.dispatchEvent('endedit', {\n                cell: cell,\n                value: self.input.value,\n                aborted: abort,\n                input: self.input\n            });\n            self.input = undefined;\n            return true;\n        };\n        /**\n         * Begins editing at cell x, row y.\n         * @memberof canvasDatagrid\n         * @name beginEditAt\n         * @method\n         * @param {number} x The column index of the cell to edit.\n         * @param {number} y The row index of the cell to edit.\n         * @param {boolean} inEnterMode If true, starting to type in cell will replace the\n         * cell's previous value instead of appending, and using the arrow keys will allow\n         * the user to navigate to adjacent cells instead of moving the text cursor around\n         * (default is false, and means user is in 'edit' mode).\n         */\n        self.beginEditAt = function (x, y, NativeEvent, inEnterMode = false) {\n            if (!self.attributes.editable) { return; }\n            if (self.input) {\n                self.endEdit();\n            }\n            var cell = self.getVisibleCellByIndex(x, y),\n                s = self.getSchema(),\n                adjacentCells,\n                enumItems,\n                enu,\n                option,\n                valueInEnum;\n            if (!(cell && cell.header)) { return; }\n            //HACK for IE10, does not like literal enum\n            enu = cell.header['enum'];\n            if (self.dispatchEvent('beforebeginedit', {cell: cell, NativeEvent: NativeEvent})) { return false; }\n            self.scrollIntoView(x, y);\n            self.setActiveCell(x, y);\n            adjacentCells = self.getAdjacentCells();\n            if (enu) {\n                self.input = document.createElement('select');\n            } else {\n                self.input = document.createElement(self.attributes.multiLine\n                    ? 'textarea' : 'input');\n            }\n            cell = self.getVisibleCellByIndex(x, y);\n            //HACK on mobile devices sometimes edit can begin without the cell being in view, I don't know how.\n            if (!cell) { return; }\n            if (enu) {\n                // add enums\n                if (typeof enu === 'function') {\n                    enumItems = enu.apply(self.intf, [{cell: cell}]);\n                } else if (Array.isArray(enu)) {\n                    enumItems = enu;\n                }\n                enumItems.forEach(function (e) {\n                    var i = document.createElement('option'),\n                        val,\n                        title;\n                    if (Array.isArray(e)) {\n                        val = e[0];\n                        title = e[1];\n                    } else {\n                        val = e;\n                        title = e;\n                    }\n                    if (val === cell.value) { valueInEnum = true; }\n                    i.value = val;\n                    i.innerHTML = title;\n                    self.input.appendChild(i);\n                });\n                if (!valueInEnum) {\n                    option = document.createElement('option');\n                    option.value = cell.value;\n                    option.innerHTML = cell.value;\n                    self.input.appendChild(option);\n                }\n                self.input.addEventListener('change', function () {\n                    self.endEdit();\n                    self.draw(true);\n                });\n            }\n            // if the user has not prevented the default action, append to the body\n            if (!self.dispatchEvent('appendeditinput', {cell: cell, input:self.input})) { \n                document.body.appendChild(self.input);\n            }\n            self.createInlineStyle(self.input, self.mobile ? 'canvas-datagrid-edit-mobile-input' : 'canvas-datagrid-edit-input');\n            self.input.style.position = 'absolute';\n            self.input.editCell = cell;\n            self.resizeEditInput();\n            self.input.style.zIndex = self.style.editCellZIndex;\n            self.input.style.fontSize = (parseInt(self.style.editCellFontSize, 10) * self.scale) + 'px';\n\n            var cellValueIsEmpty = [null, undefined].indexOf(cell.value) !== -1;\n            var shouldClearCellValue = cellValueIsEmpty || inEnterMode;\n\n            self.input.value = shouldClearCellValue ? '' : cell.value;\n            self.input.focus();\n            self.input.addEventListener('click', self.stopPropagation);\n            self.input.addEventListener('dblclick', self.stopPropagation);\n            self.input.addEventListener('mouseup', self.stopPropagation);\n            self.input.addEventListener('mousedown', self.stopPropagation);\n            self.input.addEventListener('keydown', function (e) {\n                var nx = cell.columnIndex,\n                    ny = cell.rowIndex;\n\n                if (e.key === \"Escape\") {\n                    self.endEdit(true); // end edit and abort the value change\n                    self.draw(true);\n                } else if (e.key === \"Enter\" && self.attributes.multiLine && e.altKey) {\n                    self.input.value = self.input.value + \"\\n\";\n                    self.input.scrollTop = self.input.scrollHeight;\n                } else if (e.key === \"Enter\") {\n                    self.endEdit();\n\n                    // Move to cell in next or previous row\n                    var nextRowIndex = e.shiftKey ?\n                        Math.max(0, ny - 1)\n                        : Math.min(ny + 1, self.data.length - 1);\n\n                    if (nextRowIndex !== ny) {\n                        self.scrollIntoView(nx, nextRowIndex);\n                        self.setActiveCell(nx, nextRowIndex);\n                    }\n\n                    self.draw(true);\n                } else if ([\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].includes(e.key) && inEnterMode) {\n                    switch (e.key) {\n                        case \"ArrowUp\":\n                            ny = Math.max(0, ny - 1);\n                            break;\n                        case \"ArrowDown\":\n                            ny = Math.min(ny + 1, self.data.length - 1);\n                            break;\n                        case \"ArrowLeft\":\n                            nx = Math.max(nx - 1, 0);\n                            break;\n                        case \"ArrowRight\":\n                            nx = adjacentCells.right;\n                            break;\n                    }\n\n                    self.endEdit();\n\n                    self.scrollIntoView(nx, ny);\n                    self.setActiveCell(nx, ny);\n\n                    self.draw(true);\n                } else if (e.key === \"Tab\") {\n                    e.preventDefault();\n                    if (!self.endEdit()) {\n                        return;\n                    }\n                    if (e.shiftKey) {\n                        nx = adjacentCells.left;\n                    } else {\n                        nx = adjacentCells.right;\n                    }\n                    if (adjacentCells.left === x && e.shiftKey) {\n                        nx = adjacentCells.last;\n                        ny -= 1;\n                    }\n                    if (adjacentCells.right === x && !e.shiftKey) {\n                        nx = adjacentCells.first;\n                        ny += 1;\n                    }\n                    if (ny < 0) {\n                        ny = self.data.length - 1;\n                    }\n                    if (ny > self.data.length - 1) {\n                        ny = 0;\n                    }\n                    self.scrollIntoView(nx, ny);\n                    self.beginEditAt(nx, ny, e);\n                }\n            });\n\n            self.dispatchEvent('beginedit', {cell: cell, input: self.input});\n        };\n        self.createInlineStyle = function (el, className) {\n            var css = {\n                'canvas-datagrid-context-menu-filter-input': {\n                    height: '19px',\n                    verticalAlign: 'bottom',\n                    marginLeft: '2px',\n                    padding: '0',\n                    background: self.style.contextFilterInputBackground,\n                    color: self.style.contextFilterInputColor,\n                    border: self.style.contextFilterInputBorder,\n                    borderRadius: self.style.contextFilterInputBorderRadius,\n                    lineHeight: 'normal',\n                    fontWeight: 'normal',\n                    fontFamily: self.style.contextFilterInputFontFamily,\n                    fontSize: self.style.contextFilterInputFontSize\n                },\n                'canvas-datagrid-context-menu-filter-button': {\n                    height: '19px',\n                    verticalAlign: 'bottom',\n                    marginLeft: '2px',\n                    padding: '0',\n                    background: self.style.contextMenuBackground,\n                    color: self.style.contextMenuColor,\n                    border: self.style.contextFilterButtonBorder,\n                    borderRadius: self.style.contextFilterButtonBorderRadius,\n                    lineHeight: 'normal',\n                    fontWeight: 'normal',\n                    fontFamily: self.style.contextMenuFilterButtonFontFamily,\n                    fontSize: self.style.contextMenuFilterButtonFontSize\n                },\n                'canvas-datagrid-context-child-arrow': {\n                    cssFloat: 'right',\n                    color: self.style.childContextMenuArrowColor,\n                    fontSize: self.style.contextMenuChildArrowFontSize,\n                    fontFamily: self.style.contextMenuFontFamily,\n                    verticalAlign: 'middle'\n                },\n                'canvas-datagrid-autocomplete': {\n                    fontFamily: self.style.contextMenuFontFamily,\n                    fontSize: self.style.contextMenuFontSize,\n                    background: self.style.contextMenuBackground,\n                    color: self.style.contextMenuColor,\n                    border: self.style.contextMenuBorder,\n                    padding: self.style.contextMenuPadding,\n                    borderRadius: self.style.contextMenuBorderRadius,\n                    opacity: self.style.contextMenuOpacity,\n                    position: 'absolute',\n                    zIndex: 9999,\n                    overflow: 'hidden'\n                },\n                'canvas-datagrid-autocomplete-item': {\n                    background: self.style.contextMenuBackground,\n                    color: self.style.contextMenuColor\n                },\n                'canvas-datagrid-autocomplete-item:hover': {\n                    background: self.style.contextMenuHoverBackground,\n                    color: self.style.contextMenuHoverColor\n                },\n                'canvas-datagrid-canvas': {\n                    position: 'absolute',\n                    zIndex: '-1'\n                },\n                'canvas-datagrid': {\n                    display: 'block'\n                },\n                'canvas-datagrid-control-input': {\n                    position: 'fixed',\n                    top: '-5px',\n                    left: '-5px',\n                    border: 'none',\n                    opacity: '0',\n                    cursor: 'pointer',\n                    width: '1px',\n                    height: '1px',\n                    lineHeight: 'normal',\n                    fontWeight: 'normal',\n                    fontFamily: self.style.contextMenuFontFamily,\n                    fontSize: self.style.contextMenuFontSize\n                },\n                'canvas-datagrid-edit-mobile-input': {\n                    boxSizing: 'content-box',\n                    outline: 'none',\n                    margin: '0',\n                    padding: '0 0 0 0',\n                    lineHeight: 'normal',\n                    fontWeight: 'normal',\n                    fontFamily: self.style.mobileEditFontFamily,\n                    fontSize: self.style.mobileEditFontSize,\n                    border: self.style.editCellBorder,\n                    color: self.style.editCellColor,\n                    background: self.style.editCellBackgroundColor,\n                    appearance: 'none',\n                    webkitAppearance: 'none',\n                    mozAppearance: 'none',\n                    borderRadius: '0'\n                },\n                'canvas-datagrid-edit-input': {\n                    boxSizing: 'content-box',\n                    outline: 'none',\n                    margin: '0',\n                    padding: '0 0 0 ' + self.style.editCellPaddingLeft + 'px',\n                    lineHeight: 'normal',\n                    fontWeight: 'normal',\n                    fontFamily: self.style.editCellFontFamily,\n                    fontSize: self.style.editCellFontSize,\n                    boxShadow: self.style.editCellBoxShadow,\n                    border: self.style.editCellBorder,\n                    color: self.style.editCellColor,\n                    background: self.style.editCellBackgroundColor,\n                    appearance: 'none',\n                    webkitAppearance: 'none',\n                    mozAppearance: 'none',\n                    borderRadius: '0'\n                },\n                'canvas-datagrid-context-menu-item-mobile': {\n                    lineHeight: 'normal',\n                    fontWeight: 'normal',\n                    fontFamily: self.style.contextMenuFontFamily,\n                    fontSize: self.style.contextMenuFontSize,\n                    color: 'inherit',\n                    background: 'inherit',\n                    margin: self.style.contextMenuItemMargin,\n                    borderRadius: self.style.contextMenuItemBorderRadius,\n                    verticalAlign: 'middle'\n                },\n                'canvas-datagrid-context-menu-item': {\n                    lineHeight: 'normal',\n                    fontWeight: 'normal',\n                    fontFamily: self.style.contextMenuFontFamily,\n                    fontSize: self.style.contextMenuFontSize,\n                    color: 'inherit',\n                    background: 'inherit',\n                    margin: self.style.contextMenuItemMargin,\n                    borderRadius: self.style.contextMenuItemBorderRadius,\n                    verticalAlign: 'middle'\n                },\n                'canvas-datagrid-context-menu-item:hover': {\n                    background: self.style.contextMenuHoverBackground,\n                    color: self.style.contextMenuHoverColor\n                },\n                'canvas-datagrid-context-menu-label': {\n                    margin: self.style.contextMenuLabelMargin,\n                    display: self.style.contextMenuLabelDisplay,\n                    minWidth: self.style.contextMenuLabelMinWidth,\n                    maxWidth: self.style.contextMenuLabelMaxWidth\n                },\n                'canvas-datagrid-context-menu-mobile': {\n                    lineHeight: 'normal',\n                    fontWeight: 'normal',\n                    fontFamily: self.style.contextMenuFontFamily,\n                    fontSize: self.style.contextMenuFontSize,\n                    background: self.style.contextMenuBackground,\n                    color: self.style.contextMenuColor,\n                    border: self.style.contextMenuBorder,\n                    padding: self.style.contextMenuPadding,\n                    borderRadius: self.style.contextMenuBorderRadius,\n                    opacity: self.style.contextMenuOpacity,\n                    overflow: 'hidden',\n                    whiteSpace: 'nowrap'\n                },\n                'canvas-datagrid-context-menu': {\n                    lineHeight: 'normal',\n                    fontWeight: 'normal',\n                    fontFamily: self.style.contextMenuFontFamily,\n                    fontSize: self.style.contextMenuFontSize,\n                    background: self.style.contextMenuBackground,\n                    color: self.style.contextMenuColor,\n                    border: self.style.contextMenuBorder,\n                    padding: self.style.contextMenuPadding,\n                    borderRadius: self.style.contextMenuBorderRadius,\n                    opacity: self.style.contextMenuOpacity,\n                    overflow: 'hidden',\n                    whiteSpace: 'nowrap',\n                    cursor: self.style.contextMenuCursor\n                },\n                'canvas-datagrid-invalid-search-regExp': {\n                    background: self.style.contextMenuFilterInvalidExpresion\n                }\n            };\n            if (css[className]) {\n                Object.keys(css[className]).map(function (prop) {\n                    el.style[prop] = css[className][prop];\n                });\n            }\n            return;\n        };\n        self.appendTo = function (e) {\n            self.parentNode = e;\n            self.setDom();\n        };\n        self.setDom = function () {\n            if (self.isChildGrid) {\n                self.parentGrid = self.parentNode.parentGrid;\n                self.ctx = self.parentGrid.context;\n                self.canvas = self.parentGrid.canvas;\n                self.controlInput = self.parentGrid.controlInput;\n                self.eventParent = self.canvas;\n            } else {\n                self.controlInput = self.controlInput || document.createElement('input');\n                self.controlInput.onblur = self.intf.blur;\n                self.createInlineStyle(self.controlInput, 'canvas-datagrid-control-input');\n                self.isChildGrid = false;\n                self.parentDOMNode = self.parentNode;\n                self.parentIsCanvas = /^canvas$/i.test(self.parentDOMNode.tagName);\n                if (self.parentIsCanvas) {\n                    self.canvas = self.parentDOMNode;\n                } else {\n                    self.canvas = document.createElement('canvas');\n                    self.parentDOMNode.appendChild(self.canvas);\n                }\n                document.body.appendChild(self.controlInput);\n                self.createInlineStyle(self.canvas, 'canvas-datagrid');\n                self.ctx = self.canvas.getContext('2d');\n                self.ctx.textBaseline = 'alphabetic';\n                self.eventParent = self.canvas;\n            }\n            self.parentNodeStyle = self.canvas.style;\n            self.controlInput.setAttribute('readonly', true);\n            self.controlInput.addEventListener('blur', function (e) {\n                if (e.target !== self.canvas) {\n                    self.hasFocus = false;\n                }\n            });\n            self.eventParent.addEventListener('scroll', self.resize, false);\n            self.eventParent.addEventListener('touchstart', self.touchstart, false);\n            self.eventParent.addEventListener('mouseup', self.mouseup, false);\n            self.eventParent.addEventListener('mousedown', self.mousedown, false);\n            self.eventParent.addEventListener('dblclick', self.dblclick, false);\n            self.eventParent.addEventListener('click', self.click, false);\n            self.eventParent.addEventListener('mousemove', self.mousemove);\n            self[self.isChildGrid ? 'parentGrid' : 'eventParent'].addEventListener('wheel', self.scrollWheel, false);\n            self.canvas.addEventListener('contextmenu', self.contextmenuEvent, false);\n            self.controlInput.addEventListener('copy', self.copy);\n            self.controlInput.addEventListener('cut', self.cut);\n            self.controlInput.addEventListener('paste', self.paste);\n            self.controlInput.addEventListener('keypress', self.keypress, false);\n            self.controlInput.addEventListener('keyup', self.keyup, false);\n            self.controlInput.addEventListener('keydown', self.keydown, false);\n            window.addEventListener('resize', self.resize);\n        };\n    };\n});\n","/*jslint browser: true, unparam: true, todo: true*/\n/*globals XMLSerializer: false, define: true, Blob: false, MutationObserver: false, requestAnimationFrame: false, performance: false, btoa: false*/\ndefine([], function () {\n    'use strict';\n    return function (self) {\n        var perfCounters = [],\n            cachedImagesDrawn = false,\n            drawCount = 0,\n            perfWindowSize = 300,\n            entityCount = [],\n            hiddenFrozenColumnCount = 0,\n            scrollDebugCounters = [],\n            touchPPSCounters = [];\n        self.htmlImageCache = {};\n        // more heavyweight version than fillArray defined in intf.js\n        function fillArray(low, high, step, def) {\n            step = step || 1;\n            var i = [], x;\n            for (x = low; x <= high; x += step) {\n                i[x] = def === undefined ? x : (typeof def === 'function' ? def(x) : def);\n            }\n            return i;\n        }\n        function drawPerfLine(w, h, x, y, perfArr, arrIndex, max, color, useAbs) {\n            var i = w / perfArr.length,\n                r = h / max;\n            x += self.canvasOffsetLeft;\n            y += self.canvasOffsetTop;\n            self.ctx.beginPath();\n            self.ctx.moveTo(x, y + h);\n            perfArr.forEach(function (n) {\n                var val = (arrIndex === undefined ? n : n[arrIndex]),\n                    cx,\n                    cy;\n                if (useAbs) {\n                    val = Math.abs(val);\n                }\n                cx = x + i;\n                cy = y + h - (val * r);\n                self.ctx.lineTo(cx, cy);\n                x += i;\n            });\n            self.ctx.moveTo(x + w, y + h);\n            self.ctx.strokeStyle = color;\n            self.ctx.stroke();\n        }\n        function drawOnAllImagesLoaded() {\n            var loaded = true;\n            Object.keys(self.htmlImageCache).forEach(function (html) {\n                if (!self.htmlImageCache[html].img.complete) {\n                    loaded = false;\n                }\n            });\n            if (loaded && !cachedImagesDrawn) {\n                cachedImagesDrawn = true;\n                self.draw();\n            }\n        }\n        function drawHtml(cell) {\n            var img,\n                v = cell.innerHTML || cell.formattedValue,\n                cacheKey = v.toString() + cell.rowIndex.toString() + cell.columnIndex.toString(), \n                x = Math.round(cell.x + self.canvasOffsetLeft),\n                y = Math.round(cell.y + self.canvasOffsetTop);\n            if (self.htmlImageCache[cacheKey]) {\n                img = self.htmlImageCache[cacheKey].img;\n                if (self.htmlImageCache[cacheKey].height !== cell.height || self.htmlImageCache[cacheKey].width !== cell.width) {\n                    // height and width of the cell has changed, invalidate cache\n                    self.htmlImageCache[cacheKey] = undefined;\n                } else {\n                    if (!img.complete) {\n                        return;\n                    }\n                    return self.ctx.drawImage(img, x, y);\n                }\n            } else {\n                cachedImagesDrawn = false;\n            }\n            img = new Image(cell.width, cell.height);\n            self.htmlImageCache[cacheKey] = { img, width: cell.width, height: cell.height };\n            img.onload = function () {\n                self.ctx.drawImage(img, x, y);\n                drawOnAllImagesLoaded();\n            };\n            img.src = 'data:image/svg+xml;base64,' + btoa(\n                '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + cell.width + '\" height=\"' + cell.height + '\">\\n' +\n                    '<foreignObject class=\"node\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">\\n' +\n                    '<body xmlns=\"http://www.w3.org/1999/xhtml\" style=\"margin:0;padding:0;\">\\n' +\n                    v + '\\n' +\n                    '</body>' +\n                    '</foreignObject>\\n' +\n                    '</svg>\\n'\n            );\n        }\n        function drawOrderByArrow(x, y) {\n            var mt = self.style.columnHeaderOrderByArrowMarginTop * self.scale,\n                ml = self.style.columnHeaderOrderByArrowMarginLeft * self.scale,\n                mr = self.style.columnHeaderOrderByArrowMarginRight * self.scale,\n                aw = self.style.columnHeaderOrderByArrowWidth * self.scale,\n                ah = self.style.columnHeaderOrderByArrowHeight * self.scale;\n            x += self.canvasOffsetLeft;\n            y += self.canvasOffsetTop;\n            self.ctx.fillStyle = self.style.columnHeaderOrderByArrowColor;\n            self.ctx.strokeStyle = self.style.columnHeaderOrderByArrowBorderColor;\n            self.ctx.beginPath();\n            x = x + ml;\n            y = y + mt;\n            if (self.orderDirection === 'asc') {\n                self.ctx.moveTo(x, y);\n                self.ctx.lineTo(x + aw, y);\n                self.ctx.lineTo(x + (aw * 0.5), y + ah);\n                self.ctx.moveTo(x, y);\n            } else {\n                self.ctx.lineTo(x, y + ah);\n                self.ctx.lineTo(x + aw, y + ah);\n                self.ctx.lineTo(x + (aw * 0.5), y);\n                self.ctx.lineTo(x, y + ah);\n            }\n            self.ctx.stroke();\n            self.ctx.fill();\n            return ml + aw + mr;\n        }\n        function drawTreeArrow(cell, x, y) {\n            var mt = self.style.treeArrowMarginTop * self.scale,\n                mr = self.style.treeArrowMarginRight * self.scale,\n                ml = self.style.treeArrowMarginLeft * self.scale,\n                aw = self.style.treeArrowWidth * self.scale,\n                ah = self.style.treeArrowHeight * self.scale;\n            x += self.canvasOffsetLeft;\n            y += self.canvasOffsetTop;\n            self.ctx.fillStyle = self.style.treeArrowColor;\n            self.ctx.strokeStyle = self.style.treeArrowBorderColor;\n            self.ctx.beginPath();\n            x = x + ml;\n            y = y + mt;\n            if (self.openChildren[cell.rowIndex]) {\n                self.ctx.moveTo(x, y);\n                self.ctx.lineTo(x + aw, y);\n                self.ctx.lineTo(x + (aw * 0.5), y + ah);\n                self.ctx.moveTo(x, y);\n            } else {\n                self.ctx.lineTo(x, y);\n                self.ctx.lineTo(x + ah, y + (aw * 0.5));\n                self.ctx.lineTo(x, y + aw);\n                self.ctx.lineTo(x, y);\n            }\n            self.ctx.stroke();\n            self.ctx.fill();\n            return ml + aw + mr;\n        }\n        function radiusRect(x, y, w, h, radius) {\n            x += self.canvasOffsetLeft;\n            y += self.canvasOffsetTop;\n            var r = x + w, b = y + h;\n            self.ctx.beginPath();\n            self.ctx.moveTo(x + radius, y);\n            self.ctx.lineTo(r - radius, y);\n            self.ctx.quadraticCurveTo(r, y, r, y + radius);\n            self.ctx.lineTo(r, y + h - radius);\n            self.ctx.quadraticCurveTo(r, b, r - radius, b);\n            self.ctx.lineTo(x + radius, b);\n            self.ctx.quadraticCurveTo(x, b, x, b - radius);\n            self.ctx.lineTo(x, y + radius);\n            self.ctx.quadraticCurveTo(x, y, x + radius, y);\n        }\n        function fillRect(x, y, w, h) {\n            x += self.canvasOffsetLeft;\n            y += self.canvasOffsetTop;\n            self.ctx.fillRect(x, y, w, h);\n        }\n        function strokeRect(x, y, w, h) {\n            x += self.canvasOffsetLeft;\n            y += self.canvasOffsetTop;\n            self.ctx.strokeRect(x, y, w, h);\n        }\n        function fillText(text, x, y) {\n            x += self.canvasOffsetLeft;\n            y += self.canvasOffsetTop;\n            self.ctx.fillText(text, x, y);\n        }\n        function fillCircle(x, y, r) {\n            x += self.canvasOffsetLeft;\n            y += self.canvasOffsetTop;\n            self.ctx.beginPath();\n            self.ctx.arc(x, y, r, 0, 2 * Math.PI);\n            self.ctx.fill();\n        }\n        function strokeCircle(x, y, r) {\n            x += self.canvasOffsetLeft;\n            y += self.canvasOffsetTop;\n            self.ctx.beginPath();\n            self.ctx.arc(x, y, r, 0, 2 * Math.PI);\n            self.ctx.stroke();\n        }\n        function clipFrozenArea(mode) {\n            // 0 both, 1 rows, 2 cols\n            // self.lastFrozenColumnPixel;\n            // self.lastFrozenRowPixel;\n            self.ctx.beginPath();\n            if (mode === 0) {\n                self.ctx.moveTo(self.lastFrozenColumnPixel, self.lastFrozenRowPixel);\n                self.ctx.lineTo(self.lastFrozenColumnPixel, self.height);\n                self.ctx.lineTo(self.width, self.height);\n                self.ctx.lineTo(self.width, self.lastFrozenRowPixel);\n            }\n            if (mode === 1) {\n                self.ctx.moveTo(0, self.lastFrozenRowPixel);\n                self.ctx.lineTo(0, self.height);\n                self.ctx.lineTo(self.width, self.height);\n                self.ctx.lineTo(self.width, self.lastFrozenRowPixel);\n            }\n            if (mode === 2) {\n                self.ctx.moveTo(self.lastFrozenColumnPixel, 0);\n                self.ctx.lineTo(self.width, 0);\n                self.ctx.lineTo(self.width, self.height);\n                self.ctx.lineTo(self.lastFrozenColumnPixel, self.height);\n            }\n            self.ctx.clip();\n        }\n        function fillHandle(x, y, r) {\n            if (self.style.selectionHandleType === 'circle') {\n                return fillCircle(x, y, r * 0.5);\n            }\n            fillRect(x - r * 0.5, y - r * 0.5, r, r);\n        }\n        function strokeHandle(x, y, r) {\n            if (self.style.selectionHandleType === 'circle') {\n                return strokeCircle(x, y, r * 0.5);\n            }\n            strokeRect(x - r * 0.5, y - r * 0.5, r, r);\n        }\n        function addselectionHandle(c, pos) {\n            var hw = self.style.selectionHandleSize,\n                p = {\n                    tr: function () {\n                        fillHandle(c.x + c.width, c.y, hw);\n                        strokeHandle(c.x + c.width, c.y, hw);\n                    },\n                    br: function () {\n                        fillHandle(c.x + c.width, c.y + c.height, hw);\n                        strokeHandle(c.x + c.width, c.y + c.height, hw);\n                    },\n                    tl: function () {\n                        fillHandle(c.x, c.y, hw);\n                        strokeHandle(c.x, c.y, hw);\n                    },\n                    bl: function () {\n                        fillHandle(c.x, c.y + c.height, hw);\n                        strokeHandle(c.x, c.y + c.height, hw);\n                    }\n                };\n            p[pos]();\n        }\n        function addBorderLine(c, pos) {\n            self.ctx.beginPath();\n            var p = {\n                t: function () {\n                    self.ctx.moveTo(c.x + self.canvasOffsetLeft, c.y + self.canvasOffsetTop);\n                    self.ctx.lineTo(c.x + self.canvasOffsetLeft + c.width, c.y + self.canvasOffsetTop);\n                },\n                r: function () {\n                    self.ctx.moveTo(c.x + self.canvasOffsetLeft + c.width, c.y + self.canvasOffsetTop);\n                    self.ctx.lineTo(c.x + self.canvasOffsetLeft + c.width, c.y + self.canvasOffsetTop + c.height);\n                },\n                b: function () {\n                    self.ctx.moveTo(c.x + self.canvasOffsetLeft, c.y + self.canvasOffsetTop + c.height);\n                    self.ctx.lineTo(c.x + self.canvasOffsetLeft + c.width, c.y + self.canvasOffsetTop + c.height);\n                },\n                l: function () {\n                    self.ctx.moveTo(c.x + self.canvasOffsetLeft, c.y + self.canvasOffsetTop);\n                    self.ctx.lineTo(c.x + self.canvasOffsetLeft, c.y + self.canvasOffsetTop + c.height);\n                }\n            };\n            p[pos]();\n            self.ctx.stroke();\n        }\n        function addEllipsis(text, width) {\n            var c, w = 0;\n            if (self.ellipsisCache[text] && self.ellipsisCache[text][width]) {\n                return self.ellipsisCache[text][width];\n            }\n            //TODO Add ellipsis back when there is a fast way to do it\n            w = self.ctx.measureText(text).width;\n            self.ellipsisCache[text] = self.ellipsisCache[text] || {};\n            c = {value: text, width: w};\n            self.ellipsisCache[text][width] = c;\n            return c;\n        }\n        function wrapText(cell, splitChar) {\n            if (!cell.formattedValue) {\n                return { lines: [{width: 0, value: ''}], width: 0, height: cell.calculatedLineHeight };\n            }\n            var max = 0,\n                n = '\\n',\n                x,\n                word,\n                words = cell.formattedValue.split(splitChar),\n                textHeight = cell.calculatedLineHeight,\n                lines = [],\n                out = [],\n                wrap = self.style.cellWhiteSpace !== 'nowrap',\n                autoResize = self.attributes.autoResizeRows && wrap,\n                elWidth,\n                et = self.attributes.ellipsisText,\n                elClipLength,\n                plWidth,\n                clippedVal,\n                ogWordWidth,\n                previousLine,\n                line = {\n                    width: 0,\n                    value: ''\n                },\n                cHeight = wrap ? cell.paddedHeight : cell.calculatedLineHeight;\n            lines.push(line);\n            elWidth = self.ctx.measureText(' ' + et).width;\n            for (x = 0; x < words.length; x += 1) {\n                word = words[x];\n                var measure = self.ctx.measureText(word + splitChar);\n                if (line.width + measure.width + elWidth < cell.paddedWidth) {\n                    line.value += word + splitChar;\n                    line.width += measure.width;\n                    continue;\n                }\n                // if there is a hyphenated word that is too long\n                // split it and add the split set to the array\n                // then back up and re-read new split set\n                // this behavior seems right, it might not be\n                if (/\\w-\\w/.test(word) && cell.paddedWidth < measure.width) {\n                    words.splice(x, 1, word.split('-')[0] + '-', word.split('-')[1]);\n                    x -= 1;\n                    continue;\n                }\n                line = {\n                    width: measure.width,\n                    value: word + splitChar\n                };\n                if (x === 0) {\n                    lines = [];\n                    lines.push(line);\n                }\n                textHeight += cell.calculatedLineHeight;\n                if (textHeight > cHeight && !autoResize) {\n                    if (lines.length === 0) { break; }\n                    elClipLength = 1;\n                    previousLine = lines[lines.length - 1];\n                    if (previousLine.width < cell.paddedWidth && words.length === 1) { break; }\n                    clippedVal = previousLine.value + word;\n                    plWidth = self.ctx.measureText(clippedVal + et).width;\n                    var originText = clippedVal;\n                    if (plWidth > cell.paddedWidth) {\n                        var stepLength = parseInt(clippedVal.length / 2);\n                        var direction = -1;\n                        while (stepLength > 0) {\n                            clippedVal = originText.substr(0, stepLength * direction + clippedVal.length);\n                            plWidth = self.ctx.measureText(clippedVal + et).width;\n                            direction = plWidth > cell.paddedWidth ? -1 : 1;\n                            stepLength = parseInt(stepLength / 2);\n                        }\n                    }\n                    clippedVal = clippedVal + (originText.length != clippedVal.length ? et : '');\n                    previousLine.value = clippedVal;\n                    previousLine.width = plWidth;\n                    break;\n                }\n                if (x > 0) {\n                    lines.push(line);\n                }\n            }\n            return {\n                lines: lines,\n                width: max,\n                height: cell.calculatedLineHeight * lines.length\n            }\n        }\n        function drawText(cell) {\n            var ll = cell.text.lines.length,\n                h = (cell.fontHeight * cell.lineHeight),\n                x,\n                line,\n                wrap = self.style.cellWhiteSpace !== 'nowrap',\n                textHeight = 0;\n            for (x = 0; x < cell.text.lines.length; x += 1) {\n                line = cell.text.lines[x];\n                var vPos = Math.max((cell.height - (wrap ? cell.text.height : cell.calculatedLineHeight)) * 0.5, 0) + h,\n                    hPos = cell.paddingLeft + cell.treeArrowWidth + cell.orderByArrowWidth;\n                if (cell.horizontalAlignment === 'right') {\n                    hPos = cell.paddingLeft + cell.paddedWidth - line.width;\n                } else if (cell.horizontalAlignment === 'center') {\n                    hPos = cell.paddingLeft + ((cell.paddedWidth + cell.paddingRight) / 2) - (line.width / 2);\n                }\n                if (cell.verticalAlignment === 'top') {\n                    vPos = cell.calculatedLineHeight;\n                } else if (cell.verticalAlignment === 'bottom') {\n                    vPos = cell.height - cell.paddingBottom - cell.text.height;\n                }\n                line.height = h + cell.lineSpacing;\n                line.offsetLeft = hPos;\n                line.offsetTop = vPos;\n                line.x = cell.x + hPos;\n                line.y = cell.y + textHeight + vPos;\n                textHeight += line.height;\n                fillText(line.value, line.x, line.y);\n            }\n            if (self.attributes.debug && cell.active) {\n                requestAnimationFrame(function () {\n                    self.ctx.font = self.style.debugFont;\n                    self.ctx.fillStyle = self.style.debugColor;\n                    fillText(JSON.stringify({\n                        x: cell.x,\n                        y: cell.y,\n                        h: cell.height,\n                        w: cell.width,\n                        pw: cell.paddedWidth,\n                        idx: cell.columnIndex,\n                        idx_ord: cell.sortColumnIndex\n                    }, null, '\\t'),\n                        cell.x + 14, cell.y + 14);\n                    fillText(JSON.stringify(cell.text.lines.map(function (l) { return {w: l.width, v: l.value.length }; }), null, '\\t'),\n                        cell.x + 14, cell.y + 30);\n                });\n            }\n        }\n        function getFrozenColumnsWidth() {\n            var w = 0,\n                s = self.getSchema(),\n                x = 0,\n                n = Math.min(self.frozenColumn, s.length),\n                column;\n            hiddenFrozenColumnCount = 0;\n            while (x < n) {\n                column = s[x];\n                if (column.hidden) {\n                    hiddenFrozenColumnCount += 1;\n                } else {\n                    w += self.getColummnWidth(x);\n                }\n                x += 1;\n            }\n            return w;\n        }\n        /**\n         * Redraws the grid. No matter what the change, this is the only method required to refresh everything.\n         * @memberof canvasDatagrid\n         * @name draw\n         * @method\n         */\n         // r = literal row index\n         // rd = row data array\n         // i = user order index\n         // o = literal data index\n         // y = y drawing cursor\n         // x = x drawing cursor\n         // s = visible schema array\n         // cx = current x drawing cursor sub calculation var\n         // cy = current y drawing cursor sub calculation var\n         // a = static cell (like corner cell)\n         // p = perf counter\n         // l = data length\n         // u = current cell\n         // h = current height\n         // w = current width\n        self.draw = function (internal) {\n            if (self.dispatchEvent('beforedraw', {})) { return; }\n            if (!self.isChildGrid && (!self.height || !self.width)) {\n                return;\n            }\n            if (self.isChildGrid && internal) {\n                requestAnimationFrame(self.parentGrid.draw);\n                return;\n            }\n            if (self.intf.visible === false) {\n                return;\n            }\n            // initial values\n            var checkScrollHeight, rowHeaderCell, p, cx, cy, treeGrid, rowOpen,\n                rowHeight, cornerCell, y, x, c, h, w, s, r, rd, aCell,\n                data = (self.data || []),\n                bc = self.style.gridBorderCollapse === 'collapse',\n                selectionBorders = [],\n                moveBorders = [],\n                selectionHandles = [],\n                rowHeaders = [],\n                l = data.length,\n                u = self.currentCell || {},\n                columnHeaderCellHeight = self.getColumnHeaderCellHeight(),\n                rowHeaderCellWidth = self.getRowHeaderCellWidth(),\n                cellHeight = self.style.cellHeight;\n            drawCount += 1;\n            p = performance.now();\n            self.visibleRowHeights = [];\n            // if data length has changed, there is no way to know\n            if (data.length > self.orders.rows.length) {\n                self.createRowOrders();\n            }\n            function drawScrollBars() {\n                var drawCorner,\n                    en = self.scrollBox.entities,\n                    m = (self.style.scrollBarBoxMargin * 2);\n                self.ctx.strokeStyle = self.style.scrollBarBorderColor;\n                self.ctx.lineWidth = self.style.scrollBarBorderWidth;\n                en.horizontalBox.x = rowHeaderCellWidth + self.style.scrollBarBoxMargin\n                    + ((en.horizontalBar.width - self.scrollBox.scrollBoxWidth)\n                        * (self.scrollBox.scrollLeft / self.scrollBox.scrollWidth));\n                en.verticalBox.y = columnHeaderCellHeight + self.style.scrollBarBoxMargin\n                    + ((en.verticalBar.height - self.scrollBox.scrollBoxHeight)\n                        * (self.scrollBox.scrollTop / self.scrollBox.scrollHeight));\n                if (self.scrollBox.horizontalBarVisible) {\n                    self.ctx.fillStyle = self.style.scrollBarBackgroundColor;\n                    fillRect(en.horizontalBar.x, en.horizontalBar.y, en.horizontalBar.width + m, en.horizontalBar.height);\n                    strokeRect(en.horizontalBar.x, en.horizontalBar.y, en.horizontalBar.width + m, en.horizontalBar.height);\n                    self.ctx.fillStyle = self.style.scrollBarBoxColor;\n                    if (self.scrollBox.horizontalBoxVisible) {\n                        if (/horizontal/.test(u.context)) {\n                            self.ctx.fillStyle = self.style.scrollBarActiveColor;\n                        }\n                        radiusRect(en.horizontalBox.x, en.horizontalBox.y,\n                            en.horizontalBox.width, en.horizontalBox.height, self.style.scrollBarBoxBorderRadius);\n                        self.ctx.stroke();\n                        self.ctx.fill();\n                    }\n                    drawCorner = true;\n                    self.visibleCells.unshift(en.horizontalBar);\n                    self.visibleCells.unshift(en.horizontalBox);\n                }\n                if (self.scrollBox.verticalBarVisible) {\n                    self.ctx.fillStyle = self.style.scrollBarBackgroundColor;\n                    fillRect(en.verticalBar.x, en.verticalBar.y, en.verticalBar.width, en.verticalBar.height + m);\n                    strokeRect(en.verticalBar.x, en.verticalBar.y, en.verticalBar.width, en.verticalBar.height + m);\n                    if (self.scrollBox.verticalBoxVisible) {\n                        self.ctx.fillStyle = self.style.scrollBarBoxColor;\n                        if (/vertical/.test(u.context)) {\n                            self.ctx.fillStyle = self.style.scrollBarActiveColor;\n                        }\n                        radiusRect(en.verticalBox.x, en.verticalBox.y, en.verticalBox.width,\n                            en.verticalBox.height, self.style.scrollBarBoxBorderRadius);\n                        self.ctx.stroke();\n                        self.ctx.fill();\n                    }\n                    drawCorner = true;\n                    self.visibleCells.unshift(en.verticalBar);\n                    self.visibleCells.unshift(en.verticalBox);\n                }\n                if (drawCorner) {\n                    //corner\n                    self.ctx.strokeStyle = self.style.scrollBarCornerBorderColor;\n                    self.ctx.fillStyle = self.style.scrollBarCornerBackgroundColor;\n                    radiusRect(en.corner.x, en.corner.y, en.corner.width, en.corner.height, 0);\n                    self.ctx.stroke();\n                    self.ctx.fill();\n                    self.visibleCells.unshift(en.corner);\n                }\n            }\n            function createHandlesOverlayArray(cell) {\n                if (self.attributes.allowMovingSelection || self.mobile) {\n                    if (cell.selectionBorderTop && cell.selectionBorderRight && self.mobile) {\n                        selectionHandles.push([cell, 'tr']);\n                        cell.selectionHandle = 'tr';\n                    }\n                    if (cell.selectionBorderTop && cell.selectionBorderLeft && self.mobile) {\n                        selectionHandles.push([cell, 'tl']);\n                        cell.selectionHandle = 'tl';\n                    }\n                    if (cell.selectionBorderBottom && cell.selectionBorderLeft && self.mobile) {\n                        selectionHandles.push([cell, 'bl']);\n                        cell.selectionHandle = 'bl';\n                    }\n                    if (cell.selectionBorderBottom && cell.selectionBorderRight\n                            && (self.attributes.selectionHandleBehavior !== 'none' || self.mobile)) {\n                        selectionHandles.push([cell, 'br']);\n                        cell.selectionHandle = 'br';\n                    }\n                }\n            }\n            function createBorderOverlayArray(cell, drawArray, propPrefix, offsetPoint) {\n                offsetPoint = offsetPoint || {x: 0, y: 0};\n                cell.selectionBorder = '';\n                if (!cell.isRowHeader\n                        && self.selections[cell.rowIndex + -offsetPoint.y]\n                        && self.selections[cell.rowIndex + -offsetPoint.y].indexOf(cell.columnIndex + -offsetPoint.x) !== -1) {\n                    if ((!self.selections[cell.rowIndex - 1 + -offsetPoint.y]\n                            || self.selections[cell.rowIndex - 1 + -offsetPoint.y].indexOf(cell.columnIndex + -offsetPoint.x) === -1\n                            || cell.rowIndex === 0)\n                            && !cell.isHeader) {\n                        drawArray.push([cell, 't']);\n                        cell[propPrefix + 'BorderTop'] = true;\n                        cell[propPrefix + 'Border'] += 't';\n                    }\n                    if (!self.selections[cell.rowIndex + 1 + -offsetPoint.y]\n                            || self.selections[cell.rowIndex + 1 + -offsetPoint.y].indexOf(cell.columnIndex + -offsetPoint.x) === -1) {\n                        drawArray.push([cell, 'b']);\n                        cell[propPrefix + 'BorderBottom'] = true;\n                        cell[propPrefix + 'Border'] += 'b';\n                    }\n                    if (!self.selections[cell.rowIndex + -offsetPoint.y] || cell.columnIndex === 0\n                            || self.selections[cell.rowIndex + -offsetPoint.y].indexOf(cell.columnIndex - 1 + -offsetPoint.x) === -1) {\n                        drawArray.push([cell, 'l']);\n                        cell[propPrefix + 'BorderLeft'] = true;\n                        cell[propPrefix + 'Border'] += 'l';\n                    }\n                    if (!self.selections[cell.rowIndex + -offsetPoint.y] || cell.columnIndex === s.length\n                            || self.selections[cell.rowIndex + -offsetPoint.y].indexOf(cell.columnIndex + 1 + -offsetPoint.x) === -1) {\n                        drawArray.push([cell, 'r']);\n                        cell[propPrefix + 'BorderRight'] = true;\n                        cell[propPrefix + 'Border'] += 'r';\n                    }\n                }\n            }\n            function drawCell(d, rowOrderIndex, rowIndex) {\n                return function drawEach(header, headerIndex, columnOrderIndex) {\n                    if (header.hidden) { return 0; }\n                    var cellStyle = header.style || 'cell',\n                        cellGridAttributes,\n                        cell,\n                        isHeader = /HeaderCell/.test(cellStyle),\n                        isCorner = /cornerCell/.test(cellStyle),\n                        isRowHeader = 'rowHeaderCell' === cellStyle,\n                        isColumnHeader = 'columnHeaderCell' === cellStyle,\n                        wrap = self.style.cellWhiteSpace !== 'nowrap',\n                        selected = self.selections[rowOrderIndex] && self.selections[rowOrderIndex].indexOf(columnOrderIndex) !== -1,\n                        hovered = self.hovers.rowIndex === rowOrderIndex && self.hovers.columnIndex === columnOrderIndex,\n                        active = self.activeCell.rowIndex === rowOrderIndex && self.activeCell.columnIndex === columnOrderIndex,\n                        isColumnHeaderCellCap = cellStyle === 'columnHeaderCellCap',\n                        rawValue = d ? d[header.name] : undefined,\n                        isGrid = header.type === 'canvas-datagrid',\n                        activeHeader = (self.orders.rows[self.activeCell.rowIndex] === rowOrderIndex\n                                || self.orders.columns[self.activeCell.columnIndex] === headerIndex)\n                            && (columnOrderIndex === -1 || rowOrderIndex === -1)\n                            ? (isRowHeader ? 'activeRowHeaderCell' : 'activeColumnHeaderCell') : false,\n                        val,\n                        f = self.formatters[header.type || 'string'],\n                        orderByArrowSize = 0,\n                        treeArrowSize = 0,\n                        cellWidth = self.sizes.columns[headerIndex] || header.width,\n                        ev = {\n                            value: rawValue,\n                            row: d,\n                            header: header\n                        };\n                    if (isColumnHeaderCellCap) {\n                        cellWidth = w - x;\n                    }\n                    // if no data or schema are defined, a width is provided to the stub column\n                    if (cellWidth === undefined) {\n                        cellWidth = self.style.cellWidth;\n                    }\n                    cellWidth = cellWidth * self.scale;\n                    if (x + cellWidth + self.style.cellBorderWidth < 0) {\n                        x += cellWidth + self.style.cellBorderWidth;\n                    }\n                    if (active && cellStyle !== 'cornerCell') {\n                        cellStyle = 'activeCell';\n                    }\n                    if (self.visibleRows.indexOf(rowIndex) === -1 && !isHeader) {\n                        self.visibleRows.push(rowIndex);\n                    }\n                    val = self.dispatchEvent('formatcellvalue', ev);\n                    cx = x;\n                    cy = y;\n                    if (cellStyle === 'cornerCell') {\n                        cx = 0;\n                        cy = 0;\n                    } else if (isRowHeader) {\n                        cx = 0;\n                    } else if (isHeader) {\n                        cy = 0;\n                    }\n                    cell = {\n                        type: isGrid ? 'canvas-datagrid-cell' : header.type,\n                        style: cellStyle,\n                        nodeType: 'canvas-datagrid-cell',\n                        x: cx,\n                        y: cy,\n                        fontHeight: (self.style[cellStyle + 'FontHeight'] || 0) * self.scale,\n                        horizontalAlignment: self.style[cellStyle + 'HorizontalAlignment'],\n                        verticalAlignment: self.style[cellStyle + 'VerticalAlignment'],\n                        paddingLeft: (self.style[cellStyle + 'PaddingLeft'] || 0) * self.scale,\n                        paddingTop: (self.style[cellStyle + 'PaddingTop'] || 0) * self.scale,\n                        paddingRight: (self.style[cellStyle + 'PaddingRight'] || 0) * self.scale,\n                        paddingBottom: (self.style[cellStyle + 'PaddingBottom'] || 0) * self.scale,\n                        whiteSpace: self.style.cellWhiteSpace,\n                        lineHeight: self.style.cellLineHeight,\n                        lineSpacing: self.style.cellLineSpacing,\n                        offsetTop: self.canvasOffsetTop + cy,\n                        offsetLeft: self.canvasOffsetLeft + cx,\n                        scrollTop: self.scrollBox.scrollTop,\n                        scrollLeft: self.scrollBox.scrollLeft,\n                        active: active || activeHeader,\n                        hovered: hovered,\n                        selected: selected,\n                        width: cellWidth,\n                        height: cellHeight,\n                        offsetWidth: cellWidth,\n                        offsetHeight: cellHeight,\n                        parentNode: self.intf.parentNode,\n                        offsetParent: self.intf.parentNode,\n                        data: d,\n                        isCorner: isCorner,\n                        isHeader: isHeader,\n                        isColumnHeader: isColumnHeader,\n                        isColumnHeaderCellCap: isColumnHeaderCellCap,\n                        isRowHeader: isRowHeader,\n                        rowOpen: rowOpen,\n                        header: header,\n                        columnIndex: columnOrderIndex,\n                        rowIndex: rowOrderIndex,\n                        sortColumnIndex: headerIndex,\n                        sortRowIndex: rowIndex,\n                        isGrid: isGrid,\n                        isNormal: !isGrid && !isCorner && !isHeader,\n                        gridId: (self.attributes.name || '') + rowIndex + ':' + headerIndex,\n                        parentGrid: self.intf,\n                        innerHTML: '',\n                        activeHeader: activeHeader,\n                        value: isHeader && !isRowHeader ? (header.title || header.name) : rawValue\n                    };\n                    cell.calculatedLineHeight = (cell.fontHeight * cell.lineHeight) + cell.lineSpacing;\n                    cell.paddedWidth = cell.width - cell.paddingRight - cell.paddingLeft;\n                    cell.paddedHeight = cell.height - cell.paddingTop - cell.paddingBottom;\n                    ev.cell = cell;\n                    cell.userHeight = cell.isHeader ? self.sizes.rows[-1] : rowHeight;\n                    cell.userWidth = cell.isHeader ? self.sizes.columns.cornerCell : self.sizes.columns[headerIndex];\n                    self.visibleCells.unshift(cell);\n                    if (self.dispatchEvent('beforerendercell', ev)) { return; }\n                    self.ctx.fillStyle = self.style[cellStyle + 'BackgroundColor'];\n                    self.ctx.strokeStyle = self.style[cellStyle + 'BorderColor'];\n                    self.ctx.lineWidth = self.style[cellStyle + 'BorderWidth'];\n                    if (hovered) {\n                        self.ctx.fillStyle = self.style[cellStyle + 'HoverBackgroundColor'];\n                        self.ctx.strokeStyle = self.style[cellStyle + 'HoverBorderColor'];\n                    }\n                    if (selected) {\n                        self.ctx.fillStyle = self.style[cellStyle + 'SelectedBackgroundColor'];\n                        self.ctx.strokeStyle = self.style[cellStyle + 'SelectedBorderColor'];\n                    }\n                    if (activeHeader) {\n                        self.ctx.fillStyle = self.style[activeHeader + 'BackgroundColor'];\n                    }\n                    self.dispatchEvent('rendercell', ev);\n                    if (cell.isGrid) {\n                        if (cell.height !== rowHeight) {\n                            cell.height = rowHeight || self.style.cellHeightWithChildGrid;\n                            checkScrollHeight = true;\n                        }\n                        cell.width = self.sizes.columns[headerIndex] || self.style.cellWidthWithChildGrid;\n                    }\n                    if (rowOpen && !cell.isRowHeader) {\n                        cell.height = self.sizes.rows[rowIndex] || self.style.cellHeight;\n                    }\n                    if (!cell.isGrid) {\n                        fillRect(cx, cy, cell.width, cell.height);\n                        strokeRect(cx, cy, cell.width, cell.height);\n                    }\n                    self.ctx.save();\n                    radiusRect(cell.x, cell.y, cell.width, cell.height, 0);\n                    self.ctx.clip();\n                    self.dispatchEvent('afterrendercell', ev);\n                    if (cell.height !== cellHeight && !(rowOpen && !cell.isRowHeader)) {\n                        self.sizes.rows[isHeader ? -1 : rowIndex] = cell.height;\n                        checkScrollHeight = true;\n                    }\n                    if (cell.width !== cellWidth) {\n                        self.sizes.columns[headerIndex] = cell.width;\n                        checkScrollHeight = true;\n                    }\n                    if (isRowHeader && self.attributes.tree) {\n                        if (!self.dispatchEvent('rendertreearrow', ev)) {\n                            treeArrowSize = drawTreeArrow(cell, self.style[cellStyle + 'PaddingLeft'], cy, 0);\n                        }\n                    }\n                    if ((self.attributes.showRowNumbers && isRowHeader)\n                            || !isRowHeader) {\n                        if (cell.isGrid && !self.dispatchEvent('beforerendercellgrid', ev)) {\n                            if (!self.childGrids[cell.gridId]) {\n                                // HACK: this only allows setting of the child grids styles if data is set _after_\n                                // this is less than desirable.  An interface needs to be made to effect the\n                                // style of all cell grids.  One for individual grids already exists.\n                                cellGridAttributes = self.cellGridAttributes;\n                                cellGridAttributes.name = self.attributes.saveAppearance ? cell.gridId : undefined;\n                                cellGridAttributes.component = false;\n                                cellGridAttributes.parentNode = cell;\n                                cellGridAttributes.data = rawValue;\n                                ev.cellGridAttributes = cellGridAttributes;\n                                if (self.dispatchEvent('beforecreatecellgrid', ev)) { return; }\n                                self.childGrids[cell.gridId] = self.createGrid(cellGridAttributes);\n                                self.sizes.rows[rowIndex]\n                                    = self.sizes.rows[rowIndex] || self.style.cellGridHeight;\n                                checkScrollHeight = true;\n                            }\n                            cell.grid = self.childGrids[cell.gridId];\n                            cell.grid.parentNode = cell;\n                            cell.grid.visible = true;\n                            cell.grid.draw();\n                            self.dispatchEvent('rendercellgrid', ev);\n                        } else if (!cell.isGrid) {\n                            if (self.childGrids[cell.gridId]) {\n                                self.childGrids[cell.gridId].parentNode.offsetHeight = 0;\n                            }\n                            if (isHeader && self.orderBy === header.name) {\n                                if (!self.dispatchEvent('renderorderbyarrow', ev)) {\n                                    orderByArrowSize = drawOrderByArrow(cx + self.style[cellStyle + 'PaddingLeft'], 0);\n                                }\n                            }\n                            self.ctx.fillStyle = self.style[cellStyle + 'Color'];\n                            if (hovered) {\n                                self.ctx.fillStyle = self.style[cellStyle + 'HoverColor'];\n                            }\n                            if (selected) {\n                                self.ctx.fillStyle = self.style[cellStyle + 'SelectedColor'];\n                            }\n                            if (activeHeader) {\n                                self.ctx.fillStyle = self.style[activeHeader + 'Color'];\n                            }\n                            cell.treeArrowWidth = treeArrowSize;\n                            cell.orderByArrowWidth = orderByArrowSize;\n                            // create text ref to see if height needs to expand\n                            val = val !== undefined ? val : f\n                                ? f(ev) : '';\n                            if (val === undefined && !f) {\n                                val = '';\n                                console.warn('canvas-datagrid: Unknown format '\n                                    + header.type + ' add a cellFormater');\n                            }\n                            cell.formattedValue = ((val !== undefined && val !== null) ? val : '').toString();\n                            if (self.columnFilters && self.columnFilters[val] !== undefined && isHeader) {\n                                cell.formattedValue = self.attributes.filterTextPrefix + val;\n                            }\n                            self.ctx.font = (self.style[cellStyle + 'FontHeight'] * self.scale) + 'px ' + self.style[cellStyle + 'FontName'];\n                            if (!self.dispatchEvent('formattext', ev)) {\n                                cell.text = wrapText(cell, ' ');\n                            }\n                            if (!self.dispatchEvent('rendertext', ev)) {\n                                if (cell.innerHTML || header.type === 'html') {\n                                    drawHtml(cell);\n                                } else {\n                                    drawText(cell);\n                                }\n\n                                if (wrap && cell.text && cell.text.height > rowHeight) {\n                                    self.sizes.rows[isHeader ? -1 : rowIndex] = cell.text.height;\n                                }\n                            }\n                        }\n                    }\n                    if (active) {\n                        aCell = cell;\n                    }\n                    createBorderOverlayArray(cell, selectionBorders, 'selection');\n                    // createBorderOverlayArray calculates data for createHandlesOverlayArray so it must go 2nd\n                    createHandlesOverlayArray(cell);\n                    if (self.movingSelection) {\n                        createBorderOverlayArray(cell, moveBorders, 'move', self.moveOffset);\n                    }\n                    self.ctx.restore();\n                    x += cell.width + (bc ? 0 : self.style.cellBorderWidth);\n                    return cell.width;\n                };\n            }\n            function drawRowHeader(rowData, index, rowOrderIndex) {\n                var a, i;\n                if (self.attributes.showRowHeaders) {\n                    x = 0;\n                    i = index + 1;\n                    rowHeaderCell = {'rowHeaderCell': i };\n                    a = {\n                        name: 'rowHeaderCell',\n                        width: self.sizes.columns[-1] || self.style.rowHeaderCellWidth,\n                        style: 'rowHeaderCell',\n                        type: 'string',\n                        data: i,\n                        index: -1\n                    };\n                    rowOpen = self.openChildren[index];\n                    drawCell(rowHeaderCell, index, rowOrderIndex)(a, -1, -1);\n                }\n            }\n            function drawHeaders() {\n                var d, g = s.length, i, o, columnHeaderCell, header, nonFrozenHeaderWidth;\n                function drawHeaderColumnRange(start, end) {\n                    end = Math.min(end, g);\n                    for (o = start; o < end; o += 1) {\n                        i = self.orders.columns[o];\n                        header = s[i];\n                        if (!header.hidden) {\n                            d = {\n                                title: header.title,\n                                name: header.name,\n                                width: header.width || self.style.cellWidth,\n                                style: 'columnHeaderCell',\n                                type: 'string',\n                                index: o,\n                                order: i\n                            };\n                            columnHeaderCell = {'columnHeaderCell': header.title || header.name};\n                            x += drawCell(columnHeaderCell, -1, -1)(d, i, o);\n                            if (x > self.width + self.scrollBox.scrollLeft) {\n                                break;\n                            }\n                        }\n                    }\n                }\n                rowHeaders.forEach(function (rArgs, rhIndex) {\n                    y = rArgs[3];\n                    cellHeight = rArgs[4];\n                    if (rhIndex === self.frozenRow) {\n                        self.ctx.save();\n                        radiusRect(0, self.lastFrozenRowPixel, self.width, self.height - self.lastFrozenRowPixel, 0);\n                        self.ctx.clip();\n                    }\n                    drawRowHeader(rArgs[0], rArgs[1], rArgs[2]);\n                });\n                self.ctx.restore();\n                if (self.attributes.showColumnHeaders) {\n                    x = -self.scrollBox.scrollLeft + self.scrollPixelLeft + self.style.columnHeaderCellBorderWidth;\n                    if (self.attributes.showRowHeaders) {\n                        x += rowHeaderCellWidth;\n                    }\n                    y = 0;\n                    // cell height might have changed during drawing\n                    cellHeight = self.getColumnHeaderCellHeight();\n                    drawHeaderColumnRange(self.scrollIndexLeft, g);\n                    nonFrozenHeaderWidth = x;\n                    x = self.style.columnHeaderCellBorderWidth;\n                    if (self.attributes.showRowHeaders) {\n                        x += rowHeaderCellWidth;\n                    }\n                    drawHeaderColumnRange(0, self.frozenColumn);\n                    // fill in the space right of the headers\n                    x = nonFrozenHeaderWidth;\n                    if (x < w) {\n                        c = {\n                            name: '',\n                            width: self.style.scrollBarWidth,\n                            style: 'columnHeaderCellCap',\n                            isColumnHeaderCell: true,\n                            isColumnHeaderCellCap: true,\n                            type: 'string',\n                            index: s.length\n                        };\n                        drawCell({endCap: ''}, -1, -1)(c, -1, -1);\n                    }\n                    // fill in the space right of the headers\n                    if (self.attributes.showRowHeaders) {\n                        cornerCell = {'cornerCell': '' };\n                        x = 0;\n                        c = {\n                            name: 'cornerCell',\n                            width: self.style.rowHeaderCellWidth,\n                            style: 'cornerCell',\n                            type: 'string',\n                            index: -1\n                        };\n                        drawCell(cornerCell, -1, -1)(c, -1, -1);\n                    }\n                }\n            }\n            function drawRow(r, d) {\n                var i, treeHeight, rowSansTreeHeight, o, g = s.length;\n                if (y - (cellHeight * 2) > h) {\n                    return false;\n                }\n                rd = data[r];\n                rowOpen = self.openChildren[r];\n                rowSansTreeHeight = (self.sizes.rows[r] || self.style.cellHeight) * self.scale;\n                treeHeight = (rowOpen ? self.sizes.trees[r] : 0) * self.scale;\n                rowHeight = (rowSansTreeHeight + treeHeight);\n                if (y < -rowHeight) {\n                    return false;\n                }\n                if (self.attributes.showRowHeaders) {\n                    x += rowHeaderCellWidth;\n                }\n                cellHeight = rowHeight;\n                //draw normal columns\n                for (o = (self.scrollIndexLeft); o < g; o += 1) {\n                    i = self.orders.columns[o];\n                    x += drawCell(rd, r, d)(s[i], i, o);\n                    if (x > self.width) {\n                        self.scrollIndexRight = o;\n                        self.scrollPixelRight = x;\n                        break;\n                    }\n                }\n                //draw frozen columns\n                x = 0;\n                if (self.attributes.showRowHeaders) {\n                    x += rowHeaderCellWidth;\n                }\n                for (o = 0; o < self.frozenColumn; o += 1) {\n                    i = self.orders.columns[o];\n                    x += drawCell(rd, r, d)(s[i], i, o);\n                    if (x > self.width) {\n                        break;\n                    }\n                }\n                self.lastFrozenColumnPixel = x;\n                // cell height might have changed during drawing\n                cellHeight = rowHeight;\n                x = -self.scrollBox.scrollLeft + self.scrollPixelLeft + self.style.cellBorderWidth;\n                // don't draw a tree for the new row\n                treeGrid = self.childGrids[r];\n                if (r !== data.length && rowOpen) {\n                    treeGrid.visible = true;\n                    treeGrid.parentNode = {\n                        offsetTop: y + rowSansTreeHeight + self.canvasOffsetTop,\n                        offsetLeft: rowHeaderCellWidth - 1 + self.canvasOffsetLeft,\n                        offsetHeight: treeHeight,\n                        offsetWidth: self.width - rowHeaderCellWidth - self.style.scrollBarWidth - 1,\n                        offsetParent: self.intf.parentNode,\n                        parentNode: self.intf.parentNode,\n                        style: self.style,\n                        nodeType: 'canvas-datagrid-tree',\n                        scrollTop: self.scrollBox.scrollTop,\n                        scrollLeft: self.scrollBox.scrollLeft,\n                        rowIndex: r\n                    };\n                    self.visibleCells.unshift({\n                        rowIndex: r,\n                        columnIndex: 0,\n                        y: treeGrid.parentNode.offsetTop,\n                        x: treeGrid.parentNode.offsetLeft,\n                        height: treeGrid.height,\n                        width: treeGrid.width,\n                        style: 'tree-grid',\n                        type: treeGrid.parentNode.nodeType\n                    });\n                    treeGrid.draw();\n                } else if (treeGrid) {\n                    treeGrid.parentNode.offsetHeight = 0;\n                    delete self.sizes.trees[r];\n                }\n                rowHeaders.push([rd, r, d, y, rowHeight]);\n                self.visibleRowHeights[r] = rowHeight;\n                y += cellHeight + (bc ? 0 : self.style.cellBorderWidth);\n                return true;\n            }\n            function initDraw() {\n                self.visibleRows = [];\n                s = self.getSchema();\n                self.visibleCells = [];\n                self.canvasOffsetTop = self.isChildGrid ? self.parentNode.offsetTop : .5;\n                self.canvasOffsetLeft = self.isChildGrid ? self.parentNode.offsetLeft : -.5;\n                h = self.height;\n                w = self.width;\n            }\n            function drawBackground() {\n                radiusRect(0, 0, w, h, 0);\n                self.ctx.clip();\n                self.ctx.fillStyle = self.style.gridBackgroundColor;\n                fillRect(0, 0, w, h);\n            }\n            function drawFrozenRows() {\n                var n, ln = Math.min(data.length, self.frozenRow);\n                x = -self.scrollBox.scrollLeft + self.scrollPixelLeft + self.style.cellBorderWidth;\n                y = columnHeaderCellHeight;\n                for (r = 0; r < ln; r += 1) {\n                    n = self.orders.rows[r];\n                    if (!drawRow(n, r)) {\n                        break;\n                    }\n                }\n                if (self.attributes.allowFreezingRows) {\n                    // HACK great, another stupid magic number.\n                    // Background will appear as a 0.5px artifact behind the row freeze bar without this hack\n                    y += self.style.frozenMarkerBorderWidth + self.style.frozenMarkerWidth - 0.4999999999;\n                }\n                self.lastFrozenRowPixel = y;\n            }\n            function drawRows() {\n                self.ctx.save();\n                if (self.frozenRow > 0) {\n                    radiusRect(0, self.lastFrozenRowPixel, self.width, self.height - self.lastFrozenRowPixel, 0);\n                    self.ctx.clip();\n                }\n                var o, n, i, g = s.length;\n                x = -self.scrollBox.scrollLeft + self.scrollPixelLeft + self.style.cellBorderWidth;\n                if (!self.attributes.snapToRow) {\n                    y += -self.scrollBox.scrollTop + self.scrollPixelTop + self.style.cellBorderWidth;\n                }\n                for (r = self.frozenRow + self.scrollIndexTop; r < l; r += 1) {\n                    n = self.orders.rows[r];\n                    self.scrollIndexBottom = r;\n                    self.scrollPixelBottom = y;\n                    if (!drawRow(n, r)) {\n                        break;\n                    }\n                }\n                if (self.attributes.showNewRow) {\n                    if (self.attributes.showRowHeaders) {\n                        x += rowHeaderCellWidth;\n                    }\n                    rowHeight = cellHeight = self.style.cellHeight;\n                    rowOpen = false;\n                    for (o = self.scrollIndexLeft; o < g; o += 1) {\n                        i = self.orders.columns[o];\n                        x += drawCell(self.newRow, data.length, data.length)(s[i], i, o);\n                        if (x > self.width + self.scrollBox.scrollLeft) {\n                            break;\n                        }\n                    }\n                    rowHeaders.push([self.newRow, data.length, data.length, y, rowHeight]);\n                }\n                self.ctx.restore();\n            }\n            function drawMoveMarkers() {\n                if (!self.movingSelection) { return; }\n                self.ctx.lineWidth = self.style.moveOverlayBorderWidth;\n                self.ctx.strokeStyle = self.style.moveOverlayBorderColor;\n                self.ctx.setLineDash(self.style.moveOverlayBorderSegments);\n                moveBorders.forEach(function (c) {\n                    addBorderLine(c[0], c[1]);\n                });\n                self.ctx.setLineDash([]);\n            }\n            function drawReorderMarkers() {\n                if (!self.reorderObject) { return; }\n                var b = {\n                        height: self.reorderObject.height,\n                        width: self.reorderObject.width,\n                        x: self.reorderObject.x + self.reorderObject.dragOffset.x,\n                        y: self.reorderObject.y + self.reorderObject.dragOffset.y\n                    },\n                    m = {\n                        width: w,\n                        height: h,\n                        x: 0,\n                        y: 0\n                    };\n                self.ctx.fillStyle = self.style.reorderMarkerBackgroundColor;\n                self.ctx.lineWidth = self.style.reorderMarkerBorderWidth;\n                self.ctx.strokeStyle = self.style.reorderMarkerBorderColor;\n                if (self.dragMode === 'row-reorder') {\n                    b.width = w;\n                    b.x = 0;\n                    m.width = w;\n                    m.height = self.currentCell.height;\n                    m.y = self.currentCell.y;\n                    fillRect(b.x, b.y, b.width, b.height);\n                    strokeRect(b.x, b.y, b.width, b.height);\n                    self.ctx.lineWidth = self.style.reorderMarkerIndexBorderWidth;\n                    self.ctx.strokeStyle = self.style.reorderMarkerIndexBorderColor;\n                    if (self.currentCell.rowIndex !== self.reorderObject.rowIndex\n                            && self.currentCell.rowIndex > -1\n                            && self.currentCell.rowIndex < l) {\n                        addBorderLine(m, self.reorderTarget.sortRowIndex > self.reorderObject.sortRowIndex ? 'b' : 't');\n                    }\n                } else if (self.dragMode === 'column-reorder' && self.reorderObject) {\n                    b.height = h;\n                    b.y = 0;\n                    m.height = h;\n                    m.width = self.currentCell.width;\n                    m.y = 0;\n                    m.x = self.currentCell.x;\n                    fillRect(b.x, b.y, b.width, b.height);\n                    strokeRect(b.x, b.y, b.width, b.height);\n                    self.ctx.lineWidth = self.style.reorderMarkerIndexBorderWidth;\n                    self.ctx.strokeStyle = self.style.reorderMarkerIndexBorderColor;\n                    if (self.currentCell.sortColumnIndex !== self.reorderObject.sortColumnIndex\n                            && self.currentCell.sortColumnIndex > -1\n                            && self.currentCell.sortColumnIndex < s.length) {\n                        addBorderLine(m, self.reorderTarget.columnIndex > self.reorderObject.columnIndex ? 'r' : 'l');\n                    }\n                }\n            }\n            function drawBorder() {\n                self.ctx.lineWidth = self.style.gridBorderWidth;\n                self.ctx.strokeStyle = self.style.gridBorderColor;\n                strokeRect(0, 0, self.width, self.height);\n            }\n            function drawSelectionBorders() {\n                self.ctx.lineWidth = self.style.selectionOverlayBorderWidth;\n                self.ctx.strokeStyle = self.style.selectionOverlayBorderColor;\n                function dsb(c) {\n                    addBorderLine(c[0], c[1]);\n                }\n                selectionBorders.filter(function (c) {\n                    return c[0].rowIndex < self.frozenRow && c[0].columnIndex < self.frozenColumn;\n                }).forEach(dsb);\n                self.ctx.save();\n                clipFrozenArea(0);\n                selectionBorders.filter(function (c) {\n                    return c[0].rowIndex >= self.frozenRow && c[0].columnIndex >= self.frozenColumn;\n                }).forEach(dsb);\n                self.ctx.restore();\n                self.ctx.save();\n                clipFrozenArea(1);\n                selectionBorders.filter(function (c) {\n                    return c[0].rowIndex >= self.frozenRow && c[0].columnIndex < self.frozenColumn;\n                }).forEach(dsb);\n                self.ctx.restore();\n                self.ctx.save();\n                clipFrozenArea(2);\n                selectionBorders.filter(function (c) {\n                    return c[0].rowIndex < self.frozenRow && c[0].columnIndex >= self.frozenColumn;\n                }).forEach(dsb);\n                self.ctx.restore();\n            }\n            function drawSelectionHandles() {\n                if (self.mobile || self.attributes.allowMovingSelection) {\n                    self.ctx.lineWidth = self.style.selectionHandleBorderWidth;\n                    self.ctx.strokeStyle = self.style.selectionHandleBorderColor;\n                    self.ctx.fillStyle = self.style.selectionHandleColor;\n                    selectionHandles.forEach(function (c) {\n                        addselectionHandle(c[0], c[1]);\n                        var az = self.attributes.touchSelectHandleZone / 2,\n                            ax = c[0].x + (c[1] === 'tl' || c[1] === 'bl' ? 0 : c[0].width) - az,\n                            ay = c[0].y + (c[1] === 'bl' || c[1] === 'br' ? c[0].height : 0) - az;\n                        self.visibleCells.unshift({\n                            x: ax,\n                            y: ay,\n                            height: self.style.selectionHandleSize + az,\n                            width: self.style.selectionHandleSize + az,\n                            style: 'selection-handle-' + c[1]\n                        });\n                    });\n                }\n            }\n            function drawActiveCell() {\n                if (!aCell) { return; }\n                self.ctx.save();\n                var cl = self.activeCell.columnIndex + 1 > self.frozenColumn || self.activeCell.rowIndex + 1 > self.frozenRow,\n                    acx = cl ? self.lastFrozenColumnPixel : 0,\n                    acy = cl ? self.lastFrozenRowPixel : 0,\n                    acw = cl ? self.width - self.lastFrozenColumnPixel : self.width,\n                    ach = cl ? self.height - self.lastFrozenRowPixel : self.height;\n                radiusRect(acx, acy, acw, ach, 0);\n                self.ctx.clip();\n                if (self.attributes.selectionMode === 'row') {\n                    if (self.activeCell && self.activeCell.rowIndex === aCell.rowIndex) {\n                        self.ctx.lineWidth = self.style.activeCellOverlayBorderWidth;\n                        self.ctx.strokeStyle = self.style.activeCellOverlayBorderColor;\n                        strokeRect(1, aCell.y, self.getHeaderWidth() + rowHeaderCellWidth, self.visibleRowHeights[aCell.rowIndex]);\n                    }\n                } else {\n                    self.ctx.lineWidth = self.style.activeCellOverlayBorderWidth;\n                    self.ctx.strokeStyle = self.style.activeCellOverlayBorderColor;\n                    strokeRect(aCell.x, aCell.y, aCell.width, aCell.height);\n                }\n                self.ctx.restore();\n            }\n            function drawFrozenMarkers() {\n                var my = self.lastFrozenRowPixel - self.style.frozenMarkerWidth,\n                    mx = self.lastFrozenColumnPixel - self.style.frozenMarkerBorderWidth,\n                    xHover = self.currentCell && self.currentCell.style === 'frozen-row-marker',\n                    yHover = self.currentCell && self.currentCell.style === 'frozen-column-marker';\n                self.ctx.lineWidth = self.style.frozenMarkerBorderWidth;\n                if (self.attributes.allowFreezingColumns) {\n                    self.ctx.fillStyle = yHover ? self.style.frozenMarkerHoverColor : self.style.frozenMarkerColor;\n                    self.ctx.strokeStyle = yHover ? self.style.frozenMarkerHoverBorderColor : self.style.frozenMarkerBorderColor;\n                    fillRect(mx, 0, self.style.frozenMarkerWidth, self.height);\n                    strokeRect(mx, 0, self.style.frozenMarkerWidth, self.height);\n                    self.visibleCells.unshift({\n                        x: mx,\n                        y: 0,\n                        height: self.height,\n                        width: self.style.frozenMarkerWidth + self.style.frozenMarkerBorderWidth,\n                        style: 'frozen-column-marker'\n                    });\n                }\n                if (self.attributes.allowFreezingRows) {\n                    self.ctx.fillStyle = xHover ? self.style.frozenMarkerHoverColor : self.style.frozenMarkerColor;\n                    self.ctx.strokeStyle = xHover ? self.style.frozenMarkerHoverBorderColor : self.style.frozenMarkerBorderColor;\n                    fillRect(0, my, self.width, self.style.frozenMarkerWidth);\n                    strokeRect(0, my, self.width, self.style.frozenMarkerWidth);\n                    self.visibleCells.unshift({\n                        x: 0,\n                        y: my,\n                        height: self.style.frozenMarkerWidth + self.style.frozenMarkerBorderWidth,\n                        width: self.width,\n                        style: 'frozen-row-marker'\n                    });\n                }\n                if (self.freezeMarkerPosition) {\n                    self.ctx.fillStyle = self.style.frozenMarkerActiveColor;\n                    self.ctx.strokeStyle = self.style.frozenMarkerActiveBorderColor;\n                    if (self.dragMode === 'frozen-column-marker') {\n                        fillRect(self.freezeMarkerPosition.x, 0, self.style.frozenMarkerWidth, self.height);\n                        strokeRect(self.freezeMarkerPosition.x, 0, self.style.frozenMarkerWidth, self.height);\n                    } else {\n                        fillRect(0, self.freezeMarkerPosition.y, self.width, self.style.frozenMarkerWidth);\n                        strokeRect(0, self.freezeMarkerPosition.y, self.width, self.style.frozenMarkerWidth);\n                    }\n                }\n            }\n            function drawPerfLines() {\n                if (!self.attributes.showPerformance) { return; }\n                var pw = 250,\n                    px = self.width - pw - self.style.scrollBarWidth - (self.style.scrollBarBorderWidth * 2),\n                    py = columnHeaderCellHeight,\n                    ph = 100;\n                if (scrollDebugCounters.length === 0) { scrollDebugCounters = fillArray(0, perfWindowSize, 1, function () { return [0, 0]; }); }\n                if (touchPPSCounters.length === 0) { touchPPSCounters = fillArray(0, perfWindowSize, 1, function () { return [0, 0]; }); }\n                if (entityCount.length === 0) { entityCount = fillArray(0, perfWindowSize, 1, 0); }\n                self.ctx.lineWidth = 0.5;\n                function dpl(name, perfArr, arrIndex, max, color, useAbs, rowIndex) {\n                    var v;\n                    drawPerfLine(pw, ph, px, py, perfArr, arrIndex, max, color, useAbs);\n                    self.ctx.fillStyle = color;\n                    fillRect(3 + px, py + 9 + (rowIndex * 11), 8, 8);\n                    self.ctx.fillStyle = self.style.debugPerfChartTextColor;\n                    v = arrIndex !== undefined ? perfArr[0][arrIndex] : perfArr[0];\n                    fillText(name + ' ' + (isNaN(v) ? 0 : v).toFixed(3), 14 + px, py + 16 + (rowIndex * 11));\n                }\n                self.ctx.textAlign = 'left';\n                self.ctx.font = self.style.debugFont;\n                self.ctx.fillStyle = self.style.debugPerfChartBackground;\n                fillRect(px, py, pw, ph);\n                [['Scroll Height', scrollDebugCounters, 0, self.scrollBox.scrollHeight, self.style.debugScrollHeightColor, false],\n                    ['Scroll Width', scrollDebugCounters, 1, self.scrollBox.scrollWidth, self.style.debugScrollWidthColor, false],\n                    ['Performance', perfCounters, undefined, 200, self.style.debugPerformanceColor, false],\n                    ['Entities', entityCount, undefined, 1500, self.style.debugEntitiesColor, false],\n                    ['TouchPPSX', touchPPSCounters, 0, 1000, self.style.debugTouchPPSXColor, true],\n                    ['TouchPPSY', touchPPSCounters, 1, 1000, self.style.debugTouchPPSYColor, true]\n                    ].forEach(function (i, index) {\n                    i.push(index);\n                    dpl.apply(null, i);\n                });\n                self.ctx.fillStyle = self.style.debugPerfChartBackground;\n                entityCount.pop();\n                entityCount.unshift(self.visibleCells.length);\n                scrollDebugCounters.pop();\n                scrollDebugCounters.unshift([self.scrollBox.scrollTop, self.scrollBox.scrollLeft]);\n                touchPPSCounters.pop();\n                touchPPSCounters.unshift([self.yPPS, self.xPPS]);\n            }\n            function drawDebug() {\n                self.ctx.save();\n                var d;\n                if (self.attributes.showPerformance || self.attributes.debug) {\n                    if (perfCounters.length === 0) { perfCounters = fillArray(0, perfWindowSize, 1, 0); }\n                    perfCounters.pop();\n                    perfCounters.unshift(performance.now() - p);\n                }\n                if (!self.attributes.debug) {\n                    self.ctx.restore();\n                    return;\n                }\n                self.ctx.font = self.style.debugFont;\n                d = {};\n                d.perf = (perfCounters.reduce(function (a, b) {\n                    return a + b;\n                }, 0) / Math.min(drawCount, perfCounters.length)).toFixed(1);\n                d.perfDelta = perfCounters[0].toFixed(1);\n                d.frozenColumnsWidth = getFrozenColumnsWidth();\n                d.htmlImages = Object.keys(self.htmlImageCache).length;\n                d.reorderObject = 'x: ' + (self.reorderObject || {columnIndex: 0}).columnIndex + ', y: ' + (self.reorderObject || {rowIndex: 0}).rowIndex;\n                d.reorderTarget = 'x: ' + (self.reorderTarget || {columnIndex: 0}).columnIndex + ', y: ' + (self.reorderTarget || {rowIndex: 0}).rowIndex;\n                d.scale = self.scale;\n                d.startScale = self.startScale;\n                d.scaleDelta = self.scaleDelta;\n                d.zoomDeltaStart = self.zoomDeltaStart;\n                d.touchLength = self.touchLength;\n                d.touches = 'y0: ' + (self.touchPosition || {y: 0}).y + ' y1: ' + (self.touchPosition1 || {y: 0}).y;\n                d.scrollBox = self.scrollBox.toString();\n                d.scrollIndex = 'x: ' + self.scrollIndexLeft + ', y: ' + self.scrollIndexTop;\n                d.scrollPixel = 'x: ' + self.scrollPixelLeft + ', y: ' + self.scrollPixelTop;\n                d.canvasOffset = 'x: ' + self.canvasOffsetLeft + ', y: ' + self.canvasOffsetTop;\n                d.touchDelta = 'x: ' + self.touchDelta.x + ', y: ' + self.touchDelta.y;\n                d.touchAnimateTo = 'x: ' + self.touchAnimateTo.x + ', y: ' + self.touchAnimateTo.y;\n                d.scrollAnimation = 'x: ' + self.scrollAnimation.x + ', y: ' + self.scrollAnimation.y;\n                d.touchPPS = 'x: ' + self.xPPS + ', y: ' + self.yPPS;\n                d.touchPPST = 'x: ' + self.xPPST + ', y: ' + self.yPPST;\n                d.touchDuration = self.touchDuration;\n                d.pointerLockPosition =  self.pointerLockPosition ?\n                        self.pointerLockPosition.x + ', ' + self.pointerLockPosition.y : '';\n                d.size = 'w: ' + self.width + ', h: ' + self.height;\n                d.mouse = 'x: ' + self.mouse.x + ', y: ' + self.mouse.y;\n                d.touch = !self.touchStart\n                    ? '' : 'x: ' + self.touchStart.x + ', y: ' + self.touchStart.y;\n                d.entities = self.visibleCells.length;\n                d.hasFocus = self.hasFocus;\n                d.dragMode = self.dragMode;\n                if (self.currentCell) {\n                    d.columnIndex = self.currentCell.columnIndex;\n                    d.rowIndex = self.currentCell.rowIndex;\n                    d.sortColumnIndex = self.currentCell.sortColumnIndex;\n                    d.sortRowIndex = self.currentCell.sortRowIndex;\n                    d.context = self.currentCell.context;\n                    d.dragContext = self.currentCell.dragContext;\n                    d.style = self.currentCell.style;\n                    d.type = self.currentCell.type;\n                }\n                self.ctx.textAlign = 'right';\n                self.ctx.fillStyle = self.style.debugBackgroundColor;\n                fillRect(0, 0, self.width, self.height);\n                Object.keys(d).forEach(function (key, index) {\n                    var m = key + ': ' + d[key],\n                        lh = 14;\n                    self.ctx.fillStyle = self.style.debugColor;\n                    fillText(m, w - 20, (self.attributes.showPerformance ? 140 : 24) + (index * lh));\n                });\n                self.ctx.restore();\n            }\n            self.ctx.save();\n            initDraw();\n            drawBackground();\n            drawFrozenRows();\n            drawRows();\n            drawActiveCell();\n            drawHeaders();\n            drawFrozenMarkers();\n            drawSelectionHandles();\n            drawReorderMarkers();\n            drawMoveMarkers();\n            drawBorder();\n            drawSelectionBorders();\n            drawScrollBars();\n            if (checkScrollHeight) {\n                self.resize(true);\n            }\n            drawDebug();\n            drawPerfLines();\n            if (self.dispatchEvent('afterdraw', {})) { return; }\n            self.ctx.restore();\n        };\n    };\n});\n","/*jslint browser: true, unparam: true, todo: true, plusplus: true*/\n/*globals define: true, MutationObserver: false, requestAnimationFrame: false, performance: false, btoa: false*/\n\nconst isPrintableKeyEvent = require('is-printable-key-event');\n\ndefine([], function () {\n    'use strict';\n    return function (self) {\n        var wheeling;\n        self.stopPropagation = function (e) { e.stopPropagation(); };\n        /**\n         * Adds an event listener to the given event.\n         * @memberof canvasDatagrid\n         * @name addEventListener\n         * @method\n         * @param {string} ev The name of the event to subscribe to.\n         * @param {function} fn The event procedure to execute when the event is raised.\n         */\n        self.addEventListener = function (ev, fn) {\n            self.events[ev] = self.events[ev] || [];\n            self.events[ev].unshift(fn);\n        };\n        /**\n         * Removes the given listener function from the given event.  Must be an actual reference to the function that was bound.\n         * @memberof canvasDatagrid\n         * @name removeEventListener\n         * @method\n         * @param {string} ev The name of the event to unsubscribe from.\n         * @param {function} fn The event procedure to execute when the event is raised.\n         */\n        self.removeEventListener = function (ev, fn) {\n            (self.events[ev] || []).forEach(function removeEachListener(sfn, idx) {\n                if (fn === sfn) {\n                    self.events[ev].splice(idx, 1);\n                }\n            });\n        };\n        /**\n         * Fires the given event, passing an event object to the event subscribers.\n         * @memberof canvasDatagrid\n         * @name dispatchEvent\n         * @method\n         * @param {number} ev The name of the event to dispatch.\n         * @param {number} e The event object.\n         */\n        self.dispatchEvent = function (ev, e) {\n            e = ev.type ? ev : (e || {});\n            ev = ev.type || ev;\n            var defaultPrevented;\n            function preventDefault() {\n                defaultPrevented = true;\n            }\n            if (!self.events[ev]) { return; }\n            self.events[ev].forEach(function dispatchEachEvent(fn) {\n                e.ctx = self.ctx;\n                e.preventDefault = preventDefault;\n                fn.apply(self.intf, [e]);\n            });\n            return defaultPrevented;\n        };\n        self.getRatio = function () {\n            return Math.min(self.attributes.maxPixelRatio, (window.devicePixelRatio || 1) /\n                (self.ctx.webkitBackingStorePixelRatio ||\n                    self.ctx.mozBackingStorePixelRatio ||\n                    self.ctx.msBackingStorePixelRatio ||\n                    self.ctx.oBackingStorePixelRatio ||\n                    self.ctx.backingStorePixelRatio || 1));\n        };\n        self.resize = function (drawAfterResize) {\n            if (!self.canvas) { return; }\n            var x,\n                v = {\n                    x: 0,\n                    y: 0,\n                    height: 0,\n                    width: 0,\n                    style: 'vertical-scroll-bar'\n                },\n                n = {\n                    x: 0,\n                    y: 0,\n                    height: 0,\n                    width: 0,\n                    style: 'horizontal-scroll-bar'\n                },\n                vb = {\n                    x: 0,\n                    y: 0,\n                    height: 0,\n                    width: 0,\n                    style: 'vertical-scroll-box'\n                },\n                nb = {\n                    x: 0,\n                    y: 0,\n                    height: 0,\n                    width: 0,\n                    style: 'horizontal-scroll-box'\n                },\n                co = {\n                    x: 0,\n                    y: 0,\n                    height: 0,\n                    width: 0,\n                    isCorner: true,\n                    isScrollBoxCorner: true,\n                    style: 'scroll-box-corner'\n                },\n                m = (self.style.scrollBarBoxMargin * 2),\n                b = (self.style.scrollBarBorderWidth * 2),\n                d = self.style.scrollBarBoxMargin * 0.5,\n                sbw = self.style.scrollBarWidth + (self.style.scrollBarBorderWidth * 2),\n                ratio = self.getRatio(),\n                bm = self.style.gridBorderCollapse === 'collapse' ? 1 : 2,\n                cellBorder = self.style.cellBorderWidth * bm,\n                columnHeaderCellBorder = self.style.columnHeaderCellBorderWidth * bm,\n                dataHeight = 0,\n                dataWidth = 0,\n                dims,\n                l = (self.data || []).length,\n                columnHeaderCellHeight = self.getColumnHeaderCellHeight(),\n                rowHeaderCellWidth = self.getRowHeaderCellWidth(),\n                ch = self.style.cellHeight,\n                s = self.getSchema();\n            // sets actual DOM canvas element\n            function checkScrollBoxVisibility() {\n                self.scrollBox.horizontalBarVisible = (self.style.width !== 'auto' && dataWidth > self.scrollBox.width && self.style.overflowX !== 'hidden')\n                    || self.style.overflowX === 'scroll';\n                self.scrollBox.horizontalBoxVisible = dataWidth > self.scrollBox.width;\n                self.scrollBox.verticalBarVisible = (self.style.height !== 'auto' && dataHeight > self.scrollBox.height && self.style.overflowY !== 'hidden')\n                    || self.style.overflowY === 'scroll';\n                self.scrollBox.verticalBoxVisible = dataHeight > self.scrollBox.height;\n            }\n            function setScrollBoxSize() {\n                self.scrollBox.width = self.width - rowHeaderCellWidth;\n                self.scrollBox.height = self.height - columnHeaderCellHeight;\n            }\n            function setCanvasSize() {\n                if (self.isChildGrid) {\n                    return;\n                }\n                dims = {\n                    // HACK +1 ? maybe it's a magic cell border?  Required to line up properly in auto height mode.\n                    height: columnHeaderCellHeight + dataHeight + cellBorder + 1,\n                    width: dataWidth + rowHeaderCellWidth + cellBorder\n                };\n                ['width', 'height'].forEach(function (dim) {\n                    //TODO: support inherit\n                    if (['auto', undefined].indexOf(self.style[dim]) !== -1\n                            && ['auto', undefined].indexOf(self.appliedInlineStyles[dim]) !== -1) {\n                        self.parentNodeStyle[dim] = dims[dim] + 'px';\n                    } else if (['auto', undefined].indexOf(self.style[dim]) == -1\n                            && ['auto', undefined].indexOf(self.appliedInlineStyles[dim]) == -1) {\n                        self.parentNodeStyle[dim] = self.style[dim];\n                        if (self.isComponet) {\n                            self.canvas.style[dim] = self.style[dim];\n                        }\n                    }\n                });\n            }\n            self.scrollCache.x = [];\n            self.scrollCache.y = [];\n            for (x = 0; x < l; x += 1) {\n                self.scrollCache.y[x] = dataHeight;\n                dataHeight += (((self.sizes.rows[x] || ch) + (self.sizes.trees[x] || 0)) * self.scale)\n                    // HACK? if an expanded tree row is frozen it is necessary to add the tree row's height a second time.\n                    + (self.frozenRow > x ? (self.sizes.trees[x] || 0) : 0);\n            }\n            if (l > 1) {\n                self.scrollCache.y[x] = dataHeight;\n            }\n            dataWidth = s.reduce(function reduceSchema(accumulator, column, columnIndex) {\n                // intentional redefintion of column.  This causes scrollCache to be in the correct order\n                column = s[self.orders.columns[columnIndex]];\n                if (column.hidden) {\n                    self.scrollCache.x[columnIndex] = accumulator;\n                    return accumulator;\n                }\n                var va = accumulator + self.getColummnWidth(self.orders.columns[columnIndex]);\n                self.scrollCache.x[columnIndex] = va;\n                return va;\n            }, 0) || 0;\n            if (self.attributes.showNewRow) {\n                dataHeight += ch;\n            }\n            if (self.attributes.snapToRow) {\n              dataHeight += self.style.cellHeight;\n            }\n            setCanvasSize();\n            if (self.isChildGrid) {\n                self.width = self.parentNode.offsetWidth;\n                self.height = self.parentNode.offsetHeight;\n            } else if (self.height !== self.canvas.offsetHeight || self.width !== self.canvas.offsetWidth) {\n                self.height = self.canvas.offsetHeight;\n                self.width = self.canvas.offsetWidth;\n                self.canvasOffsetLeft = self.args.canvasOffsetLeft || 0;\n                self.canvasOffsetTop = self.args.canvasOffsetTop || 0;\n            }\n            /// calculate scroll bar dimensions\n            // non-controversial\n            self.scrollBox.top = columnHeaderCellHeight + columnHeaderCellBorder;\n            self.scrollBox.left = rowHeaderCellWidth;\n            // width and height of scroll box\n            setScrollBoxSize();\n            // is the data larger than the scroll box\n            checkScrollBoxVisibility();\n            // if the scroll box is visible, make room for it by expanding the size of the element\n            // if the other dimension is set to auto\n            if (self.scrollBox.horizontalBarVisible) {\n                if (self.style.height === 'auto' && !self.isChildGrid) {\n                    self.height += sbw;\n                }\n                dataHeight += sbw;\n                setCanvasSize();\n                setScrollBoxSize();\n                checkScrollBoxVisibility();\n            }\n            if (self.scrollBox.verticalBarVisible) {\n                if (self.style.width === 'auto' && !self.isChildGrid) {\n                    self.width += sbw;\n                }\n                dataWidth += sbw;\n                setCanvasSize();\n                setScrollBoxSize();\n                checkScrollBoxVisibility();\n            }\n            // set again after bar visibility checks\n            setScrollBoxSize();\n            self.scrollBox.scrollWidth = dataWidth - self.scrollBox.width;\n            self.scrollBox.scrollHeight = dataHeight - self.scrollBox.height;\n            self.scrollBox.widthBoxRatio = self.scrollBox.width / dataWidth;\n            self.scrollBox.scrollBoxWidth = self.scrollBox.width\n                * self.scrollBox.widthBoxRatio\n                - self.style.scrollBarWidth - b - d;\n            // TODO: This heightBoxRatio number is terribly wrong.\n            // They should be a result of the size of the grid/canvas?\n            // it being off causes the scroll bar to \"slide\" under\n            // the dragged mouse.\n            // https://github.com/TonyGermaneri/canvas-datagrid/issues/97\n            self.scrollBox.heightBoxRatio = (self.scrollBox.height - columnHeaderCellHeight) / dataHeight;\n            self.scrollBox.scrollBoxHeight = self.scrollBox.height\n                * self.scrollBox.heightBoxRatio\n                - self.style.scrollBarWidth - b - d;\n            self.scrollBox.scrollBoxWidth = Math.max(self.scrollBox.scrollBoxWidth, self.style.scrollBarBoxMinSize);\n            self.scrollBox.scrollBoxHeight = Math.max(self.scrollBox.scrollBoxHeight, self.style.scrollBarBoxMinSize);\n            // horizontal\n            n.x += rowHeaderCellWidth;\n            n.y += self.height - self.style.scrollBarWidth - d;\n            n.width = self.width - self.style.scrollBarWidth - rowHeaderCellWidth - d - m;\n            n.height = self.style.scrollBarWidth + self.style.scrollBarBorderWidth + d;\n            // horizontal box\n            nb.y = n.y + self.style.scrollBarBoxMargin;\n            nb.width = self.scrollBox.scrollBoxWidth;\n            nb.height = self.style.scrollBarBoxWidth;\n            // vertical\n            v.x += self.width - self.style.scrollBarWidth - self.style.scrollBarBorderWidth - d;\n            v.y += columnHeaderCellHeight;\n            v.width = self.style.scrollBarWidth + self.style.scrollBarBorderWidth + d;\n            v.height = self.height - columnHeaderCellHeight - self.style.scrollBarWidth - d - m;\n            // vertical box\n            vb.x = v.x + self.style.scrollBarBoxMargin;\n            vb.width = self.style.scrollBarBoxWidth;\n            vb.height = self.scrollBox.scrollBoxHeight;\n            // corner\n            co.x = n.x + n.width + m;\n            co.y = v.y + v.height + m;\n            co.width = self.style.scrollBarWidth + self.style.scrollBarBorderWidth;\n            co.height = self.style.scrollBarWidth + self.style.scrollBarBorderWidth;\n            self.scrollBox.entities = {\n                horizontalBar: n,\n                horizontalBox: nb,\n                verticalBar: v,\n                verticalBox: vb,\n                corner: co\n            };\n            self.scrollBox.bar = {\n                v: v,\n                h: n\n            };\n            self.scrollBox.box = {\n                v: vb,\n                h: nb\n            };\n            /// calculate page and dom elements\n            self.page = Math.max(1, self.visibleRows.length - 3 - self.attributes.pageUpDownOverlap);\n            // set canvas drawing related items\n            if (!self.isChildGrid) {\n                self.canvas.width = self.width * ratio;\n                self.canvas.height = self.height * ratio;\n                self.ctx.scale(ratio, ratio);\n            }\n            // resize any open dom elements (input/textarea)\n            self.resizeEditInput();\n            self.scroll(true);\n            if (drawAfterResize) {\n                self.draw(true);\n            }\n            self.dispatchEvent('resize', {});\n            return true;\n        };\n        self.scroll = function (dontDraw) {\n            var s = self.getSchema(),\n                l = (self.data || []).length,\n                ch = self.style.cellHeight;\n            // go too far in leaps, then get focused\n            self.scrollIndexTop = Math.floor((l * (self.scrollBox.scrollTop / self.scrollBox.scrollHeight)) - 100);\n            self.scrollIndexTop = Math.max(self.scrollIndexTop, 0);\n            self.scrollPixelTop = self.scrollCache.y[self.scrollIndexTop];\n            // sometimes the grid is rendered but the height is zero\n            if (self.scrollBox.scrollHeight === 0) {\n                self.scrollIndexTop = 0;\n            }\n            self.scrollPixelTop = 0;\n            self.scrollIndexLeft = self.frozenColumn;\n            self.scrollPixelLeft = 0;\n            while (self.scrollPixelTop < self.scrollBox.scrollTop && self.scrollIndexTop < self.data.length) {\n                // start on index +1 since index 0 was used in \"go too far\" section above\n                self.scrollIndexTop += 1;\n                self.scrollPixelTop = self.scrollCache.y[self.scrollIndexTop];\n            }\n            while (self.scrollPixelLeft < (self.scrollBox.scrollLeft + 1) && self.scrollIndexLeft < s.length) {\n                self.scrollPixelLeft = self.scrollCache.x[self.scrollIndexLeft];\n                self.scrollIndexLeft += 1;\n            }\n            if (s.length > 0) {\n                self.scrollIndexLeft = Math.max(self.scrollIndexLeft - 1, 0);\n                self.scrollPixelLeft -= self.getColummnWidth(self.orders.columns[self.scrollIndexLeft]);\n            }\n            if ((self.data || []).length > 0) {\n                self.scrollIndexTop = Math.max(self.scrollIndexTop - 1, 0);\n                self.scrollPixelTop = Math.max((self.scrollPixelTop\n                    - (\n                        self.data[self.scrollIndexTop] ? (self.sizes.rows[self.scrollIndexTop] || ch)\n                                + (self.sizes.trees[self.scrollIndexTop] || 0)\n                        : ch\n                    ) * self.scale), 0);\n            }\n            self.ellipsisCache = {};\n            if (!dontDraw) {\n                self.draw(true);\n            }\n            //TODO: figure out why this has to be delayed for child grids\n            //BUG: wheeling event on 3rd level hierarchy fails to move input box\n            requestAnimationFrame(self.resizeEditInput);\n            self.dispatchEvent('scroll', {top: self.scrollBox.scrollTop, left: self.scrollBox.scrollLeft});\n        };\n        self.mousemove = function (e, overridePos) {\n            if (self.contextMenu || self.input) {\n                return;\n            }\n            self.mouse = overridePos || self.getLayerPos(e);\n            var ctrl = ((e.ctrlKey || e.metaKey || self.attributes.persistantSelectionMode) && !self.attributes.singleSelectionMode),\n                i,\n                s = self.getSchema(),\n                dragBounds,\n                sBounds,\n                x = self.mouse.x,\n                y = self.mouse.y,\n                o = self.getCellAt(x, y),\n                delta,\n                ev = {NativeEvent: e, cell: o, x: x, y: y},\n                previousCell = self.currentCell;\n            clearTimeout(self.scrollTimer);\n            if (!self.isInGrid({x: x, y: y})) {\n                self.hasFocus = false;\n            }\n            if (self.dispatchEvent('mousemove', ev)) {\n                return;\n            }\n            if (o && self.currentCell) {\n                self.rowBoundaryCrossed = self.currentCell.rowIndex !== o.rowIndex;\n                self.columnBoundaryCrossed = self.currentCell.columnIndex !== o.columnIndex;\n                self.cellBoundaryCrossed = self.rowBoundaryCrossed || self.columnBoundaryCrossed;\n                ['row', 'column', 'cell'].forEach(function (prefix) {\n                    if (self[prefix + 'BoundaryCrossed']) {\n                        ev.cell = previousCell;\n                        self.dispatchEvent(prefix + 'mouseout', ev);\n                        ev.cell = o;\n                        self.dispatchEvent(prefix + 'mouseover', ev);\n                    }\n                });\n            }\n            self.currentCell = o;\n            if (!self.hasFocus) {\n                return;\n            }\n            self.hovers = {};\n            if (!self.draggingItem\n                    && o\n                    && self.scrollModes.indexOf(o.context) === -1) {\n                self.dragItem = o;\n                self.dragMode = o.dragContext;\n                self.cursor = o.context;\n                if (o.context === 'cell') {\n                    self.cursor = 'default';\n                    self.hovers = { rowIndex: o.rowIndex, columnIndex: o.columnIndex };\n                }\n                if ((self.selecting || self.reorderObject)\n                        && o.context === 'cell') {\n                    delta = {\n                        x: Math.abs(self.dragStart.x - x),\n                        y: Math.abs(self.dragStart.y - y)\n                    };\n                    if (self.dragStartObject.columnIndex !== -1 && e.shiftKey) {\n                        self.dragStartObject = {\n                            rowIndex: self.activeCell.rowIndex,\n                            columnIndex: self.activeCell.columnIndex\n                        };\n                    }\n                    dragBounds = {\n                        top: Math.min(self.dragStartObject.rowIndex, o.rowIndex),\n                        left: Math.min(self.dragStartObject.columnIndex, o.columnIndex),\n                        bottom: Math.max(self.dragStartObject.rowIndex, o.rowIndex),\n                        right: Math.max(self.dragStartObject.columnIndex, o.columnIndex)\n                    };\n                    if (self.dragStartObject.columnIndex === -1) {\n                        sBounds = self.getSelectionBounds();\n                        dragBounds.left = -1;\n                        dragBounds.right = s.length - 1;\n                        dragBounds.top = Math.min(sBounds.top, o.rowIndex);\n                        dragBounds.bottom = Math.max(sBounds.bottom, o.rowIndex);\n                    }\n                    if (self.dragStartObject.rowIndex !== o.rowIndex\n                                || self.dragStartObject.columnIndex !== o.columnIndex) {\n                        self.ignoreNextClick = true;\n                    }\n                    if (self.cellBoundaryCrossed || (delta.x === 0 && delta.y === 0) || (self.attributes.selectionMode === 'row')) {\n                        if (((self.attributes.selectionMode === 'row') || self.dragStartObject.columnIndex === -1)\n                                && self.rowBoundaryCrossed) {\n                            self.selectRow(o.rowIndex, ctrl, null, true);\n                        } else if (self.attributes.selectionMode !== 'row') {\n                            if (!self.dragAddToSelection && o.rowIndex !== undefined) {\n                                if (self.selections[o.rowIndex] && self.selections[o.rowIndex].indexOf(o.columnIndex) !== -1) {\n                                    self.selections[o.rowIndex].splice(self.selections[o.rowIndex].indexOf(o.columnIndex), 1);\n                                }\n                            } else {\n                                self.selections[o.rowIndex] = self.selections[o.rowIndex] || [];\n                                if (self.selections[o.rowIndex].indexOf(o.columnIndex) === -1) {\n                                    self.selections[o.rowIndex].push(o.columnIndex);\n                                }\n                            }\n                        }\n                    }\n                    if ((!self.selectionBounds || (dragBounds.top !== self.selectionBounds.top\n                            || dragBounds.left !== self.selectionBounds.left\n                            || dragBounds.bottom !== self.selectionBounds.bottom\n                            || dragBounds.right !== self.selectionBounds.right)) && !ctrl) {\n                        self.selections = [];\n                        sBounds = dragBounds;\n                        if (self.attributes.selectionMode === 'row') {\n                            for (i = sBounds.top; i <= sBounds.bottom; i += 1) {\n                                self.selectRow(i, true, null, true);\n                            }\n                        } else if (dragBounds.top !== -1) {\n                            self.selectArea(sBounds, true);\n                        }\n                    }\n                    self.autoScrollZone(e, x, y, ctrl);\n                }\n            }\n            self.cellBoundaryCrossed = false;\n            self.rowBoundaryCrossed = false;\n            self.columnBoundaryCrossed = false;\n            self.draw(true);\n        };\n        self.click = function (e, overridePos) {\n            var i,\n                startingBounds = JSON.stringify(self.getSelectionBounds()),\n                ctrl = ((e.ctrlKey || e.metaKey || self.attributes.persistantSelectionMode) && !self.attributes.singleSelectionMode),\n                pos = overridePos || self.getLayerPos(e);\n            self.currentCell = self.getCellAt(pos.x, pos.y);\n            if (self.currentCell.grid !== undefined) {\n                return;\n            }\n            function checkSelectionChange() {\n                var ev, sb = self.getSelectionBounds();\n                if (startingBounds === JSON.stringify(sb)) {\n                    return;\n                }\n                ev = {\n                    selections: self.selections,\n                    selectionBounds: self.getSelectionBounds()\n                };\n                Object.defineProperty(ev, 'selectedData', {\n                    get: function () {\n                        return self.getSelectedData();\n                    }\n                });\n                self.dispatchEvent('selectionchanged', ev);\n            }\n            if (self.input) {\n                self.endEdit();\n            }\n            if (self.ignoreNextClick) {\n                self.ignoreNextClick = false;\n                return;\n            }\n            i = self.currentCell;\n            if (self.dispatchEvent('click', {NativeEvent: e, cell: self.currentCell})) { return; }\n            if (!self.hasFocus) {\n                return;\n            }\n            if (['rowHeaderCell', 'columnHeaderCell'].indexOf(self.currentCell.style) === -1 && !ctrl) {\n                self.setActiveCell(i.columnIndex, i.rowIndex);\n            }\n            if (self.currentCell.context === 'cell') {\n                if (self.currentCell.style === 'cornerCell') {\n                    self.selectAll();\n                    self.draw();\n                    checkSelectionChange();\n                    return;\n                }\n                if (self.currentCell.style === 'columnHeaderCell') {\n                    if (self.attributes.columnHeaderClickBehavior === 'sort') {\n                        if (self.orderBy === i.header.name) {\n                            self.orderDirection = self.orderDirection === 'asc' ? 'desc' : 'asc';\n                        } else {\n                            self.orderDirection = 'asc';\n                        }\n                        self.order(i.header.name, self.orderDirection);\n                        checkSelectionChange();\n                        return;\n                    }\n                    if (self.attributes.columnHeaderClickBehavior === 'select') {\n                        self.selectColumn(i.header.index, ctrl, e.shiftKey);\n                        self.draw();\n                        return;\n                    }\n                }\n                self.selections[i.rowIndex] = self.selections[i.rowIndex] || [];\n                if (((self.attributes.selectionMode === 'row') || self.currentCell.style === 'rowHeaderCell')) {\n                    if (self.currentCell.style === 'rowHeaderCell'\n                            && self.attributes.tree && pos.x > 0\n                            && pos.x - self.currentCell.x < self.style.treeArrowWidth\n                            + self.style.treeArrowMarginLeft\n                            + self.style.treeArrowMarginRight + self.style.treeArrowClickRadius\n                            && pos.y - self.currentCell.y < self.style.treeArrowHeight\n                            + self.style.treeArrowMarginTop + self.style.treeArrowClickRadius\n                            && pos.y > 0) {\n                        self.toggleTree(i.rowIndex);\n                        return;\n                    }\n                }\n                if (e.shiftKey && !ctrl) {\n                    self.selectionBounds = self.getSelectionBounds();\n                    self.selectArea(undefined, false);\n                }\n            }\n            checkSelectionChange();\n            self.draw(true);\n        };\n        self.dragResizeColumn = function (e) {\n            var pos, x, y;\n            pos = self.getLayerPos(e);\n            x = self.resizingStartingWidth + pos.x - self.dragStart.x;\n            y = self.resizingStartingHeight + pos.y - self.dragStart.y;\n            if (x < self.style.minColumnWidth) {\n                x = self.style.minColumnWidth;\n            }\n            if (y < self.style.minRowHeight) {\n                y = self.style.minRowHeight;\n            }\n            if (self.dispatchEvent('resizecolumn', {x: x, y: y, draggingItem: self.draggingItem})) { return false; }\n            if (self.scrollBox.scrollLeft > self.scrollBox.scrollWidth - self.attributes.resizeScrollZone\n                    && self.dragMode === 'ew-resize') {\n                self.resize(true);\n                self.scrollBox.scrollLeft += x;\n            }\n            if (self.dragMode === 'ew-resize') {\n                self.sizes.columns[self.draggingItem.header.style === 'rowHeaderCell'\n                       ? 'cornerCell' : self.draggingItem.sortColumnIndex] = x;\n                if (['rowHeaderCell', 'cornerCell'].indexOf(self.draggingItem.header.style) !== -1) {\n                    self.resize(true);\n                }\n                self.resizeChildGrids();\n                return;\n            }\n            if (self.dragMode === 'ns-resize') {\n                if (self.draggingItem.rowOpen) {\n                    self.sizes.trees[self.draggingItem.rowIndex] = y;\n                } else if (self.attributes.globalRowResize) {\n                    self.style.cellHeight = y;\n                } else {\n                    self.sizes.rows[self.draggingItem.rowIndex] = y;\n                }\n                self.dispatchEvent('resizerow', {row: y});\n                self.resizeChildGrids();\n                return;\n            }\n            self.ellipsisCache = {};\n        };\n        self.stopDragResize = function () {\n            self.resize();\n            document.body.removeEventListener('mousemove', self.dragResizeColumn, false);\n            document.body.removeEventListener('mouseup', self.stopDragResize, false);\n            self.setStorageData();\n            self.draw(true);\n            self.ignoreNextClick = true;\n        };\n        self.scrollGrid = function (e) {\n            var pos = self.getLayerPos(e);\n            if (self.attributes.scrollPointerLock && self.pointerLockPosition\n                    && ['horizontal-scroll-box', 'vertical-scroll-box'].indexOf(self.scrollStartMode) !== -1) {\n                self.pointerLockPosition.x += e.movementX;\n                self.pointerLockPosition.y += e.movementY;\n                self.pointerLockPosition.x = Math.min(self.width - self.style.scrollBarWidth, Math.max(0, self.pointerLockPosition.x));\n                self.pointerLockPosition.y = Math.min(self.height - self.style.scrollBarWidth, Math.max(0, self.pointerLockPosition.y));\n                pos = self.pointerLockPosition;\n            }\n            self.scrollMode = self.getCellAt(pos.x, pos.y).context;\n            if (self.scrollMode === 'horizontal-scroll-box' && self.scrollStartMode !== 'horizontal-scroll-box') {\n                self.scrollStartMode = 'horizontal-scroll-box';\n                self.dragStart = pos;\n                self.scrollStart.left = self.scrollBox.scrollLeft;\n                clearTimeout(self.scrollTimer);\n                return;\n            }\n            if (self.scrollMode === 'vertical-scroll-box' && self.scrollStartMode !== 'vertical-scroll-box') {\n                self.scrollStartMode = 'vertical-scroll-box';\n                self.dragStart = pos;\n                self.scrollStart.top = self.scrollBox.scrollTop;\n                clearTimeout(self.scrollTimer);\n                return;\n            }\n            if (self.scrollStartMode === 'vertical-scroll-box'\n                    && self.scrollMode !== 'vertical-scroll-box') {\n                self.scrollMode = 'vertical-scroll-box';\n            }\n            if (self.scrollStartMode === 'horizontal-scroll-box'\n                    && self.scrollMode !== 'horizontal-scroll-box') {\n                self.scrollMode = 'horizontal-scroll-box';\n            }\n            clearTimeout(self.scrollTimer);\n            if (self.scrollModes.indexOf(self.scrollMode) === -1) {\n                return;\n            }\n            if (self.scrollMode === 'vertical-scroll-box') {\n                self.scrollBox.scrollTop = self.scrollStart.top + ((pos.y - self.dragStart.y)\n                    / self.scrollBox.heightBoxRatio);\n            } else if (self.scrollMode === 'vertical-scroll-top') {\n                self.scrollBox.scrollTop -= (self.page * self.style.cellHeight);\n                self.scrollTimer = setTimeout(self.scrollGrid, self.attributes.scrollRepeatRate, e);\n            } else if (self.scrollMode === 'vertical-scroll-bottom') {\n                self.scrollBox.scrollTop += (self.page * self.style.cellHeight);\n                self.scrollTimer = setTimeout(self.scrollGrid, self.attributes.scrollRepeatRate, e);\n            }\n            if (self.scrollMode === 'horizontal-scroll-box') {\n                self.scrollBox.scrollLeft = self.scrollStart.left + ((pos.x - self.dragStart.x)\n                    / self.scrollBox.widthBoxRatio);\n            } else if (self.scrollMode === 'horizontal-scroll-right') {\n                self.scrollBox.scrollLeft += self.attributes.selectionScrollIncrement;\n                self.scrollTimer = setTimeout(self.scrollGrid, self.attributes.scrollRepeatRate, e);\n            } else if (self.scrollMode === 'horizontal-scroll-left') {\n                self.scrollBox.scrollLeft -= self.attributes.selectionScrollIncrement;\n                self.scrollTimer = setTimeout(self.scrollGrid, self.attributes.scrollRepeatRate, e);\n            }\n        };\n        self.stopScrollGrid = function () {\n            clearTimeout(self.scrollTimer);\n            if (document.exitPointerLock) {\n                document.exitPointerLock();\n            }\n            document.removeEventListener('mousemove', self.scrollGrid, false);\n        };\n        self.dragReorder = function (e) {\n            var pos, x, y,\n                columReorder = self.dragMode === 'column-reorder',\n                rowReorder = self.dragMode === 'row-reorder';\n            pos = self.getLayerPos(e);\n            x = pos.x - self.dragStart.x;\n            y = pos.y - self.dragStart.y;\n            if (!self.attributes.allowColumnReordering && columReorder) {\n                return;\n            }\n            if (!self.attributes.allowRowReordering && rowReorder) {\n                return;\n            }\n            if (self.dispatchEvent('reordering', {\n                    NativeEvent: e,\n                    source: self.dragStartObject,\n                    target: self.currentCell,\n                    dragMode: self.dragMode\n                })) {\n                return;\n            }\n            if (Math.abs(x) > self.attributes.reorderDeadZone || Math.abs(y) > self.attributes.reorderDeadZone) {\n                self.reorderObject = self.draggingItem;\n                self.reorderTarget = self.currentCell;\n                self.reorderObject.dragOffset = {\n                    x: x,\n                    y: y\n                };\n                self.autoScrollZone(e, columReorder ? pos.x : -1, rowReorder ? pos.y : -1, false);\n            }\n        };\n        self.stopDragReorder = function (e) {\n            var oIndex,\n                tIndex,\n                cr = {\n                    'row-reorder': self.orders.rows,\n                    'column-reorder': self.orders.columns\n                },\n                i = {\n                    'row-reorder': 'rowIndex',\n                    'column-reorder': 'sortColumnIndex'\n                }[self.dragMode];\n            document.body.removeEventListener('mousemove', self.dragReorder, false);\n            document.body.removeEventListener('mouseup', self.stopDragReorder, false);\n            if (self.reorderObject\n                    && self.reorderTarget\n                    && ((self.dragMode === 'column-reorder' && self.reorderTarget.sortColumnIndex > -1\n                        && self.reorderTarget.sortColumnIndex < self.getSchema().length)\n                    || (self.dragMode === 'row-reorder' && self.reorderTarget.rowIndex > -1\n                        && self.reorderTarget.rowIndex < self.data.length))\n                    && self.reorderObject[i] !== self.reorderTarget[i]\n                    && !self.dispatchEvent('reorder', {\n                        NativeEvent: e,\n                        source: self.reorderObject,\n                        target: self.reorderTarget,\n                        dragMode: self.dragMode\n                    })) {\n                self.ignoreNextClick = true;\n                oIndex = cr[self.dragMode].indexOf(self.reorderObject[i]);\n                tIndex = cr[self.dragMode].indexOf(self.reorderTarget[i]);\n                cr[self.dragMode].splice(oIndex, 1);\n                cr[self.dragMode].splice(tIndex, 0, self.reorderObject[i]);\n                if(self.dragMode === 'column-reorder') {\n                  self.orders.columns = cr[self.dragMode];\n                } else {\n                  self.orders.rows = cr[self.dragMode];\n                }\n                self.resize();\n                self.setStorageData();\n            }\n            self.reorderObject = undefined;\n            self.reorderTarget = undefined;\n            self.draw(true);\n        };\n        self.dragMove = function (e) {\n            if (self.dispatchEvent('moving', {NativeEvent: e, cell: self.currentCell})) { return; }\n            var pos = self.getLayerPos(e);\n            self.moveOffset = {\n                x: self.currentCell.columnIndex - self.dragStartObject.columnIndex,\n                y: self.currentCell.rowIndex - self.dragStartObject.rowIndex\n            };\n            if (Math.abs(pos.x) > self.attributes.reorderDeadZone || Math.abs(pos.y) > self.attributes.reorderDeadZone) {\n                setTimeout(function () {\n                    self.autoScrollZone(e, pos.x, pos.y, false);\n                }, 1);\n            }\n        };\n        self.stopDragMove = function (e) {\n            document.body.removeEventListener('mousemove', self.dragMove, false);\n            document.body.removeEventListener('mouseup', self.stopDragMove, false);\n            var b = self.getSelectionBounds();\n            if (self.dispatchEvent('endmove', {NativeEvent: e, cell: self.currentCell})) {\n                self.movingSelection = undefined;\n                self.moveOffset = undefined;\n                self.draw(true);\n                return;\n            }\n            if (self.moveOffset) {\n                self.moveTo(self.movingSelection, b.left + self.moveOffset.x, b.top + self.moveOffset.y);\n                self.moveSelection(self.moveOffset.x, self.moveOffset.y);\n            }\n            self.movingSelection = undefined;\n            self.moveOffset = undefined;\n            self.draw(true);\n        };\n        self.freezeMove = function (e) {\n            if (self.dispatchEvent('freezemoving', {NativeEvent: e, cell: self.currentCell})) { return; }\n            var pos = self.getLayerPos(e);\n            self.ignoreNextClick = true;\n            self.freezeMarkerPosition = pos;\n            if (self.currentCell && self.currentCell.rowIndex !== undefined && self.dragMode === 'frozen-row-marker') {\n                self.scrollBox.scrollTop = 0;\n                self.frozenRow = self.currentCell.rowIndex + 1;\n            }\n            if (self.currentCell && self.currentCell.columnIndex !== undefined && self.dragMode === 'frozen-column-marker') {\n                self.scrollBox.scrollLeft = 0;\n                self.frozenColumn = self.currentCell.columnIndex + 1;\n            }\n            if (Math.abs(pos.x) > self.attributes.reorderDeadZone || Math.abs(pos.y) > self.attributes.reorderDeadZone) {\n                setTimeout(function () {\n                    self.autoScrollZone(e, pos.x, pos.y, false);\n                }, 1);\n            }\n        };\n        self.stopFreezeMove = function (e) {\n            document.body.removeEventListener('mousemove', self.freezeMove, false);\n            document.body.removeEventListener('mouseup', self.stopFreezeMove, false);\n            self.freezeMarkerPosition = undefined;\n            if (self.dispatchEvent('endfreezemove', {NativeEvent: e, cell: self.currentCell})) {\n                self.frozenRow = self.startFreezeMove.x;\n                self.frozenColumn = self.startFreezeMove.y;\n                self.draw(true);\n                return;\n            }\n            self.draw(true);\n        };\n        self.mousedown = function (e, overridePos) {\n            self.lastMouseDownTarget = e.target;\n            if (self.dispatchEvent('mousedown', {NativeEvent: e, cell: self.currentCell})) { return; }\n            if (!self.hasFocus) {\n                return;\n            }\n            if (e.button === 2 || self.input) { return; }\n            var ctrl = (e.ctrlKey || e.metaKey),\n                move = /-move/.test(self.dragMode),\n                freeze = /frozen-row-marker|frozen-column-marker/.test(self.dragMode),\n                resize = /-resize/.test(self.dragMode);\n            self.dragStart = overridePos || self.getLayerPos(e);\n            self.scrollStart = {\n                left: self.scrollBox.scrollLeft,\n                top: self.scrollBox.scrollTop\n            };\n            self.dragStartObject = self.getCellAt(self.dragStart.x, self.dragStart.y);\n            self.dragAddToSelection = !self.dragStartObject.selected;\n            if (!ctrl && !e.shiftKey && !/(vertical|horizontal)-scroll-(bar|box)/\n                    .test(self.dragStartObject.context)\n                    && self.currentCell\n                    && !self.currentCell.isColumnHeader\n                    && !move\n                    && !freeze\n                    && !resize) {\n                self.selections = [];\n            }\n            if (self.dragStartObject.isGrid) {\n                return;\n            }\n            if (self.scrollModes.indexOf(self.dragStartObject.context) !== -1) {\n                self.scrollMode = self.dragStartObject.context;\n                self.scrollStartMode = self.dragStartObject.context;\n                self.scrollGrid(e);\n                if (self.attributes.scrollPointerLock\n                        && ['horizontal-scroll-box', 'vertical-scroll-box'].indexOf(self.scrollStartMode) !== -1) {\n                    self.pointerLockPosition = {\n                        x: self.dragStart.x,\n                        y: self.dragStart.y\n                    };\n                    self.canvas.requestPointerLock();\n                }\n                document.addEventListener('mousemove', self.scrollGrid, false);\n                document.addEventListener('mouseup', self.stopScrollGrid, false);\n                self.ignoreNextClick = true;\n                return;\n            }\n            if (self.dragMode === 'cell') {\n                self.selecting = true;\n                if ((self.attributes.selectionMode === 'row' || self.dragStartObject.columnIndex === -1)\n                        && self.dragStartObject.rowIndex > -1) {\n                    self.selectRow(self.dragStartObject.rowIndex, ctrl, null);\n                } else if (self.attributes.selectionMode !== 'row') {\n                    self.mousemove(e);\n                }\n                return;\n            }\n            if (move) {\n                self.draggingItem = self.dragItem;\n                self.movingSelection = self.selections.concat([]);\n                self.dragging = self.dragStartObject;\n                if (self.dispatchEvent('beginmove', {NativeEvent: e, cell: self.currentCell})) { return; }\n                document.body.addEventListener('mousemove', self.dragMove, false);\n                document.body.addEventListener('mouseup', self.stopDragMove, false);\n                return self.mousemove(e);\n            }\n            if (freeze) {\n                self.draggingItem = self.dragItem;\n                self.startFreezeMove = {\n                    x: self.frozenRow,\n                    y: self.frozenColumn\n                };\n                if (self.dispatchEvent('beginfreezemove', {NativeEvent: e})) { return; }\n                document.body.addEventListener('mousemove', self.freezeMove, false);\n                document.body.addEventListener('mouseup', self.stopFreezeMove, false);\n                return self.mousemove(e);\n            }\n            if (resize) {\n                self.draggingItem = self.dragItem;\n                if (self.draggingItem.rowOpen) {\n                    self.resizingStartingHeight = self.sizes.trees[self.draggingItem.rowIndex];\n                } else {\n                    self.resizingStartingHeight = self.sizes.rows[self.draggingItem.rowIndex] || self.style.cellHeight;\n                }\n                self.resizingStartingWidth = self.sizes.columns[self.draggingItem.header.style === 'rowHeaderCell'\n                       ? 'cornerCell' : self.draggingItem.sortColumnIndex] || self.draggingItem.width;\n                document.body.addEventListener('mousemove', self.dragResizeColumn, false);\n                document.body.addEventListener('mouseup', self.stopDragResize, false);\n                return;\n            }\n            if (['row-reorder', 'column-reorder'].indexOf(self.dragMode) !== -1) {\n                self.draggingItem = self.dragStartObject;\n                document.body.addEventListener('mousemove', self.dragReorder, false);\n                document.body.addEventListener('mouseup', self.stopDragReorder, false);\n                return;\n            }\n        };\n        self.mouseup = function (e) {\n            clearTimeout(self.scrollTimer);\n            self.cellBoundaryCrossed = true;\n            self.rowBoundaryCrossed = true;\n            self.columnBoundaryCrossed = true;\n            self.selecting = undefined;\n            self.draggingItem = undefined;\n            self.dragStartObject = undefined;\n            if (self.dispatchEvent('mouseup', {NativeEvent: e, cell: self.currentCell})) { return; }\n            if (!self.hasFocus && e.target !== self.canvas) {\n                return;\n            }\n            if (self.currentCell && self.currentCell.grid !== undefined) {\n                return;\n            }\n            if (self.contextMenu || self.input) { return; }\n            if (self.dragStart && self.isInGrid(self.dragStart)) {\n                self.controlInput.focus();\n            }\n            e.preventDefault();\n        };\n        // gets the horizontal adjacent cells as well as first/last based on column visibility\n        self.getAdjacentCells = function () {\n            var x,\n                i,\n                s = self.getSchema(),\n                o = {};\n            for (x = 0; x < s.length; x += 1) {\n                i = self.orders.columns[x];\n                if (!s[i].hidden) {\n                    if (o.first === undefined) {\n                        o.first = x;\n                        o.left = x;\n                    }\n                    o.last = x;\n                    if (x > self.activeCell.columnIndex && o.right === undefined) {\n                        o.right = x;\n                    }\n                    if (x < self.activeCell.columnIndex) {\n                        o.left = x;\n                    }\n                }\n            }\n            if (o.right === undefined) {\n                o.right = o.last;\n            }\n            return o;\n        };\n        self.keydown = function (e) {\n            var i,\n                ev,\n                adjacentCells = self.getAdjacentCells(),\n                x = self.activeCell.columnIndex,\n                y = self.activeCell.rowIndex,\n                ctrl = (e.ctrlKey || e.metaKey),\n                last = self.data.length - 1,\n                s = self.getSchema(),\n                cols = s.length - 1;\n\n            var defaultPrevented = self.dispatchEvent('keydown', {\n                NativeEvent: e,\n                cell: self.currentCell\n            });\n\n            if (defaultPrevented) {\n                return;\n            }\n\n            if (!self.hasFocus) {\n                return;\n            }\n\n            // If a user starts typing content, switch to \"Enter\" mode\n            if (isPrintableKeyEvent(e) && !ctrl) {\n                return self.beginEditAt(x, y, e, true);\n            }\n\n            if (self.attributes.showNewRow) {\n                last += 1;\n            }\n\n            if (e.key === \"Tab\") {\n                e.preventDefault();\n            }\n\n            if (e.key === \"Escape\") {\n                self.selections = [];\n                self.draw(true);\n            } else if (ctrl && e.key === \"a\") {\n                self.selectAll();\n            } else if (e.key === \"ArrowDown\") {\n                y += 1;\n            } else if (e.key === \"ArrowUp\") {\n                y -= 1;\n            } else if (e.key === \"ArrowLeft\" || (e.shiftKey && e.key === \"Tab\")) {\n                x = adjacentCells.left;\n            } else if (e.key === \"ArrowRight\" || (!e.shiftKey && e.key === \"Tab\")) {\n                x = adjacentCells.right;\n            } else if (e.key === \"PageUp\") {\n                y -= self.page;\n                e.preventDefault();\n            } else if (e.key === \"PageDown\") {\n                y += self.page;\n                e.preventDefault();\n            } else if (e.key === \"Home\" || (ctrl && e.key === \"ArrowUp\")) {\n                y = 0;\n            } else if (e.key === \"End\" || (ctrl && e.key === \"ArrowDown\")) {\n                y = self.data.length - 1;\n            } else if (ctrl && e.key === \"ArrowRight\") {\n                x = adjacentCells.last;\n            } else if (ctrl && e.key === \"ArrowLeft\") {\n                x = adjacentCells.first;\n            }\n\n            if (e.key === \"Enter\") {\n                e.preventDefault();\n                return self.beginEditAt(x, y, e);\n            }\n\n            if (x < 0 || Number.isNaN(x)) {\n                x = adjacentCells.first;\n            }\n            if (y > last) {\n                y = last;\n            }\n            if (y < 0 || Number.isNaN(y)) {\n                y = 0;\n            }\n            if (x > cols) {\n                x = adjacentCells.last;\n            }\n\n            // TODO - most likely some column order related bugs in key based selection\n            // Arrows\n            var isArrowKey = [\"ArrowLeft\", \"ArrowUp\", \"ArrowRight\", \"ArrowDown\"].includes(e.key);\n\n            if (e.shiftKey && isArrowKey) {\n                self.selections[Math.max(y, 0)] = self.selections[Math.max(y, 0)] || [];\n                self.selections[Math.max(y, 0)].push(x);\n            \n                self.selectionBounds = self.getSelectionBounds();\n                self.selectArea(undefined, ctrl);\n            \n                self.draw(true);\n            }\n\n            if (x !== self.activeCell.columnIndex || y !== self.activeCell.rowIndex) {\n                self.scrollIntoView(\n                  x !== self.activeCell.columnIndex ? x : undefined,\n                  y !== self.activeCell.rowIndex && !Number.isNaN(y) ? y : undefined\n                );\n\n                self.setActiveCell(x, y);\n                if (!e.shiftKey && self.attributes.selectionFollowsActiveCell) {\n                    if (!ctrl) {\n                        self.selections = [];\n                    }\n                    self.selections[y] = self.selections[y] || [];\n                    self.selections[y].push(x);\n                    ev = {\n                        selectedData: self.getSelectedData(),\n                        selections: self.selections,\n                        selectionBounds: self.getSelectionBounds()\n                    };\n                    Object.defineProperty(ev, 'selectedData', {\n                        get: function () {\n                            return self.getSelectedData();\n                        }\n                    });\n                    self.dispatchEvent('selectionchanged', ev);\n                }\n                self.draw(true);\n            }\n        };\n        self.keyup = function (e) {\n            if (self.dispatchEvent('keyup', {NativeEvent: e, cell: self.currentCell})) { return; }\n            if (!self.hasFocus) {\n                return;\n            }\n        };\n        self.keypress = function (e) {\n            if (!self.hasFocus) {\n                return;\n            }\n            if (self.dispatchEvent('keypress', {NativeEvent: e, cell: self.currentCell})) { return; }\n        };\n        self.dblclick = function (e) {\n            if (self.dispatchEvent('dblclick', {NativeEvent: e, cell: self.currentCell})) { return; }\n            if (!self.hasFocus) {\n                return;\n            }\n            if (self.currentCell.context === 'ew-resize'\n                    && self.currentCell.style === 'columnHeaderCell') {\n                self.fitColumnToValues(self.currentCell.header.name);\n            } else if (self.currentCell.context === 'ew-resize'\n                    && self.currentCell.style === 'cornerCell') {\n                self.autosize();\n            } else if (['cell', 'activeCell'].indexOf(self.currentCell.style) !== -1) {\n                self.beginEditAt(self.currentCell.columnIndex, self.currentCell.rowIndex);\n            }\n        };\n        self.scrollWheel = function (e) {\n            var l,\n                t,\n                ev = e,\n                deltaX = e.deltaX === undefined ? e.NativeEvent.deltaX : e.deltaX,\n                deltaY = e.deltaY === undefined ? e.NativeEvent.deltaY : e.deltaY,\n                deltaMode = e.deltaMode === undefined ? e.NativeEvent.deltaMode : e.deltaMode;\n            var e = e.NativeEvent || e;\n            if (wheeling) {\n                ev.preventDefault(e);\n                return;\n            }\n            if (self.dispatchEvent('wheel', {NativeEvent: e})) {\n                return;\n            }\n            self.touchHaltAnimation = true;\n            l = self.scrollBox.scrollLeft;\n            t = self.scrollBox.scrollTop;\n            if (self.hasFocus) {\n                //BUG Issue 42: https://github.com/TonyGermaneri/canvas-datagrid/issues/42\n                //https://stackoverflow.com/questions/20110224/what-is-the-height-of-a-line-in-a-wheel-event-deltamode-dom-delta-line\n                if (deltaMode === 1) {\n                    // line mode = 17 pixels per line\n                    deltaY = deltaY * 17;\n                }\n                if ((self.scrollBox.scrollTop  < self.scrollBox.scrollHeight && deltaY > 0)\n                        || (self.scrollBox.scrollLeft < self.scrollBox.scrollWidth && deltaX > 0)\n                        || (self.scrollBox.scrollTop > 0 && deltaY < 0)\n                        || (self.scrollBox.scrollLeft > 0 && deltaX < 0)) {\n                    ev.preventDefault(e);\n                }\n                wheeling = setTimeout(function () {\n                    wheeling = undefined;\n                    self.scrollBox.scrollTo(deltaX + l, deltaY + t);\n                }, 1);\n            }\n        };\n\n        self.pasteData = function(pasteValue, mimeType, startRowIndex, startColIndex) {\n            var schema = self.getVisibleSchema();\n\n            const isSupportedHtmlTable = htmlString => /(?:^(<meta[^>]+>)?<table>)|(?:<!--StartFragment-->\\s*<table>)/.test(htmlString);\n\n            // TODO: support pasting tables from Excel \n            if (mimeType === \"text/html\" && isSupportedHtmlTable(pasteValue) === false) {\n                console.warn('Unrecognized HTML format. HTML must be a simple table, e.g.: <table><tr><td>data</td></tr></table>.');\n                console.warn('Data with the mime type text/html not in this format will not be imported as row data.');\n                \n                return;\n            }\n\n            function parseData(data, mimeType) {\n                // TODO: use DOMParser\n                if (mimeType === \"text/html\") {\n                    // strip table beginning and ending off, then split at rows\n                    var cleanedHtmlData = data.substring(\n                        data.indexOf('<table><tr>') + 11, data.indexOf('</tr></table>')\n                    ).split('</tr><tr>').filter(\n                        // ditch any headers on the table\n                        row => !/^<th>|^<thead>/.test(row)\n                    ).map(\n                        // split row into individual cells\n                        row => row.match(/<td>[^<]+/g).map(match => match.replace(/^<td>/, '')\n                    ));\n\n                    return cleanedHtmlData;\n                }\n\n                // Default data format is string, so split on new line,\n                // and then enclose in an array (a row with one cell):\n                return data.split(\"\\n\").map(value => [value]);\n            }\n\n            var rows = parseData(pasteValue, mimeType);\n\n            // Special case: if rows.length = 1, we paste this value in each\n            // selected cell. This mimics Excel's paste functionality, and works\n            // as a poor-man's fill-down.\n            if (rows.length === 1) {\n                var cellData = rows[0][0];\n\n                self.forEachSelectedCell(function (data, rowIndex, colName) {\n                    data[rowIndex][colName] = cellData;\n                });\n            } else {\n                var selections = [];\n                for (var rowIndex = 0; rowIndex < rows.length; rowIndex++) {\n                    // Rows may have been moved by user, so get the actual row index\n                    // (instead of the row index at which the row is rendered):\n                    var realRowIndex = self.orders.rows[startRowIndex + rowIndex];\n                    var cells = rows[rowIndex];\n    \n                    var existingRowData = self.data[realRowIndex];\n                    var newRowData = Object.assign({}, existingRowData);\n    \n                    selections[realRowIndex] = [];\n    \n                    for (var colIndex = 0; colIndex < cells.length; colIndex++) {\n                        var column = schema[startColIndex + colIndex];\n    \n                        if (!column) {\n                            console.warn(\"Paste data exceeded grid bounds. Skipping.\");\n                            continue;\n                        }\n        \n                        var columnName = column.name;\n                        var cellData = cells[colIndex];\n    \n                        if (cellData === undefined || cellData === null) {\n                            newRowData[columnName] = existingRowData[columnName];\n                            continue;\n                        }\n    \n                        selections[realRowIndex].push(startColIndex + colIndex);\n    \n                        newRowData[columnName] = cellData;\n                    }\n    \n                    self.data[realRowIndex] = newRowData;\n                }\n                self.selections = selections;\n            }\n\n            // selections is a sparse array, so we condense:\n            var affectedCells = [];\n\n            self.selections.forEach(function (row, rowIndex) {\n                if (rowIndex === undefined) return;\n\n                row.forEach(function (columnIndex) {\n                    affectedCells.push([rowIndex, columnIndex]);\n                });\n            });\n\n            self.dispatchEvent('afterpaste', {\n                cells: affectedCells,\n            });\n\n            return rows.length;\n        }\n        self.getNextVisibleColumnIndex = function (visibleColumnIndex) {\n            var x, s = self.getVisibleSchema();\n            for (x = 0; x < s.length; x += 1) {\n                if (s[x].columnIndex === visibleColumnIndex) {\n                    return s[x + 1].columnIndex;\n                }\n            }\n            return -1;\n        };\n        self.getVisibleColumnIndexOf = function (columnIndex) {\n            var x, s = self.getVisibleSchema();\n            for (x = 0; x < s.length; x += 1) {\n                if (s[x].columnIndex === columnIndex) {\n                    return x;\n                }\n            }\n            return -1;\n        };\n        self.paste = function (event) {\n            var defaultPrevented = self.dispatchEvent('beforepaste', { NativeEvent: event });\n\n            if (defaultPrevented) {\n                return;\n            }\n\n            var clipboardItems = new Map(\n                Array.from(event.clipboardData.items).map(item => [item.type, item])\n            );\n\n            // Supported MIME types, in order of preference:\n            var supportedMimeTypes = ['text/html', 'text/csv', 'text/plain'];\n\n            // The clipboard will often contain the same data in multiple formats,\n            // which can be used depending on the context in which it's pasted. Here\n            // we'll prefere more structured (HTML/CSV) over less structured, when\n            // available, so we try to find those first:\n            var pasteableItems = supportedMimeTypes.map(\n                mimeType => clipboardItems.get(mimeType)\n            ).filter(item => !!item); // filter out not-found MIME types (= undefined)\n\n            if (pasteableItems.length === 0) {\n                console.warn('Cannot find supported clipboard data type. Supported types are:', supportedMimeTypes.join(', '));\n                return;\n            }\n\n            var itemToPaste = pasteableItems[0];\n\n            // itemToPaste is cleared once accessed (getData or getAsString),\n            // so we need to store the type here, before reading its value:\n            var pasteType = itemToPaste.type;\n\n            itemToPaste.getAsString(function (pasteValue) {\n                self.pasteData(\n                    pasteValue,\n                    pasteType,\n                    self.activeCell.rowIndex,\n                    self.getVisibleColumnIndexOf(self.activeCell.columnIndex)\n                );\n\n                self.draw();\n            });\n        };\n        self.cut = function (e) {\n            self.copy(e);\n            self.forEachSelectedCell(function (data, index, colName) {\n                data[index][colName] = '';\n            });\n        };\n        self.copy = function (e) {\n            if (self.dispatchEvent('copy', {NativeEvent: e})) { return; }\n            if (!self.hasFocus || !e.clipboardData) { return; }\n            var t,\n                d,\n                data = (self.data || []),\n                tableRows = [],\n                textRows = [],\n                outputHeaders = {},\n                outputHeaderKeys,\n                sData = self.getSelectedData(),\n                s = self.getSchema();\n            function htmlSafe(v) {\n                return v.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n            }\n            function fCopyCell(v) {\n                v = v === null || v === undefined ? '' : v;\n                return '<td>' + (typeof v === 'string' ? htmlSafe(v) : v) + '</td>';\n            }\n            function addHeaders(headers, useHtml) {\n                if (!s.length || headers.length < 2) { return ''; }\n                var h = [];\n                if (useHtml) {\n                    h.push('<tr>');\n                }\n                s.forEach(function (column, columnIndex) {\n                    // intentional redefinition of column\n                    column = s[self.orders.columns[columnIndex]];\n                    if (!column.hidden && headers.indexOf(column.name) !== -1) {\n                        var ev = {NativeEvent: e, column: column};\n                        if(self.dispatchEvent('copyonschema', ev)) {\n                            column = ev.column;\n                        }\n\n                        var hVal = (column.name || column.title) || '';\n                        if (useHtml) {\n                            h.push('<th>' + htmlSafe(hVal) + '</th>');\n                        } else {\n                            h.push('\"' + hVal.replace(/\"/g, '\"\"') + '\"');\n                        }\n                    }\n                });\n                h.push(useHtml ? '</tr>' : '\\n');\n                return h.join(useHtml ? '' : ',');\n            }\n            function addCellValue(val, trRow, textRow, column) {\n                // escape strings\n                if (val !== null\n                        && val !== false\n                        && val !== undefined\n                        && val.replace) {\n                    trRow.push(fCopyCell(val));\n                    textRow.push('\"' + val.replace(/\"/g, '\"\"') + '\"');\n                    return;\n                }\n                if (val !== undefined) {\n                    textRow.push(val);\n                    trRow.push(fCopyCell(val));\n                    return;\n                }\n                // issue #66\n                textRow.push('');\n                trRow.push('<td>&nbsp;</td>');\n            }\n            if (sData.length > 0) {\n                sData.forEach(function (row) {\n                    var rowKeys = Object.keys(row);\n                    if (row) {\n                        var trRow = [],\n                            textRow = [],\n                            sSorted = [];\n                        // HACK: https://github.com/TonyGermaneri/canvas-datagrid/issues/181\n                        // I can't use sort here or O(1), so hacks\n                        s.forEach(function (column, columnIndex) {\n                            sSorted.push(s[self.orders.columns[columnIndex]]);\n                        });\n                        sSorted.forEach(function (column, columnIndex) {\n                            if (rowKeys.indexOf(column.name) !== -1) {\n                                outputHeaders[column.name] = true;\n                                // escape strings\n                                addCellValue(row[column.name], trRow, textRow, column);\n                            }\n                        });\n                        tableRows.push(trRow.join(''));\n                        textRows.push(textRow.join(','));\n                    }\n                });\n                outputHeaderKeys = Object.keys(outputHeaders);\n                t = addHeaders(outputHeaderKeys) + textRows.join('\\n');\n                d = '<table>' + addHeaders(outputHeaderKeys, true) + '<tr>' + tableRows.join('</tr><tr>') + '</tr></table>';\n                if (outputHeaderKeys.length === 1) {\n                    // if there was only one cell selected, remove the quotes from the string\n                    t = t.substring(1, t.length -1);\n                }\n                e.clipboardData.setData('text/html', d);\n                e.clipboardData.setData('text/plain', t);\n                e.clipboardData.setData('text/csv', t);\n                e.clipboardData.setData('application/json', JSON.stringify(sData));\n                e.preventDefault();\n            }\n        };\n        return;\n    };\n});\n","/*jslint browser: true, unparam: true, todo: true*/\n/*globals HTMLElement: false, Reflect: false, define: true, MutationObserver: false, requestAnimationFrame: false, performance: false, btoa: false*/\ndefine([], function () {\n    'use strict';\n    return function (self, ctor) {\n        self.scale = 1;\n        self.orders = {\n            rows: [],\n            columns: []\n        };\n        self.appliedInlineStyles = {};\n        self.cellGridAttributes = {};\n        self.treeGridAttributes = {};\n        self.visibleRowHeights = [];\n        self.hasFocus = false;\n        self.activeCell = {\n            columnIndex: 0,\n            rowIndex: 0\n        };\n        self.innerHTML = '';\n        self.storageName = 'canvasDataGrid';\n        self.invalidSearchExpClass = 'canvas-datagrid-invalid-search-regExp';\n        self.localStyleLibraryStorageKey = 'canvas-datagrid-user-style-library';\n        self.dataType = 'application/x-canvas-datagrid';\n        self.orderBy = null;\n        self.orderDirection = 'asc';\n        self.orderings = {\n            columns: [],\n            add: function (orderBy, orderDirection, sortFunction) {\n                self.orderings.columns = self.orderings.columns.filter(function (col) {\n                    return col.orderBy !== orderBy;\n                });\n                self.orderings.columns.push({\n                    orderBy: orderBy,\n                    orderDirection: orderDirection,\n                    sortFunction: sortFunction\n                });\n            },\n            sort: function () {\n                self.orderings.columns.forEach(function (col) {\n                    self.data.sort(col.sortFunction(col.orderBy, col.orderDirection));\n                });\n            }\n        };\n        self.columnFilters = {};\n        self.filters = {};\n        self.frozenRow = 0;\n        self.frozenColumn = 0;\n        self.ellipsisCache = {};\n        self.scrollCache = { x: [], y: [] };\n        self.scrollBox = {};\n        self.visibleRows = [];\n        self.visibleCells = [];\n        self.sizes = {\n            rows: {},\n            columns: {},\n            trees: {}\n        };\n        self.currentFilter = function () {\n            return true;\n        };\n        self.selections = [];\n        self.hovers = {};\n        self.attributes = {};\n        self.style = {};\n        self.formatters = {};\n        self.sorters = {};\n        self.parsers = {};\n        self.schemaHashes = {};\n        self.events = {};\n        self.changes = [];\n        self.scrollIndexTop = 0;\n        self.scrollPixelTop = 0;\n        self.scrollIndexLeft = 0;\n        self.scrollPixelLeft = 0;\n        self.childGrids = {};\n        self.openChildren = {};\n        self.scrollModes = [\n            'vertical-scroll-box',\n            'vertical-scroll-top',\n            'vertical-scroll-bottom',\n            'horizontal-scroll-box',\n            'horizontal-scroll-right',\n            'horizontal-scroll-left'\n        ];\n        self.componentL1Events = {};\n        self.eventNames = ['afterdraw', 'afterrendercell', 'attributechanged', 'beforebeginedit',\n            'beforecreatecellgrid', 'beforedraw', 'beforeendedit', 'beforerendercell', 'beforerendercellgrid',\n            'beginedit', 'cellmouseout', 'cellmouseover', 'click', 'collapsetree', 'contextmenu', 'copy',\n            'datachanged', 'dblclick', 'endedit', 'expandtree', 'formatcellvalue', 'keydown', 'keypress',\n            'keyup', 'mousedown', 'mousemove', 'mouseup', 'newrow', 'ordercolumn', 'rendercell', 'rendercellgrid',\n            'renderorderbyarrow', 'rendertext', 'rendertreearrow', 'reorder', 'reordering', 'resize',\n            'resizecolumn', 'resizerow', 'schemachanged', 'scroll', 'selectionchanged', 'stylechanged',\n            'touchcancel', 'touchend', 'touchmove', 'touchstart', 'wheel'];\n        self.mouse = { x: 0, y: 0};\n        self.getSelectedData = function (expandToRow) {\n            var d = [], s = self.getSchema(), l = self.data.length;\n            if (l === 0) { return []; }\n            self.selections.forEach(function (row, index) {\n                if (!row) { return; }\n                if (index === l) { return; }\n                if (row.length === 0) {\n                    d[index] = null;\n                    return;\n                }\n                d[index] = {};\n                row.forEach(function (col) {\n                    var orderedIndex;\n                    if (col === -1 || !s[col]) { return; }\n                    orderedIndex = self.orders.columns[col];\n                    if (!expandToRow && s[orderedIndex].hidden) { return; }\n                    if (self.data[index]) {\n                        d[index][s[orderedIndex].name] = self.data[index][s[orderedIndex].name];\n                    }\n                });\n            });\n            return d;\n        };\n        self.getColumnHeaderCellHeight = function () {\n            if (!self.attributes.showColumnHeaders) { return 0; }\n            return ((self.sizes.rows[-1] || self.style.columnHeaderCellHeight) * self.scale);\n        };\n        self.getRowHeaderCellWidth = function () {\n            if (!self.attributes.showRowHeaders) { return 0; }\n            return (self.sizes.columns[-1] || self.style.rowHeaderCellWidth) * self.scale;\n        };\n        self.setStorageData = function () {\n            if (!self.attributes.saveAppearance || !self.attributes.name) { return; }\n            var visibility = {};\n            self.getSchema().forEach(function (column) {\n                visibility[column.name] = !column.hidden;\n            });\n            localStorage.setItem(self.storageName + '-' + self.attributes.name, JSON.stringify({\n                sizes: {\n                    rows: self.sizes.rows,\n                    columns: self.sizes.columns\n                },\n                orders: {\n                    rows: self.orders.rows,\n                    columns: self.orders.columns\n                },\n                orderBy: self.orderBy,\n                orderDirection: self.orderDirection,\n                visibility: visibility\n            }));\n        };\n        self.getSchema = function () {\n            return self.schema || self.tempSchema || [];\n        };\n        function fillArray(low, high) {\n            var i = [], x;\n            for (x = low; x <= high; x += 1) {\n                i[x] = x;\n            }\n            return i;\n        }\n        self.createColumnOrders = function () {\n            var s = self.getSchema();\n            self.orders.columns = fillArray(0, s.length - 1);\n        };\n        self.createRowOrders = function () {\n            self.orders.rows = fillArray(0, self.data.length - 1);\n        };\n        self.getVisibleSchema = function () {\n            return self.getSchema().filter(function (col) {\n                return !col.hidden;\n            });\n        };\n        self.applyDefaultValue = function (row, header) {\n            var d = header.defaultValue || '';\n            if (typeof d === 'function') {\n                d = d.apply(self.intf, [header]);\n            }\n            row[header.name] = d;\n        };\n        self.createNewRowData = function () {\n            self.newRow = {};\n            self.getSchema().forEach(function forEachHeader(header) {\n                self.applyDefaultValue(self.newRow, header);\n            });\n        };\n        self.getSchemaNameHash = function (key) {\n            var n = 0;\n            while (self.schemaHashes[key]) {\n                n += 1;\n                key = key + n;\n            }\n            return key;\n        };\n        self.filter = function (type) {\n            var f = self.filters[type];\n            if (!f && type !== undefined) {\n                console.warn('Cannot find filter for type %s, falling back to substring match.', type);\n                f = self.filters.string;\n            }\n            return f;\n        };\n        self.applyFilter = function () {\n            self.refreshFromOrigialData();\n            Object.keys(self.columnFilters).forEach(function (filter) {\n                var header = self.getHeaderByName(filter);\n                if (!header) {\n                    return;\n                }\n                self.currentFilter = header.filter || self.filter(header.type || 'string');\n                self.data = self.data.filter(function (row) {\n                    return self.currentFilter(row[filter], self.columnFilters[filter]);\n                });\n            });\n            self.resize();\n            self.draw(true);\n        };\n        self.applyDataTransforms = function () {\n            self.applyFilter();\n            self.orderings.sort();\n        }\n        self.getBestGuessDataType = function (columnName, data) {\n            var t, x, l = data.length;\n            for (x = 0; x < l; x += 1) {\n                if (data[x] !== undefined && data[x] !== null && [null, undefined].indexOf(data[x][columnName]) !== -1) {\n                    t = typeof data[x];\n                    return t === 'object' ? 'string' : t;\n                }\n            }\n            return 'string';\n        };\n        self.drawChildGrids = function () {\n            Object.keys(self.childGrids).forEach(function (gridKey) {\n                self.childGrids[gridKey].draw();\n            });\n        };\n        self.resizeChildGrids = function () {\n            Object.keys(self.childGrids).forEach(function (gridKey) {\n                self.childGrids[gridKey].resize();\n            });\n        };\n        self.autoScrollZone = function (e, x, y, ctrl) {\n            var setTimer,\n                rowHeaderCellWidth = self.getRowHeaderCellWidth(),\n                columnHeaderCellHeight = self.getColumnHeaderCellHeight();\n            if (y !== -1) {\n                if (x > self.width - self.attributes.selectionScrollZone && x < self.width) {\n                    self.scrollBox.scrollLeft += self.attributes.selectionScrollIncrement;\n                    setTimer = true;\n                }\n                if (x - self.attributes.selectionScrollZone - rowHeaderCellWidth < 0) {\n                    self.scrollBox.scrollLeft -= self.attributes.selectionScrollIncrement;\n                    setTimer = true;\n                }\n            }\n            if (y !== -1) {\n                if (y > self.height - self.attributes.selectionScrollZone && y < self.height) {\n                    self.scrollBox.scrollTop += self.attributes.selectionScrollIncrement;\n                    setTimer = true;\n                }\n                if (y - self.attributes.selectionScrollZone - columnHeaderCellHeight < 0) {\n                    self.scrollBox.scrollTop -= self.attributes.selectionScrollIncrement;\n                    setTimer = true;\n                }\n            }\n            if (setTimer && !ctrl && self.currentCell && self.currentCell.columnIndex !== -1) {\n                self.scrollTimer = setTimeout(self.mousemove, self.attributes.scrollRepeatRate, e);\n            }\n        };\n        self.refreshFromOrigialData = function () {\n            self.data = self.originalData.filter(function (row) {\n                return true;\n            });\n        };\n        self.validateColumn = function (c, s) {\n            if (!c.name) {\n                throw new Error('A column must contain at least a name.');\n            }\n            if (s.filter(function (i) { return i.name === c.name; }).length > 0) {\n                throw new Error('A column with the name '\n                    + c.name + ' already exists and cannot be added again.');\n            }\n            return true;\n        };\n        self.setDefaults = function (obj1, obj2, key, def) {\n            obj1[key] = obj2[key] === undefined ? def : obj2[key];\n        };\n        self.setAttributes = function () {\n            self.defaults.attributes.forEach(function eachAttribute(i) {\n                self.setDefaults(self.attributes, self.args, i[0], i[1]);\n            });\n        };\n        self.setStyle = function () {\n            self.defaults.styles.forEach(function eachStyle(i) {\n                self.setDefaults(self.style, self.args.style || {}, i[0], i[1]);\n            });\n        };\n        self.autosize = function (colName) {\n            self.getVisibleSchema().forEach(function (col, colIndex) {\n                if (col.name === colName || colName === undefined) {\n                    self.sizes.columns[colIndex]\n                        = Math.max(self.findColumnMaxTextLength(col.name), self.style.minColumnWidth);\n                }\n            });\n            self.sizes.columns[-1] = self.findColumnMaxTextLength('cornerCell');\n        };\n        self.dispose = function () {\n            if (!self.isChildGrid && self.canvas && self.canvas.parentNode) {\n                self.canvas.parentNode.removeChild(self.canvas);\n            }\n            if(!self.isChildGrid) {\n                document.body.removeChild(self.controlInput)\n            }\n            self.eventParent.removeEventListener('mouseup', self.mouseup, false);\n            self.eventParent.removeEventListener('mousedown', self.mousedown, false);\n            self.eventParent.removeEventListener('dblclick', self.dblclick, false);\n            self.eventParent.removeEventListener('click', self.click, false);\n            self.eventParent.removeEventListener('mousemove', self.mousemove);\n            self.eventParent.removeEventListener('wheel', self.scrollWheel, false);\n            self.canvas.removeEventListener('contextmenu', self.contextmenu, false);\n            self.canvas.removeEventListener('copy', self.copy);\n            self.controlInput.removeEventListener('copy', self.copy);\n            self.controlInput.removeEventListener('cut', self.cut);\n            self.controlInput.removeEventListener('paste', self.paste);\n            self.controlInput.removeEventListener('keypress', self.keypress, false);\n            self.controlInput.removeEventListener('keyup', self.keyup, false);\n            self.controlInput.removeEventListener('keydown', self.keydown, false);\n            window.removeEventListener('resize', self.resize);\n            if (self.observer && self.observer.disconnect) {\n                self.observer.disconnect();\n            }\n        };\n        self.tryLoadStoredSettings = function () {\n            var s;\n            self.reloadStoredValues();\n            if (self.storedSettings\n                    && typeof self.storedSettings.orders === 'object'\n                    && self.storedSettings.orders !== null) {\n                if (self.storedSettings.orders.rows.length >= (self.data || []).length) {\n                    self.orders.rows = self.storedSettings.orders.rows;\n                }\n                s = self.getSchema();\n                if (self.storedSettings.orders.columns.length === s.length) {\n                    self.orders.columns = self.storedSettings.orders.columns;\n                }\n                self.orderBy = self.storedSettings.orderBy === undefined\n                    ? s[0].name : self.storedSettings.orderBy;\n                self.orderDirection = self.storedSettings.orderDirection === undefined\n                    ? 'asc' : self.storedSettings.orderDirection;\n                if (self.storedSettings.orderBy !== undefined && self.getHeaderByName(self.orderBy) && self.orderDirection) {\n                    self.order(self.orderBy, self.orderDirection);\n                }\n            }\n        };\n        self.getDomRoot = function () {\n            return self.shadowRoot ? self.shadowRoot.host : self.parentNode;\n        };\n        self.getFontName = function (fontStyle) {\n            return fontStyle.replace(/\\d+\\.?\\d*px/, '');\n        };\n        self.getFontHeight = function (fontStyle) {\n            return parseFloat(fontStyle, 10);\n        };\n        self.parseStyleValue = function (key) {\n            if (/Font/.test(key)) {\n                self.style[key + 'Height'] = self.getFontHeight(self.style[key]);\n                self.style[key + 'Name'] = self.getFontName(self.style[key]);\n                return;\n            }\n            // when inheriting styles from already instantiated grids, don't parse already parsed values.\n            if (key === 'moveOverlayBorderSegments' && typeof self.style[key] === 'string') {\n                self.style[key] = self.style[key].split(',')\n                    .map(function (i) { return parseInt(i, 10); });\n            }\n        };\n        self.initProp = function (propName) {\n            if (!self.args[propName]) { return; }\n            Object.keys(self.args[propName]).forEach(function (key) {\n                self[propName][key] = self.args[propName][key];\n            });\n        };\n        self.getStyleProperty = function (key) {\n            if (self.styleKeys.indexOf(key) === -1) {\n                return self.parentNodeStyle[key];\n            }\n            return self.style[key];\n        };\n        self.setStyleProperty = function (key, value, supressDrawAndEvent) {\n            var isDim = ['height', 'width', 'minHeight', 'minWidth', 'maxHeight', 'maxWidth'].indexOf(key) !== -1;\n            if (self.styleKeys.indexOf(key) === -1) {\n                self.parentNodeStyle[key] = value;\n            } else {\n                if (/-/.test(key)) {\n                    key = self.dehyphenateProperty(key);\n                }\n                self.style[key] = value;\n                self.parseStyleValue(key);\n            }\n            if (isDim) {\n                self.resize();\n            }\n            if (!supressDrawAndEvent) {\n                self.draw(true);\n                self.dispatchEvent('stylechanged', {name: 'style', value: value});\n            }\n        };\n        self.reloadStoredValues = function () {\n            if (self.attributes.name && self.attributes.saveAppearance) {\n                try {\n                    self.storedSettings = localStorage.getItem(self.storageName + '-' + self.attributes.name);\n                } catch (e) {\n                    console.warn(\"Error loading stored values. \" + e.message);\n                    self.storedSettings = undefined;\n                }\n                if (self.storedSettings) {\n                    try {\n                        self.storedSettings = JSON.parse(self.storedSettings);\n                    } catch (e) {\n                        console.warn('could not read settings from localStore', e);\n                        self.storedSettings = undefined;\n                    }\n                }\n                if (self.storedSettings) {\n                    if (typeof self.storedSettings.sizes === 'object'\n                            && self.storedSettings.sizes !== null) {\n                        self.sizes.rows = self.storedSettings.sizes.rows;\n                        self.sizes.columns = self.storedSettings.sizes.columns;\n                        ['trees', 'columns', 'rows'].forEach(function (i) {\n                            if (!self.sizes[i]) {\n                                self.sizes[i] = {};\n                            }\n                        });\n                    }\n                    if (typeof self.storedSettings.visibility === 'object') {\n                        self.getSchema().forEach(function (column) {\n                            if (self.storedSettings.visibility && self.storedSettings.visibility[column.name] !== undefined) {\n                                column.hidden = !self.storedSettings.visibility[column.name];\n                            }\n                        });\n                    }\n                }\n            }\n        };\n        self.init = function () {\n            if (self.initialized) { return; }\n            function addStyleKeyIfNoneExists(key) {\n                if (self.styleKeys.indexOf(key) === -1) {\n                    self.styleKeys.push(key);\n                }\n            }\n            var publicStyleKeyIntf = {};\n            self.setAttributes();\n            self.setStyle();\n            self.initScrollBox();\n            self.setDom();\n            self.nodeType = 'canvas-datagrid';\n            self.ie = /Trident/.test(window.navigator.userAgent);\n            self.edge = /Edge/.test(window.navigator.userAgent);\n            self.webKit = /WebKit/.test(window.navigator.userAgent);\n            self.moz = /Gecko/.test(window.navigator.userAgent);\n            self.mobile = /Mobile/i.test(window.navigator.userAgent);\n            self.blankValues = [undefined, null, ''];\n            self.cursorGrab = 'grab';\n            self.cursorGrabing = 'grabbing';\n            self.cursorGrab = self.webKit ? '-webkit-grab' : self.cursorGrab;\n            self.cursorGrabing = self.moz ? '-webkit-grabbing' : self.cursorGrabbing;\n            self.pointerLockPosition = {x: 0, y: 0};\n            Object.keys(self.style).forEach(self.parseStyleValue);\n            self.intf.moveSelection = self.moveSelection;\n            self.intf.moveTo = self.moveTo;\n            self.intf.addEventListener = self.addEventListener;\n            self.intf.removeEventListener = self.removeEventListener;\n            self.intf.dispatchEvent = self.dispatchEvent;\n            /**\n             * Releases grid resources and removes grid elements.\n             * @memberof canvasDatagrid\n             * @name dispose\n             * @method\n             */\n            self.intf.dispose = self.dispose;\n            /**\n             * Appends the grid to another element later.  Not implemented.\n             * @memberof canvasDatagrid\n             * @name appendTo\n             * @method\n             * @param {number} el The element to append the grid to.\n             */\n            self.intf.appendTo = self.appendTo;\n            self.intf.getVisibleCellByIndex = self.getVisibleCellByIndex;\n            self.intf.filters = self.filters;\n            self.intf.sorters = self.sorters;\n            self.intf.autosize = self.autosize;\n            self.intf.beginEditAt = self.beginEditAt;\n            self.intf.endEdit = self.endEdit;\n            self.intf.setActiveCell = self.setActiveCell;\n            self.intf.forEachSelectedCell = self.forEachSelectedCell;\n            self.intf.scrollIntoView = self.scrollIntoView;\n            self.intf.clearChangeLog = self.clearChangeLog;\n            self.intf.gotoCell = self.gotoCell;\n            self.intf.gotoRow = self.gotoRow;\n            self.intf.getHeaderByName = self.getHeaderByName;\n            self.intf.findColumnScrollLeft = self.findColumnScrollLeft;\n            self.intf.findRowScrollTop = self.findRowScrollTop;\n            self.intf.fitColumnToValues = self.fitColumnToValues;\n            self.intf.findColumnMaxTextLength = self.findColumnMaxTextLength;\n            self.intf.disposeContextMenu = self.disposeContextMenu;\n            self.intf.getCellAt = self.getCellAt;\n            self.intf.isCellVisible = self.isCellVisible;\n            self.intf.isRowVisible = self.isRowVisible;\n            self.intf.isColumnVisible = self.isColumnVisible;\n            self.intf.order = self.order;\n            self.intf.draw = self.draw;\n            self.intf.isComponent = self.isComponent;\n            self.intf.selectArea = self.selectArea;\n            self.intf.clipElement = self.clipElement;\n            self.intf.getSchemaFromData = self.getSchemaFromData;\n            self.intf.setFilter = self.setFilter;\n            self.intf.selectRow = self.selectRow;\n            self.intf.parentGrid = self.parentGrid;\n            self.intf.toggleTree = self.toggleTree;\n            self.intf.expandTree = self.expandTree;\n            self.intf.collapseTree = self.collapseTree;\n            self.intf.canvas = self.canvas;\n            self.intf.context = self.ctx;\n            self.intf.insertRow = self.insertRow;\n            self.intf.deleteRow = self.deleteRow;\n            self.intf.addRow = self.addRow;\n            self.intf.insertColumn = self.insertColumn;\n            self.intf.deleteColumn = self.deleteColumn;\n            self.intf.addColumn = self.addColumn;\n            self.intf.getClippingRect = self.getClippingRect;\n            self.intf.setRowHeight = self.setRowHeight;\n            self.intf.setColumnWidth = self.setColumnWidth;\n            self.intf.resetColumnWidths = self.resetColumnWidths;\n            self.intf.resetRowHeights = self.resetRowHeights;\n            self.intf.resize = self.resize;\n            self.intf.selectColumn = self.selectColumn;\n            self.intf.selectRow = self.selectRow;\n            self.intf.selectAll = self.selectAll;\n            self.intf.selectNone = self.selectNone;\n            self.intf.drawChildGrids = self.drawChildGrids;\n            self.intf.assertPxColor = self.assertPxColor;\n            self.intf.clearPxColorAssertions = self.clearPxColorAssertions;\n            self.intf.integerToAlpha = self.integerToAlpha;\n            self.intf.copy = self.copy;\n            self.intf.paste = self.paste;\n            self.intf.setStyleProperty = self.setStyleProperty;\n            Object.defineProperty(self.intf, 'defaults', {\n                get: function () {\n                    return {\n                        styles: self.defaults.styles.reduce(function (a, i) { a[i[0]] = i[1]; return a; }, {}),\n                        attributes: self.defaults.attributes.reduce(function (a, i) { a[i[0]] = i[1]; return a; }, {})\n                    };\n                }\n            });\n            self.styleKeys = Object.keys(self.intf.defaults.styles);\n            self.styleKeys.map(function (i) { return self.hyphenateProperty(i, false); }).forEach(addStyleKeyIfNoneExists);\n            self.styleKeys.map(function (i) { return self.hyphenateProperty(i, true); }).forEach(addStyleKeyIfNoneExists);\n            self.DOMStyles = window.getComputedStyle(document.body, null);\n            self.styleKeys.concat(Object.keys(self.DOMStyles)).forEach(function (key) {\n                // unless this line is here, Object.keys() will not work on <instance>.style\n                publicStyleKeyIntf[key] = undefined;\n                Object.defineProperty(publicStyleKeyIntf, key, {\n                    get: function () {\n                        return self.getStyleProperty(key);\n                    },\n                    set: function (value) {\n                        if (self.initialized) {\n                            self.appliedInlineStyles[key] = value;\n                        }\n                        self.setStyleProperty(key, value);\n                    }\n                });\n            });\n            Object.defineProperty(self.intf, 'shadowRoot', {\n                get: function () {\n                    return self.shadowRoot;\n                }\n            });\n            Object.defineProperty(self.intf, 'activeCell', {\n                get: function () {\n                    return self.activeCell;\n                }\n            });\n            Object.defineProperty(self.intf, 'hasFocus', {\n                get: function () {\n                    return self.hasFocus;\n                }\n            });\n            Object.defineProperty(self.intf, 'style', {\n                get: function () {\n                    return publicStyleKeyIntf;\n                },\n                set: function (valueObject) {\n                    Object.keys(valueObject).forEach(function (key) {\n                        self.setStyleProperty(key, valueObject[key], true);\n                    });\n                    self.draw(true);\n                    self.dispatchEvent('stylechanged', {name: 'style', value: valueObject});\n                }\n            });\n            Object.defineProperty(self.intf, 'attributes', { value: {}});\n            Object.keys(self.attributes).forEach(function (key) {\n                Object.defineProperty(self.intf.attributes, key, {\n                    get: function () {\n                        return self.attributes[key];\n                    },\n                    set: function (value) {\n                        self.attributes[key] = value;\n                        if (key === 'name') {\n                            self.tryLoadStoredSettings();\n                        }\n                        self.draw(true);\n                        self.dispatchEvent('attributechanged', {name: key, value: value[key]});\n                    }\n                });\n            });\n            self.filters.string = function (value, filterFor) {\n                if (filterFor === self.attributes.blanksText) {\n                    return self.blankValues.includes(\n                        value == null ? value : String(value).trim()\n                    );\n                }\n\n                value = String(value);\n                var filterRegExp,\n                    regEnd = /\\/(i|g|m)*$/,\n                    pattern = regEnd.exec(filterFor),\n                    flags = pattern ? pattern[0].substring(1) : '',\n                    flagLength = flags.length;\n                self.invalidFilterRegEx = undefined;\n                if (filterFor.substring(0, 1) === '/' && pattern) {\n                    try {\n                        filterRegExp = new RegExp(filterFor.substring(1, filterFor.length - (flagLength + 1)), flags);\n                    } catch (e) {\n                        self.invalidFilterRegEx = e;\n                        return;\n                    }\n                    return filterRegExp.test(value);\n                }\n                return value.toString ? value.toString().toLocaleUpperCase()\n                    .indexOf(filterFor.toLocaleUpperCase()) !== -1 : false;\n            };\n            self.filters.number = function (value, filterFor) {\n                if (filterFor === self.attributes.blanksText) {\n                    return self.blankValues.includes(\n                        value == null ? value : String(value).trim()\n                    );\n                }\n\n                if (!filterFor) { return true; }\n                return value === filterFor;\n            };\n            ['formatters', 'filters', 'sorters'].forEach(self.initProp);\n            self.applyComponentStyle(false, self.intf);\n            self.reloadStoredValues();\n            if (self.args.data) {\n                self.intf.data = self.args.data;\n            }\n            if (self.intf.innerText || self.intf.textContent) {\n                if (self.intf.dataType === 'application/x-canvas-datagrid') {\n                    self.intf.dataType = 'application/json+x-canvas-datagrid';\n                }\n                self.intf.data = self.intf.innerText || self.intf.textContent;\n            }\n            if (self.args.schema) {\n                self.intf.schema = self.args.schema;\n            }\n            if (self.isChildGrid || !self.isComponent) {\n                requestAnimationFrame(function () { self.resize(true); });\n            } else {\n                self.resize(true);\n            }\n            self.initialized = true;\n            return self;\n        };\n        /**\n         * Removes focus from the grid.\n         * @memberof canvasDatagrid\n         * @name blur\n         * @method\n         */\n        self.intf.blur = function (e) {\n            self.hasFocus = false;\n        };\n        /**\n         * Focuses on the grid.\n         * @memberof canvasDatagrid\n         * @name focus\n         * @method\n         */\n        self.intf.focus = function () {\n            self.hasFocus = true;\n            self.controlInput.focus();\n        };\n        if (self.shadowRoot || self.isChildGrid) {\n            Object.defineProperty(self.intf, 'height', {\n                get: function () {\n                    if (self.shadowRoot) {\n                        return self.shadowRoot.height;\n                    }\n                    return self.parentNode.height;\n                },\n                set: function (value) {\n                    if (self.shadowRoot) {\n                        self.shadowRoot.height = value;\n                    } else {\n                        self.parentNode.height = value;\n                    }\n                    self.resize(true);\n                }\n            });\n            Object.defineProperty(self.intf, 'width', {\n                get: function () {\n                    if (self.shadowRoot) {\n                        return self.shadowRoot.width;\n                    }\n                    return self.parentNode.width;\n                },\n                set: function (value) {\n                    if (self.shadowRoot) {\n                        self.shadowRoot.width = value;\n                    } else {\n                        self.parentNode.width = value;\n                    }\n                    self.resize(true);\n                }\n            });\n            Object.defineProperty(self.intf, 'parentNode', {\n                get: function () {\n                    return self.parentNode;\n                },\n                set: function (value) {\n                    if (!self.isChildGrid) {\n                        throw new TypeError('Cannot set property parentNode which has only a getter');\n                    }\n                    self.parentNode = value;\n                }\n            });\n        }\n        Object.defineProperty(self.intf, 'visibleRowHeights', {\n            get: function () {\n                return self.visibleRowHeights;\n            }\n        });\n        Object.defineProperty(self.intf, 'openChildren', {\n            get: function () {\n                return self.openChildren;\n            }\n        });\n        Object.defineProperty(self.intf, 'childGrids', {\n            get: function () {\n                return Object.keys(self.childGrids).map(function (gridId) {\n                    return self.childGrids[gridId];\n                });\n            }\n        });\n        Object.defineProperty(self.intf, 'isChildGrid', {\n            get: function () {\n                return self.isChildGrid;\n            }\n        });\n        Object.defineProperty(self, 'cursor', {\n            get: function () {\n                return self.parentNodeStyle.cursor;\n            },\n            set: function (value) {\n                if (value === 'cell') { value = 'default'; }\n                if (self.currentCursor !== value) {\n                    self.parentNodeStyle.cursor = value;\n                    self.currentCursor = value;\n                }\n            }\n        });\n        Object.defineProperty(self.intf, 'orderDirection', {\n            get: function () {\n                return self.orderDirection;\n            },\n            set: function (value) {\n                if (value !== 'desc') {\n                    value = 'asc';\n                }\n                self.orderDirection = value;\n                self.order(self.orderBy, self.orderDirection);\n            }\n        });\n        Object.defineProperty(self.intf, 'orderBy', {\n            get: function () {\n                return self.orderBy;\n            },\n            set: function (value) {\n                if (self.getSchema().find(function (col) {\n                        return col.name === value;\n                    }) === undefined) {\n                    throw new Error('Cannot sort by unknown column name.');\n                }\n                self.orderBy = value;\n                self.order(self.orderBy, self.orderDirection);\n            }\n        });\n        if (self.isComponent) {\n            Object.defineProperty(self.intf, 'offsetHeight', {\n                get: function () {\n                    return self.canvas.offsetHeight;\n                }\n            });\n            Object.defineProperty(self.intf, 'offsetWidth', {\n                get: function () {\n                    return self.canvas.offsetWidth;\n                }\n            });\n        }\n        Object.defineProperty(self.intf, 'scrollHeight', {\n            get: function () {\n                return self.scrollBox.scrollHeight;\n            }\n        });\n        Object.defineProperty(self.intf, 'scrollWidth', {\n            get: function () {\n                return self.scrollBox.scrollWidth;\n            }\n        });\n        Object.defineProperty(self.intf, 'scrollTop', {\n            get: function () {\n                return self.scrollBox.scrollTop;\n            },\n            set: function (value) {\n                self.scrollBox.scrollTop = value;\n            }\n        });\n        Object.defineProperty(self.intf, 'scrollLeft', {\n            get: function () {\n                return self.scrollBox.scrollLeft;\n            },\n            set: function (value) {\n                self.scrollBox.scrollLeft = value;\n            }\n        });\n        Object.defineProperty(self.intf, 'sizes', {\n            get: function () {\n                return self.sizes;\n            }\n        });\n        Object.defineProperty(self.intf, 'parentDOMNode', {\n            get: function () {\n                return self.parentDOMNode;\n            }\n        });\n        Object.defineProperty(self.intf, 'input', {\n            get: function () {\n                return self.input;\n            }\n        });\n        Object.defineProperty(self.intf, 'controlInput', {\n            get: function () {\n                return self.controlInput;\n            }\n        });\n        Object.defineProperty(self.intf, 'currentCell', {\n            get: function () {\n                return self.currentCell;\n            }\n        });\n        Object.defineProperty(self.intf, 'visibleCells', {\n            get: function () {\n                return self.visibleCells;\n            }\n        });\n        Object.defineProperty(self.intf, 'visibleRows', {\n            get: function () {\n                return self.visibleRows;\n            }\n        });\n        Object.defineProperty(self.intf, 'selections', {\n            get: function () {\n                return self.selections;\n            }\n        });\n        Object.defineProperty(self.intf, 'dragMode', {\n            get: function () {\n                return self.dragMode;\n            }\n        });\n        Object.defineProperty(self.intf, 'changes', {\n            get: function () {\n                return self.changes;\n            }\n        });\n        self.intf.formatters = self.formatters;\n        Object.defineProperty(self.intf, 'dataType', {\n            get: function () {\n                return self.dataType;\n            },\n            set: function (value) {\n                if (!self.parsers[value]) {\n                    throw new Error('No parser for MIME type ' + value);\n                }\n                self.dataType = value;\n            }\n        });\n        self.eventNames.forEach(function (eventName) {\n            Object.defineProperty(self.intf, 'on' + eventName, {\n                get: function () {\n                    return self.componentL1Events[eventName];\n                },\n                set: function (value) {\n                    self.events[eventName] = [];\n                    self.componentL1Events[eventName] = value;\n                    if (!value) { return; }\n                    self.addEventListener(eventName, value);\n                }\n            });\n        });\n        Object.defineProperty(self.intf, 'frozenRow', {\n            get: function () {\n                return self.frozenRow;\n            },\n            set: function (val) {\n                if (isNaN(val)) {\n                    throw new TypeError('Expected value for frozenRow to be a number.');\n                }\n                if (self.visibleRows.length < val) {\n                    throw new RangeError('Cannot set a value larger than the number of visible rows.');\n                }\n                self.frozenRow = val;\n            }\n        });\n        Object.defineProperty(self.intf, 'frozenColumn', {\n            get: function () {\n                return self.frozenColumn;\n            },\n            set: function (val) {\n                if (isNaN(val)) {\n                    throw new TypeError('Expected value for frozenRow to be a number.');\n                }\n                if (self.getVisibleSchema().length < val) {\n                    throw new RangeError('Cannot set a value larger than the number of visible columns.');\n                }\n                self.frozenColumn = val;\n            }\n        });\n        Object.defineProperty(self.intf, 'scrollIndexRect', {\n            get: function () {\n                return {\n                    top: self.scrollIndexTop,\n                    right: self.scrollIndexRight,\n                    bottom: self.scrollIndexBottom,\n                    left: self.scrollIndexLeft\n                };\n            }\n        });\n        Object.defineProperty(self.intf, 'scrollPixelRect', {\n            get: function () {\n                return {\n                    top: self.scrollPixelTop,\n                    right: self.scrollPixelRight,\n                    bottom: self.scrollPixelBottom,\n                    left: self.scrollPixelLeft\n                };\n            }\n        });\n        Object.defineProperty(self.intf, 'rowOrder', {\n            get: function () {\n                return self.orders.rows;\n            },\n            set: function (val) {\n                if (!Array.isArray(val)) {\n                    throw new TypeError('Value must be an array.');\n                }\n                if (!self.data || val.length < self.data.length) {\n                    throw new RangeError('Array length must be equal to or greater than number of rows.');\n                }\n                self.orders.rows = val;\n            }\n        });\n        Object.defineProperty(self.intf, 'columnOrder', {\n            get: function () {\n                return self.orders.columns;\n            },\n            set: function (val) {\n                if (!Array.isArray(val)) {\n                    throw new TypeError('Value must be an array.');\n                }\n                if (val.length < self.getSchema().length) {\n                    throw new RangeError('Array length must be equal to or greater than number of columns.');\n                }\n                self.orders.columns = val;\n            }\n        });\n        Object.defineProperty(self.intf, 'selectionBounds', {\n            get: function () {\n                return self.getSelectionBounds();\n            }\n        });\n        Object.defineProperty(self.intf, 'selectedRows', {\n            get: function () {\n                return self.getSelectedData(true);\n            }\n        });\n        Object.defineProperty(self.intf, 'selectedCells', {\n            get: function () {\n                return self.getSelectedData();\n            }\n        });\n        Object.defineProperty(self.intf, 'visibleSchema', {\n            get: function () {\n                return self.getVisibleSchema().map(function eachDataRow(col) {\n                    return col;\n                });\n            }\n        });\n        Object.defineProperty(self.intf, 'treeGridAttributes', {\n            get: function () {\n                return self.treeGridAttributes;\n            },\n            set: function setTreeGridAttributes(value) {\n                self.treeGridAttributes = value;\n            }\n        });\n        Object.defineProperty(self.intf, 'cellGridAttributes', {\n            get: function () {\n                return self.cellGridAttributes;\n            },\n            set: function setCellGridAttributes(value) {\n                self.cellGridAttributes = value;\n            }\n        });\n        Object.defineProperty(self.intf, 'ctx', {\n            get: function () {\n                return self.ctx;\n            }\n        });\n        Object.defineProperty(self.intf, 'schema', {\n            get: function schemaGetter() {\n                return self.getSchema();\n            },\n            set: function schemaSetter(value) {\n                if (value === undefined) {\n                    // Issue #89 - allow schema to be set to initialized state\n                    self.schema = undefined;\n                    self.tempSchema = undefined;\n                    self.dispatchEvent('schemachanged', {schema: undefined});\n                    return;\n                }\n                if (!Array.isArray(value) || typeof value[0] !== 'object') {\n                    throw new Error('Schema must be an array of objects.');\n                }\n                if (value[0].name === undefined) {\n                    throw new Error('Expected schema to contain an object with at least a name property.');\n                }\n                self.schema = value.map(function eachSchemaColumn(column, index) {\n                    column.width = column.width || self.style.cellWidth;\n                    column.filter = column.filter || self.filter(column.type);\n                    column.type = column.type || 'string';\n                    column.index = index;\n                    column.columnIndex = index;\n                    column.rowIndex = -1;\n                    return column;\n                });\n                self.tempSchema = undefined;\n                self.createNewRowData();\n                self.createColumnOrders();\n                self.tryLoadStoredSettings();\n                if (self.storedSettings && typeof self.storedSettings.visibility === 'object') {\n                    self.schema.forEach(function hideEachSchemaColumn(column, index) {\n                        if (self.storedSettings && self.storedSettings.visibility[column.name] !== undefined) {\n                            column.hidden = !self.storedSettings.visibility[column.name];\n                        }\n                    });\n                }\n                self.resize(true);\n                self.dispatchEvent('schemachanged', {schema: self.schema});\n            }\n        });\n        /**\n         * Gets an array of currently registered MIME types.\n         * @memberof canvasDatagrid\n         * @name getDataTypes\n         * @method\n         */\n        self.intf.getTypes = function () {\n            return Object.keys(self.parsers);\n        };\n        self.parseInnerHtml = function (data) {\n            if (!data || /^ +$/.test(data)) {\n                return [];\n            }\n            try {\n                data = JSON.parse(data);\n            } catch (e) {\n                console.warn(Error('Cannot parse application/json+x-canvas-datagrid formated data. '\n                    + e.message + '  \\nNote: canvas-datagrid.innerHTML is for string data only.  '\n                    + 'Use the canvas-datagrid.data property to set object data.'));\n            }\n            return data;\n        };\n        self.parsers['application/json+x-canvas-datagrid'] = function (data, callback) {\n            self.parsers['application/x-canvas-datagrid'](self.parseInnerHtml(data), function (data, schema) {\n                return callback(data, schema);\n            });\n        };\n        self.parsers['application/x-canvas-datagrid'] = function (data, callback) {\n            return callback(data);\n        };\n        self.intf.parsers = self.parsers;\n        // send to dataType ETL function to extract from input data\n        // and transform into native [{}, {}] format\n        self.etl = function (data, callback) {\n            if (!self.intf.parsers[self.dataType]) {\n                throw new Error('Unsupported data type.');\n            }\n            self.intf.parsers[self.dataType](data, function (data, schema) {\n                if (Array.isArray(schema)) {\n                    self.schema = schema;\n                }\n                // Issue #89 - allow schema to be auto-created every time data is set\n                if (self.attributes.autoGenerateSchema) {\n                    self.schema = self.getSchemaFromData(data);\n                }\n                if (!self.schema) {\n                    self.tempSchema = self.getSchemaFromData(data);\n                }\n                if (self.getSchema()) {\n                    self.createColumnOrders();\n                }\n                // set the unfiltered/sorted data array\n                self.originalData = data;\n                // apply filter, sort, etc to incoming dataset\n                self.applyDataTransforms();\n                // empty data was set\n                if (!self.schema && (self.data || []).length === 0) {\n                    self.tempSchema = [{name: ''}];\n                }\n                self.fitColumnToValues('cornerCell', true);\n                if ((self.tempSchema && !self.schema) || self.attributes.autoGenerateSchema) {\n                    self.createColumnOrders();\n                    self.dispatchEvent('schemachanged', {schema: self.tempSchema});\n                }\n                callback();\n            });\n        };\n        Object.defineProperty(self.intf, 'data', {\n            get: function dataGetter() {\n                return self.data;\n            },\n            set: function dataSetter(value) {\n                self.etl(value, function () {\n                    self.changes = [];\n                    self.createNewRowData();\n                    if (self.attributes.autoResizeColumns && self.data.length > 0\n                            && self.storedSettings === undefined) {\n                        self.autosize();\n                    }\n                    // set the header column to fit the numbers in it\n                    self.fitColumnToValues('cornerCell', true);\n                    self.createRowOrders();\n                    self.tryLoadStoredSettings();\n                    self.dispatchEvent('datachanged', {data: self.data});\n                    self.resize(true);\n                });\n            }\n        });\n        self.initScrollBox = function () {\n            var sHeight = 0,\n                sWidth = 0,\n                scrollTop = 0,\n                scrollLeft = 0,\n                scrollHeight = 0,\n                scrollWidth = 0,\n                scrollBoxHeight = 20,\n                scrollBoxWidth = 20;\n            function setScrollTop(value, preventScrollEvent) {\n                if (isNaN(value)) {\n                    throw new Error('ScrollTop value must be a number');\n                }\n                if (value < 0) {\n                    value = 0;\n                }\n                if (value > scrollHeight) {\n                    value = scrollHeight;\n                }\n                if (scrollHeight < 0) {\n                    value = 0;\n                }\n                scrollTop = value;\n                if (!preventScrollEvent) {\n                    self.scroll();\n                }\n            }\n            function setScrollLeft(value, preventScrollEvent) {\n                if (isNaN(value)) {\n                    throw new Error('ScrollLeft value must be a number');\n                }\n                if (value < 0) {\n                    value = 0;\n                }\n                if (value > scrollWidth) {\n                    value = scrollWidth;\n                }\n                if (scrollWidth < 0) {\n                    value = 0;\n                }\n                scrollLeft = value;\n                if (!preventScrollEvent) {\n                    self.scroll();\n                }\n            }\n            self.scrollBox.toString = function () {\n                return '{\"width\": ' + scrollWidth.toFixed(2)\n                    + ', \"height\": ' + scrollHeight.toFixed(2)\n                    + ', \"left\": ' + scrollLeft.toFixed(2)\n                    + ', \"top\": ' + scrollTop.toFixed(2)\n                    + ', \"widthRatio\": ' + self.scrollBox.widthBoxRatio.toFixed(5)\n                    + ', \"heightRatio\": ' + self.scrollBox.heightBoxRatio.toFixed(5) + '}';\n            };\n            self.scrollBox.scrollTo = function (x, y, supressDrawEvent) {\n                setScrollLeft(x, true);\n                setScrollTop(y, supressDrawEvent);\n            };\n            Object.defineProperty(self.scrollBox, 'scrollBoxHeight', {\n                get: function () {\n                    return scrollBoxHeight;\n                },\n                set: function (value) {\n                    scrollBoxHeight = value;\n                }\n            });\n            Object.defineProperty(self.scrollBox, 'scrollBoxWidth', {\n                get: function () {\n                    return scrollBoxWidth;\n                },\n                set: function (value) {\n                    scrollBoxWidth = value;\n                }\n            });\n            Object.defineProperty(self.scrollBox, 'height', {\n                get: function () {\n                    return sHeight;\n                },\n                set: function (value) {\n                    sHeight = value;\n                }\n            });\n            Object.defineProperty(self.scrollBox, 'width', {\n                get: function () {\n                    return sWidth;\n                },\n                set: function (value) {\n                    sWidth = value;\n                }\n            });\n            Object.defineProperty(self.scrollBox, 'scrollTop', {\n                get: function () {\n                    return scrollTop;\n                },\n                set: setScrollTop\n            });\n            Object.defineProperty(self.scrollBox, 'scrollLeft', {\n                get: function () {\n                    return scrollLeft;\n                },\n                set: setScrollLeft\n            });\n            Object.defineProperty(self.scrollBox, 'scrollHeight', {\n                get: function () {\n                    return scrollHeight;\n                },\n                set: function (value) {\n                    if (scrollTop > value) {\n                        scrollTop = Math.max(value, 0);\n                    }\n                    scrollHeight = value;\n                }\n            });\n            Object.defineProperty(self.scrollBox, 'scrollWidth', {\n                get: function () {\n                    return scrollWidth;\n                },\n                set: function (value) {\n                    if (scrollLeft > value) {\n                        scrollLeft = Math.max(value, 0);\n                    }\n                    scrollWidth = value;\n                }\n            });\n        };\n        return;\n    };\n});\n","/*jslint browser: true, unparam: true, todo: true, evil: true*/\n/*globals Reflect: false, HTMLElement: true, define: true, MutationObserver: false, requestAnimationFrame: false, performance: false, btoa: false*/\ndefine([\n    './component',\n    './defaults',\n    './draw',\n    './events',\n    './touch',\n    './intf',\n    './contextMenu',\n    './dom',\n    './publicMethods'\n], function context(component) {\n    'use strict';\n    component = component();\n    var modules = Array.prototype.slice.call(arguments);\n    function Grid(args) {\n        args = args || {};\n        var self = {};\n        self.isComponent = args.component === undefined;\n        self.isChildGrid = args.parentNode && /canvas-datagrid-(cell|tree)/.test(args.parentNode.nodeType);\n        if (self.isChildGrid) {\n            self.intf = {};\n        } else {\n            self.intf = self.isComponent ? eval('Reflect.construct(HTMLElement, [], new.target)')\n                : document.createElement('canvas');\n        }\n        self.args = args;\n        self.intf.args = args;\n        self.applyComponentStyle = component.applyComponentStyle;\n        self.hyphenateProperty = component.hyphenateProperty;\n        self.dehyphenateProperty = component.dehyphenateProperty;\n        self.createGrid = function grid(args) {\n            args.component = false;\n            return new Grid(args);\n        };\n        modules.forEach(function (module) {\n            module(self);\n        });\n        if (self.isChildGrid) {\n            self.shadowRoot = args.parentNode.shadowRoot;\n            self.parentNode = args.parentNode;\n        } else {\n            self.shadowRoot = self.intf.attachShadow({mode: 'open'});\n            self.parentNode = self.shadowRoot;\n        }\n        self.init();\n        return self.intf;\n    }\n    if (window.HTMLElement) {\n        Grid.prototype = Object.create(window.HTMLElement.prototype);\n    }\n    // export web component\n    if (window.customElements) {\n        Grid.observedAttributes = component.getObservableAttributes();\n        Grid.prototype.disconnectedCallback = component.disconnectedCallback;\n        Grid.prototype.attributeChangedCallback = component.attributeChangedCallback;\n        Grid.prototype.connectedCallback = component.connectedCallback;\n        Grid.prototype.adoptedCallback = component.adoptedCallback;\n        window.customElements.define('canvas-datagrid', Grid);\n    }\n    // export global\n    if (window && !window.canvasDatagrid && !window.require) {\n        window.canvasDatagrid = function (args) { return new Grid(args); };\n    }\n    // export amd loader\n    module.exports = function grid(args) {\n        args = args || {};\n        var i, tKeys = ['style', 'formatters', 'sorters', 'filters',\n                    'treeGridAttributes', 'cellGridAttributes', 'data', 'schema'];\n        if (window.customElements) {\n            i = document.createElement('canvas-datagrid');\n            Object.keys(args).forEach(function (argKey) {\n                // set data and parentNode after everything else\n                if (argKey === 'data') { return; }\n                if (argKey === 'parentNode') { return; }\n                // top level keys in args\n                if (tKeys.indexOf(argKey) !== -1) {\n                    tKeys.forEach(function (tKey) {\n                        if (args[tKey] === undefined || tKey !== argKey) { return; }\n                        if (['formatters', 'sorters', 'filters'].indexOf(argKey) !== -1) {\n                            if (typeof args[tKey] === 'object' && args[tKey] !== null) {\n                                Object.keys(args[tKey]).forEach(function (sKey) {\n                                    i[tKey][sKey] = args[tKey][sKey];\n                                });\n                            }\n                        } else {\n                            i[tKey] = args[tKey];\n                        }\n                    });\n                    return;\n                }\n                // all others are attribute level keys\n                i.attributes[argKey] = args[argKey];\n            });\n            if (args.data) {\n                i.data = args.data;\n            }\n            // add to the dom very last to avoid redraws\n            if (args.parentNode) {\n                args.parentNode.appendChild(i);\n            }\n            return i;\n        }\n        args.component = false;\n        i = new Grid(args);\n        if (args.parentNode && args.parentNode.appendChild) {\n            args.parentNode.appendChild(i);\n        }\n        return i;\n    };\n    return module.exports;\n});\n","/*jslint browser: true, unparam: true, todo: true*/\n/*globals define: true, MutationObserver: false, requestAnimationFrame: false, performance: false, btoa: false*/\ndefine([], function () {\n    'use strict';\n    return function (self) {\n        /**\n         * Converts a integer into a letter A - ZZZZZ...\n         * @memberof canvasDatagrid\n         * @name integerToAlpha\n         * @method\n         * @param {column} n The number to convert.\n         */\n        self.integerToAlpha = function (n) {\n            var ordA = 'a'.charCodeAt(0),\n                ordZ = 'z'.charCodeAt(0),\n                len = ordZ - ordA + 1,\n                s = '';\n            while (n >= 0) {\n                s = String.fromCharCode(n % len + ordA) + s;\n                n = Math.floor(n / len) - 1;\n            }\n            return s;\n        };\n        /**\n         * Inserts a new column before the specified index into the schema.\n         * @tutorial schema\n         * @memberof canvasDatagrid\n         * @name insertColumn\n         * @method\n         * @param {column} c The column to insert into the schema.\n         * @param {number} index The index of the column to insert before.\n         */\n        self.insertColumn = function (c, index) {\n            var s = self.getSchema();\n            if (s.length < index) {\n                throw new Error('Index is beyond the length of the schema.');\n            }\n            self.validateColumn(c, s);\n            s.splice(index, 0, c);\n            self.data.forEach(function (row) {\n                self.applyDefaultValue(row, c);\n            });\n            self.intf.schema = s;\n        };\n        /**\n         * Deletes a column from the schema at the specified index.\n         * @memberof canvasDatagrid\n         * @name deleteColumn\n         * @tutorial schema\n         * @method\n         * @param {number} index The index of the column to delete.\n         */\n        self.deleteColumn = function (index) {\n            var s = self.getSchema();\n            // remove data matching this column name from data\n            self.data.forEach(function (row) {\n                delete row[s[index].name];\n            });\n            s.splice(index, 1);\n            self.intf.schema = s;\n        };\n        /**\n         * Adds a new column into the schema.\n         * @tutorial schema\n         * @memberof canvasDatagrid\n         * @name addColumn\n         * @method\n         * @param {column} c The column to add to the schema.\n         */\n        self.addColumn = function (c) {\n            var s = self.getSchema();\n            self.validateColumn(c, s);\n            s.push(c);\n            self.data.forEach(function (row) {\n                self.applyDefaultValue(row, c);\n            });\n            self.intf.schema = s;\n        };\n        /**\n         * Deletes a row from the dataset at the specified index.\n         * @memberof canvasDatagrid\n         * @name deleteRow\n         * @method\n         * @param {number} index The index of the row to delete.\n         */\n        self.deleteRow = function (index) {\n            self.originalData.splice(index, 1);\n            self.setFilter();\n            self.resize(true);\n        };\n        /**\n         * Inserts a new row into the dataset before the specified index.\n         * @memberof canvasDatagrid\n         * @name insertRow\n         * @method\n         * @param {object} d data.\n         * @param {number} index The index of the row to insert before.\n         */\n        self.insertRow = function (d, index) {\n            if (self.originalData.length < index) {\n                throw new Error('Index is beyond the length of the dataset.');\n            }\n            self.originalData.splice(index, 0, d);\n            self.getSchema().forEach(function (c) {\n                if (d[c.name] === undefined) {\n                    self.applyDefaultValue(self.originalData[index], c);\n                }\n            });\n            self.setFilter();\n            self.resize(true);\n        };\n        /**\n         * Adds a new row into the dataset.\n         * @memberof canvasDatagrid\n         * @name addRow\n         * @method\n         * @param {object} d data.\n         */\n        self.addRow = function (d) {\n            self.originalData.push(d);\n            self.getSchema().forEach(function (c) {\n                if (d[c.name] === undefined) {\n                    self.applyDefaultValue(self.originalData[self.originalData.length - 1], c);\n                }\n            });\n            self.setFilter();\n            self.resize(true);\n        };\n        /**\n         * Sets the height of a given row by index number.\n         * @memberof canvasDatagrid\n         * @name setRowHeight\n         * @method\n         * @param {number} rowIndex The index of the row to set.\n         * @param {number} height Height to set the row to.\n         */\n        self.setRowHeight = function (rowIndex, height) {\n            self.sizes.rows[rowIndex] = height;\n            self.draw(true);\n        };\n        /**\n         * Sets the width of a given column by index number.\n         * @memberof canvasDatagrid\n         * @name setColumnWidth\n         * @method\n         * @param {number} colIndex The index of the column to set.\n         * @param {number} width Width to set the column to.\n         */\n        self.setColumnWidth = function (colIndex, width) {\n            self.sizes.columns[colIndex] = width;\n            self.draw(true);\n        };\n        /**\n         * Removes any changes to the width of the columns due to user or api interaction, setting them back to the schema or style default.\n         * @memberof canvasDatagrid\n         * @name resetColumnWidths\n         * @tutorial schema\n         * @method\n         */\n        self.resetColumnWidths = function () {\n            self.sizes.columns = {};\n            self.draw(true);\n        };\n        /**\n         * Removes any changes to the height of the rows due to user or api interaction, setting them back to the schema or style default.\n         * @memberof canvasDatagrid\n         * @name resetRowHeights\n         * @tutorial schema\n         * @method\n         */\n        self.resetRowHeights = function () {\n            self.sizes.rows = {};\n            self.draw(true);\n        };\n        /**\n         * Sets the value of the filter.\n         * @memberof canvasDatagrid\n         * @name setFilter\n         * @method\n         * @param {string} column Name of the column to filter.\n         * @param {string} value The value to filter for.\n         */\n        self.setFilter = function (column, value) {\n            if (column === undefined && value === undefined) {\n                self.columnFilters = {};\n            } else if (column && (value === '' || value === undefined)) {\n                delete self.columnFilters[column];\n            } else {\n                self.columnFilters[column] = value;\n            }\n            self.applyDataTransforms();\n        };\n        /**\n         * Returns the number of pixels to scroll down to line up with row rowIndex.\n         * @memberof canvasDatagrid\n         * @name findRowScrollTop\n         * @method\n         * @param {number} rowIndex The row index of the row to scroll find.\n         */\n        self.findRowScrollTop = function (rowIndex) {\n            if (self.scrollCache.y[rowIndex] === undefined) { throw new RangeError('Row index out of range.'); }\n            return self.scrollCache.y[rowIndex];\n        };\n        /**\n         * Returns the number of pixels to scroll to the left to line up with column columnIndex.\n         * @memberof canvasDatagrid\n         * @name findColumnScrollLeft\n         * @method\n         * @param {number} columnIndex The column index of the column to find.\n         */\n        self.findColumnScrollLeft = function (columnIndex) {\n            var i = Math.max(columnIndex - 1, 0);\n            if (self.scrollCache.x[i] === undefined) { throw new Error('Column index out of range.'); }\n            return self.scrollCache.x[i] - self.getColummnWidth(self.orders.columns[columnIndex]);\n        };\n        /**\n         * Scrolls to the cell at columnIndex x, and rowIndex y.  If you define both rowIndex and columnIndex additional calculations can be made to center the cell using the target cell's height and width.  Defining only one rowIndex or only columnIndex will result in simpler calculations.\n         * @memberof canvasDatagrid\n         * @name gotoCell\n         * @method\n         * @param {number} x The column index of the cell to scroll to.\n         * @param {number} y The row index of the cell to scroll to.\n         * @param {number} [offsetX=0] Percentage offset the cell should be from the left edge (not including headers).  The default is 0, meaning the cell will appear at the left edge. Valid values are 0 through 1. 1 = Left, 0 = Right, 0.5 = Center.\n         * @param {number} [offsetY=0] Percentage offset the cell should be from the top edge (not including headers).  The default is 0, meaning the cell will appear at the top edge. Valid values are 0 through 1. 1 = Bottom, 0 = Top, 0.5 = Center.\n         */\n        self.gotoCell = function (x, y, offsetX, offsetY) {\n            var targetX = x === undefined ? undefined : self.findColumnScrollLeft(x),\n                targetY = y === undefined ? undefined : self.findRowScrollTop(y),\n                cell,\n                sbw = self.scrollBox.width - (self.scrollBox.verticalBarVisible ? self.style.scrollBarWidth : 0),\n                sbh = self.scrollBox.height - (self.scrollBox.horizontalBarVisible ? self.style.scrollBarWidth : 0);\n            offsetX = offsetX === undefined ? 0 : offsetX;\n            offsetY = offsetY === undefined ? 0 : offsetY;\n            targetX -= sbw * offsetX;\n            targetY -= sbh * offsetY;\n            if (x !== undefined && y !== undefined) {\n                self.scrollBox.scrollTo(targetX, targetY);\n                requestAnimationFrame(function () {\n                    cell = self.getVisibleCellByIndex(x, y);\n                    // HACK: just don't offset if the target cell cannot be seen\n                    // TODO: offset does not work on very small grids, not sure why\n                    if (!cell) { return; }\n                    targetX += cell.width * offsetX;\n                    targetY += cell.height * offsetY;\n                    self.scrollBox.scrollTo(targetX, targetY);\n                });\n            } else if (x !== undefined) {\n                self.scrollBox.scrollLeft = targetX;\n            } else if (y !== undefined) {\n                self.scrollBox.scrollTop = targetY;\n            }\n        };\n        /**\n         * Scrolls the row y.\n         * @memberof canvasDatagrid\n         * @name gotoRow\n         * @method\n         * @param {number} y The row index of the cell to scroll to.\n         */\n        self.gotoRow = function (y) {\n            self.gotoCell(0, y);\n        };\n        /**\n         * Scrolls the cell at cell x, row y into view if it is not already.\n         * @memberof canvasDatagrid\n         * @name scrollIntoView\n         * @method\n         * @param {number} x The column index of the cell to scroll into view.\n         * @param {number} y The row index of the cell to scroll into view.\n         * @param {number} [offsetX=0] Percentage offset the cell should be from the left edge (not including headers).  The default is 0, meaning the cell will appear at the left edge. Valid values are 0 through 1. 1 = Left, 0 = Right, 0.5 = Center.\n         * @param {number} [offsetY=0] Percentage offset the cell should be from the top edge (not including headers).  The default is 0, meaning the cell will appear at the top edge. Valid values are 0 through 1. 1 = Bottom, 0 = Top, 0.5 = Center.\n         */\n        self.scrollIntoView = function (x, y, offsetX, offsetY) {\n            if (self.visibleCells.filter(function (cell) {\n                    return (cell.rowIndex === y || y === undefined)\n                        && (cell.columnIndex === x || x === undefined)\n                        && cell.x > 0\n                        && cell.y > 0\n                        && cell.x + cell.width < self.width\n                        && cell.y + cell.height < self.height;\n                }).length === 0) {\n                self.gotoCell(x, y, offsetX, offsetY);\n            }\n        };\n        /**\n         * Sets the active cell. Requires redrawing.\n         * @memberof canvasDatagrid\n         * @name setActiveCell\n         * @method\n         * @param {number} x The column index of the cell to set active.\n         * @param {number} y The row index of the cell to set active.\n         */\n        self.setActiveCell = function (x, y) {\n            if (x < 0) { x = 0; }\n            if (y < 0) { y = 0; }\n            self.activeCell = {\n                rowIndex: y,\n                columnIndex: x\n            };\n        };\n        /**\n         * Removes the selection.\n         * @memberof canvasDatagrid\n         * @name selectNone\n         * @param {boolean} dontDraw Suppress the draw method after the selection change.\n         * @method\n         */\n        self.selectNone = function (dontDraw) {\n            self.selections = [];\n            self.dispatchEvent('selectionchanged', {\n                selectedData: self.getSelectedData(),\n                selections: self.selections,\n                selectionBounds: self.selectionBounds\n            });\n            if (dontDraw) { return; }\n            self.draw();\n        };\n        /**\n         * Selects every visible cell.\n         * @memberof canvasDatagrid\n         * @name selectAll\n         * @param {boolean} dontDraw Suppress the draw method after the selection change.\n         * @method\n         */\n        self.selectAll = function (dontDraw) {\n            self.selectArea({\n                top: 0,\n                left: -1,\n                right: self.getSchema().length - 1,\n                bottom: self.data.length - 1\n            });\n            if (dontDraw) { return; }\n            self.draw();\n        };\n        /**\n         * Returns true if the selected columnIndex is selected on every row.\n         * @memberof canvasDatagrid\n         * @name isColumnSelected\n         * @method\n         * @param {number} columnIndex The column index to check.\n         */\n        self.isColumnSelected = function (columnIndex) {\n            var colIsSelected = true;\n            self.data.forEach(function (row, rowIndex) {\n                if (!self.selections[rowIndex] || self.selections[rowIndex].indexOf(self.orders.columns[columnIndex]) === -1) {\n                    colIsSelected = false;\n                }\n            });\n            return colIsSelected;\n        };\n        /**\n         * Runs the defined method on each selected cell.\n         * @memberof canvasDatagrid\n         * @name forEachSelectedCell\n         * @method\n         * @param {number} fn The function to execute.  The signature of the function is: (data, rowIndex, columnName).\n         * @param {number} expandToRow When true the data in the array is expanded to the entire row.\n         */\n        self.forEachSelectedCell = function (fn, expandToRow) {\n            var d = [], s = expandToRow ? self.getSchema() : self.getVisibleSchema(), l = self.data.length;\n            self.selections.forEach(function (row, index) {\n                if (index === l) { return; }\n                if (row.length === 0) {\n                    d[index] = null;\n                    return;\n                }\n                d[index] = {};\n                row.forEach(function (col) {\n                    if (col === -1 || !s[col]) { return; }\n                    fn(self.data, index, s[col].name);\n                });\n            });\n        };\n        /**\n         * Selects a column.\n         * @memberof canvasDatagrid\n         * @name selectColumn\n         * @method\n         * @param {number} columnIndex The column index to select.\n         * @param {boolean} toggleSelectMode When true, behaves as if you were holding control/command when you clicked the column.\n         * @param {boolean} shift When true, behaves as if you were holding shift when you clicked the column.\n         * @param {boolean} supressSelectionchangedEvent When true, prevents the selectionchanged event from firing.\n         */\n        self.selectColumn = function (columnIndex, ctrl, shift, supressEvent) {\n            var s, e, x;\n            function addCol(i) {\n                self.data.forEach(function (row, rowIndex) {\n                    self.selections[rowIndex] = self.selections[rowIndex] || [];\n                    if (self.selections[rowIndex].indexOf(i) === -1) {\n                        self.selections[rowIndex].push(i);\n                    }\n                });\n            }\n            function removeCol(i) {\n                self.data.forEach(function (row, rowIndex) {\n                    self.selections[rowIndex] = self.selections[rowIndex] || [];\n                    if (self.selections[rowIndex].indexOf(i) !== -1) {\n                        self.selections[rowIndex].splice(self.selections[rowIndex].indexOf(i), 1);\n                    }\n                });\n            }\n            if (shift) {\n                if (!self.activeCell) { return; }\n                s = Math.min(self.activeCell.columnIndex, columnIndex);\n                e = Math.max(self.activeCell.columnIndex, columnIndex);\n                for (x = s; e > x; x += 1) {\n                    addCol(x);\n                }\n            }\n            if (!ctrl && !shift) {\n                self.selections = [];\n                self.activeCell.columnIndex = columnIndex;\n                self.activeCell.rowIndex = self.scrollIndexTop;\n            }\n            if (ctrl && self.isColumnSelected(columnIndex)) {\n                removeCol(columnIndex);\n            } else {\n                addCol(columnIndex);\n            }\n            if (supressEvent) { return; }\n            self.dispatchEvent('selectionchanged', {\n                selectedData: self.getSelectedData(),\n                selections: self.selections,\n                selectionBounds: self.getSelectionBounds()\n            });\n        };\n        /**\n         * Selects a row.\n         * @memberof canvasDatagrid\n         * @name selectRow\n         * @method\n         * @param {number} rowIndex The row index to select.\n         * @param {boolean} ctrl When true, behaves as if you were holding control/command when you clicked the row.\n         * @param {boolean} shift When true, behaves as if you were holding shift when you clicked the row.\n         * @param {boolean} supressSelectionchangedEvent When true, prevents the selectionchanged event from firing.\n         */\n        self.selectRow = function (rowIndex, ctrl, shift, supressEvent) {\n            var x, st, en, s = self.getVisibleSchema();\n            function de() {\n                if (supressEvent) { return; }\n                self.dispatchEvent('selectionchanged', {\n                    selectedData: self.getSelectedData(),\n                    selections: self.selections,\n                    selectionBounds: self.selectionBounds\n                });\n            }\n            function addRow(ri) {\n                self.selections[ri] = [];\n                self.selections[ri].push(-1);\n                s.forEach(function (col, index) {\n                    self.selections[ri].push(self.orders.columns.indexOf(col.index));\n                });\n            }\n            if (self.dragAddToSelection === false || self.dragObject === undefined) {\n                if (self.selections[rowIndex] && self.selections[rowIndex].length - 1 === s.length) {\n                    if (ctrl) {\n                        self.selections[rowIndex] = [];\n                        de();\n                        return;\n                    }\n                }\n            }\n            if (self.dragAddToSelection === true || self.dragObject === undefined) {\n                if (shift && self.dragObject === undefined) {\n                    if (!self.activeCell) { return; }\n                    st = Math.min(self.activeCell.rowIndex, rowIndex);\n                    en = Math.max(self.activeCell.rowIndex, rowIndex);\n                    for (x = st; en >= x; x += 1) {\n                        addRow(x);\n                    }\n                } else {\n                    addRow(rowIndex);\n                }\n            }\n            de();\n        };\n        /**\n         * Collapse a tree grid by row index.\n         * @memberof canvasDatagrid\n         * @name collapseTree\n         * @method\n         * @param {number} index The index of the row to collapse.\n         */\n        self.collapseTree = function (rowIndex) {\n            self.dispatchEvent('collapsetree', {\n                childGrid: self.childGrids[rowIndex],\n                data: self.data[rowIndex],\n                rowIndex: rowIndex\n            });\n            self.openChildren[rowIndex].blur();\n            self.openChildren[rowIndex].dispose();\n            delete self.openChildren[rowIndex];\n            delete self.sizes.trees[rowIndex];\n            delete self.childGrids[rowIndex];\n            self.dispatchEvent('resizerow', {\n                cellHeight: self.style.cellHeight\n            });\n            self.resize(true);\n            self.draw(true);\n        };\n        /**\n         * Expands a tree grid by row index.\n         * @memberof canvasDatagrid\n         * @name expandTree\n         * @method\n         * @param {number} index The index of the row to expand.\n         */\n        self.expandTree = function (rowIndex) {\n            var trArgs = self.args.treeGridAttributes || {},\n                columnHeaderCellHeight = self.getColumnHeaderCellHeight(),\n                rowHeaderCellWidth = self.sizes.columns.cornerCell || self.style.rowHeaderCellWidth,\n                h = self.sizes.trees[rowIndex] || self.style.treeGridHeight,\n                treeGrid;\n            if (!self.childGrids[rowIndex]) {\n                trArgs.debug = self.attributes.debug;\n                trArgs.name = self.attributes.saveAppearance ? self.attributes.name + 'tree' + rowIndex : undefined;\n                trArgs.style = trArgs.style || self.style;\n                trArgs.parentNode = {\n                    parentGrid: self.intf,\n                    nodeType: 'canvas-datagrid-tree',\n                    offsetHeight: h,\n                    offsetWidth: self.width - rowHeaderCellWidth,\n                    header: { width: self.width - rowHeaderCellWidth },\n                    offsetLeft: rowHeaderCellWidth,\n                    offsetTop: columnHeaderCellHeight,\n                    offsetParent: self.intf.parentNode,\n                    parentNode: self.intf.parentNode,\n                    style: 'tree',\n                    data: self.data[rowIndex]\n                };\n                treeGrid = self.createGrid(trArgs);\n                self.childGrids[rowIndex] = treeGrid;\n            }\n            treeGrid = self.childGrids[rowIndex];\n            treeGrid.visible = true;\n            self.dispatchEvent('expandtree', {\n                treeGrid: treeGrid,\n                data: self.data[rowIndex],\n                rowIndex: rowIndex\n            });\n            self.openChildren[rowIndex] = treeGrid;\n            self.sizes.trees[rowIndex] = h;\n            self.dispatchEvent('resizerow', {height: self.style.cellHeight});\n            self.resize(true);\n        };\n        /**\n         * Toggles tree grid open and close by row index.\n         * @memberof canvasDatagrid\n         * @name toggleTree\n         * @method\n         * @param {number} index The index of the row to toggle.\n         */\n        self.toggleTree = function (rowIndex) {\n            var i = self.openChildren[rowIndex];\n            if (i) {\n                return self.collapseTree(rowIndex);\n            }\n            self.expandTree(rowIndex);\n        };\n        /**\n         * Returns a header from the schema by name.\n         * @memberof canvasDatagrid\n         * @name getHeaderByName\n         * @tutorial schema\n         * @method\n         * @returns {header} header with the selected name, or undefined.\n         * @param {string} name The name of the column to resize.\n         */\n        self.getHeaderByName = function (name) {\n            var x, i = self.getSchema();\n            for (x = 0; x < i.length; x += 1) {\n                if (i[x].name === name) {\n                    return i[x];\n                }\n            }\n        };\n        /**\n         * Resizes a column to fit the longest value in the column. Call without a value to resize all columns.\n         * Warning, can be slow on very large record sets (1m records ~3-5 seconds on an i7).\n         * @memberof canvasDatagrid\n         * @name fitColumnToValues\n         * @method\n         * @param {string} name The name of the column to resize.\n         */\n        self.fitColumnToValues = function (name, internal) {\n            if (!self.canvas) { return; }\n            self.sizes.columns[name === 'cornerCell' ? -1 : self.getHeaderByName(name).index]\n                = Math.max(self.findColumnMaxTextLength(name), self.style.minColumnWidth);\n            if (!internal) {\n                self.resize();\n                self.draw(true);\n            }\n        };\n        /**\n         * Checks if a cell is currently visible.\n         * @memberof canvasDatagrid\n         * @name isCellVisible\n         * @overload\n         * @method\n         * @returns {boolean} when true, the cell is visible, when false the cell is not currently drawn.\n         * @param {number} columnIndex The column index of the cell to check.\n         * @param {number} rowIndex The row index of the cell to check.\n         */\n        self.isCellVisible = function (cell, rowIndex) {\n            // overload\n            if (rowIndex !== undefined) {\n                return self.visibleCells.filter(function (c) {\n                    return c.columnIndex === cell && c.rowIndex === rowIndex;\n                }).length > 0;\n            }\n            var x, l = self.visibleCells.length;\n            for (x = 0; x < l; x += 1) {\n                if (cell.x === self.visibleCells[x].x && cell.y === self.visibleCells[x].y) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        /**\n         * Sets the order of the data.\n         * @memberof canvasDatagrid\n         * @name order\n         * @method\n         * @param {number} columnName Name of the column to be sorted.\n         * @param {string} direction `asc` for ascending or `desc` for descending.\n         * @param {function} [sortFunction] When defined, override the default sorting method defined in the column's schema and use this one.\n         * @param {bool} [dontSetStorageData] Don't store this setting for future use.\n         */\n        self.order = function (columnName, direction, sortFunction, dontSetStorageData) {\n            var f,\n                c = self.getSchema().filter(function (col) {\n                    return col.name === columnName;\n                });\n            if (self.dispatchEvent('beforesortcolumn', {name: columnName, direction: direction})) { return; }\n            self.orderBy = columnName;\n            self.orderDirection = direction;\n            if (!self.data || self.data.length === 0) { return; }\n            if (c.length === 0) {\n                throw new Error('Cannot sort.  No such column name');\n            }\n            f = sortFunction || c[0].sorter || self.sorters[c[0].type];\n            if (!f && c[0].type !== undefined) {\n                console.warn('Cannot sort type \"%s\" falling back to string sort.', c[0].type);\n            }\n            self.orderings.add(columnName, direction, (typeof f === 'function' ? f : self.sorters.string));\n            self.orderings.sort();\n            self.dispatchEvent('sortcolumn', {name: columnName, direction: direction});\n            self.draw(true);\n            if (dontSetStorageData) { return; }\n            self.setStorageData();\n        };\n        self.isInGrid = function (e) {\n            if (e.x < 0\n                    || e.x > self.width\n                    || e.y < 0\n                    || e.y > self.height) {\n                return false;\n            }\n            return true;\n        };\n        /**\n         * Moves the current selection relative to the its current position.  Note: this method does not move the selected data, just the selection itself.\n         * @memberof canvasDatagrid\n         * @name moveSelection\n         * @method\n         * @param {number} offsetX The number of columns to offset the selection.\n         * @param {number} offsetY The number of rows to offset the selection.\n         */\n        self.moveSelection = function (offsetX, offsetY) {\n            var sel = [];\n            self.selections.forEach(function (row, rowIndex) {\n                sel[rowIndex + offsetY] = [];\n                row.forEach(function (colIndex) {\n                    sel[rowIndex + offsetY].push(colIndex + offsetX);\n                });\n            });\n            self.selections = sel;\n        };\n        /**\n         * Moves data in the provided selection to another position in the grid.  Moving data off the edge of the schema (columns/x) will truncate data.\n         * @memberof canvasDatagrid\n         * @name moveTo\n         * @method\n         * @param {array} sel 2D array representing selected rows and columns.  `canvasDatagrid.selections` is in this format and can be used here.\n         * @param {number} x The column index to start inserting the selection at.\n         * @param {number} y The row index to start inserting the selection at.\n         */\n        self.moveTo = function (sel, x, y) {\n            var d = self.getSelectedData(),\n                s = self.getVisibleSchema(),\n                l = sel.length,\n                xi,\n                maxRowLength = -Infinity,\n                minXi = Infinity,\n                yi = y - 1;\n            sel.forEach(function (row, index) {\n                if (index === l) { return; }\n                if (row.length === 0) { return; }\n                minXi = Math.min(self.getVisibleColumnIndexOf(x), minXi);\n                maxRowLength = Math.max(maxRowLength, row.length);\n                row.forEach(function (colIndex) {\n                    // intentional redef of colIndex\n                    colIndex = self.getVisibleColumnIndexOf(colIndex);\n                    if (!s[colIndex]) { return; }\n                    if (!self.data[index]) { self.data[index] = {}; }\n                    self.data[index][s[colIndex].name] = null;\n                });\n            });\n            sel.forEach(function (row, index) {\n                var lastSourceIndex;\n                yi += 1;\n                xi = self.getVisibleColumnIndexOf(x);\n                row.forEach(function (colIndex, cidx) {\n                    colIndex = self.getVisibleColumnIndexOf(colIndex);\n                    if (cidx > 0) {\n                        // this confusing bit of nonsense figures out\n                        // if the selection has skipped cells\n                        xi += colIndex - lastSourceIndex;\n                    }\n                    lastSourceIndex = colIndex;\n                    if (colIndex === -1\n                            || !s[xi]\n                            || !s[colIndex]\n                            || self.data.length - 1 < yi\n                            || yi < 0) { return; }\n                    if (!self.data[yi]) { self.data[yi] = {}; }\n                    self.data[yi][s[xi].name] = d[index][s[colIndex].name];\n                });\n            });\n        };\n        /**\n         * Checks if a given column is visible.\n         * @memberof canvasDatagrid\n         * @name isColumnVisible\n         * @method\n         * @returns {boolean} When true, the column is visible.\n         * @param {number} columnIndex Column index.\n         */\n        self.isColumnVisible = function (columnIndex) {\n            return self.visibleCells.filter(function (c) {\n                return c.columnIndex === columnIndex;\n            }).length > 0;\n        };\n        /**\n         * Checks if a given row is visible.\n         * @memberof canvasDatagrid\n         * @name isRowVisible\n         * @method\n         * @returns {boolean} When true, the row is visible.\n         * @param {number} rowIndex Row index.\n         */\n        self.isRowVisible = function (rowIndex) {\n            return self.visibleCells.filter(function (c) {\n                return c.rowIndex === rowIndex;\n            }).length > 0;\n        };\n        /**\n         * Gets the cell at columnIndex and rowIndex.\n         * @memberof canvasDatagrid\n         * @name getVisibleCellByIndex\n         * @method\n         * @returns {cell} cell at the selected location.\n         * @param {number} x Column index.\n         * @param {number} y Row index.\n         */\n        self.getVisibleCellByIndex = function (x, y) {\n            return self.visibleCells.filter(function (c) {\n                return c.columnIndex === x && c.rowIndex === y;\n            })[0];\n        };\n        /**\n         * Gets the cell at grid pixel coordinate x and y.  Author's note.  This function ties drawing and events together.  This is a very complex function and is core to the component.\n         * @memberof canvasDatagrid\n         * @name getCellAt\n         * @method\n         * @returns {cell} cell at the selected location.\n         * @param {number} x Number of pixels from the left.\n         * @param {number} y Number of pixels from the top.\n         */\n        self.getCellAt = function (x, y, useTouchScrollZones) {\n            function getBorder(entitiy) {\n                if (entitiy.x + entitiy.width - (self.attributes.borderResizeZone * 0.4) < x && entitiy.x + entitiy.width + (self.attributes.borderResizeZone * 0.6) > x) {\n                    return 'r';\n                }\n                if (entitiy.x - (self.attributes.borderResizeZone * 0.4) < x && entitiy.x + (self.attributes.borderResizeZone * 0.6) > x) {\n                    return 'l';\n                }\n                if (entitiy.y + entitiy.height - (self.attributes.borderResizeZone * 0.4) < y && entitiy.y + entitiy.height + (self.attributes.borderResizeZone * 0.6) > y) {\n                    return 'b';\n                }\n                if (entitiy.y - (self.attributes.borderResizeZone * 0.4) < y && entitiy.y + (self.attributes.borderResizeZone * 0.6) > y) {\n                    return 't';\n                }\n            }\n            if (!self.visibleCells) { return; }\n            var border,\n                tsz = useTouchScrollZones ? self.attributes.touchScrollZone : 0,\n                moveMode = self.attributes.borderDragBehavior === 'move',\n                i,\n                l = self.visibleCells.length,\n                moveBorder,\n                xBorderBehavior = moveMode ? self.cursorGrab : 'ew-resize',\n                yBorderBehavior = moveMode ? self.cursorGrab : 'ns-resize',\n                cell,\n                entitiy;\n            if (!self.visibleCells || !self.visibleCells.length) { return; }\n            self.hasFocus = true;\n            if (!(y < self.height\n                && y > 0\n                && x < self.width\n                && x > 0)) {\n                self.hasFocus = false;\n                return {\n                    dragContext: 'inherit',\n                    context: 'inherit'\n                };\n            }\n            for (i = 0; i < l; i += 1) {\n                cell = self.visibleCells[i];\n                // interactive dimensions of the cell.  used for touch \"over size\" zones\n                entitiy = {\n                    x: cell.x,\n                    y: cell.y,\n                    height: cell.height,\n                    width: cell.width\n                };\n                if (useTouchScrollZones && /(vertical|horizontal)-scroll-/.test(cell.style)) {\n                    entitiy.x -= tsz;\n                    entitiy.y -= tsz;\n                    entitiy.height += tsz;\n                    entitiy.width += tsz;\n                }\n                if (entitiy.x - self.style.cellBorderWidth < x\n                        && entitiy.x + entitiy.width + self.style.cellBorderWidth > x\n                        && entitiy.y - self.style.cellBorderWidth < y\n                        && entitiy.y + entitiy.height + self.style.cellBorderWidth > y) {\n                    if (/frozen-row-marker/.test(cell.style)) {\n                        cell.dragContext = cell.style;\n                        cell.context = 'row-resize';\n                        return cell;\n                    }\n                    if (/frozen-column-marker/.test(cell.style)) {\n                        cell.dragContext = cell.style;\n                        cell.context = 'col-resize';\n                        return cell;\n                    }\n                    if (/selection-handle-/.test(cell.style)) {\n                        cell.dragContext = cell.style;\n                        cell.context = 'crosshair';\n                        return cell;\n                    }\n                    if (/vertical-scroll-(bar|box)/.test(cell.style)) {\n                        cell.dragContext = 'vertical-scroll-box';\n                        cell.context = 'vertical-scroll-box';\n                        cell.isScrollBar = true;\n                        cell.isVerticalScrollBar = true;\n                        if (y > self.scrollBox.box.v.y + self.scrollBox.scrollBoxHeight) {\n                            cell.dragContext = 'vertical-scroll-bottom';\n                            cell.context = 'vertical-scroll-bottom';\n                        } else if (y < self.scrollBox.box.v.y) {\n                            cell.dragContext = 'vertical-scroll-top';\n                            cell.context = 'vertical-scroll-top';\n                        }\n                        self.cursor = 'default';\n                        return cell;\n                    }\n                    if (/horizontal-scroll-(bar|box)/.test(cell.style)) {\n                        cell.dragContext = 'horizontal-scroll-box';\n                        cell.context = 'horizontal-scroll-box';\n                        cell.isScrollBar = true;\n                        cell.isHorizontalScrollBar = true;\n                        if (x > self.scrollBox.box.h.x + self.scrollBox.scrollBoxWidth) {\n                            cell.dragContext = 'horizontal-scroll-right';\n                            cell.context = 'horizontal-scroll-right';\n                        } else if (x < self.scrollBox.box.h.x) {\n                            cell.dragContext = 'horizontal-scroll-left';\n                            cell.context = 'horizontal-scroll-left';\n                        }\n                        self.cursor = 'default';\n                        return cell;\n                    }\n                    border = getBorder(entitiy);\n                    // check if the border of this cell is the border of the selection and if so show move cursor in move mode\n                    moveBorder = moveMode && cell.selectionBorder && cell.selectionBorder.indexOf(border) !== -1;\n                    if (['l', 'r'].indexOf(border) !== -1\n                            && (self.attributes.allowColumnResize || moveBorder)\n                            && ((self.attributes.allowColumnResizeFromCell && cell.isNormal) || !cell.isNormal || moveBorder)\n                            && ((self.attributes.allowRowHeaderResize && (cell.isRowHeader || cell.isCorner)) || !(cell.isRowHeader && cell.isCorner))) {\n                        if (((cell.isColumnHeader || cell.isCorner) || (self.attributes.allowColumnResizeFromCell && cell.isNormal)) && border === 'r') {\n                            cell.context = 'ew-resize';\n                            cell.dragContext = 'ew-resize';\n                            return cell;\n                        }\n                        if (!(cell.isColumnHeader || cell.isCorner) && moveBorder) {\n                            cell.context = xBorderBehavior;\n                            cell.dragContext = border + '-move';\n                            return cell;\n                        }\n                    }\n                    if (['t', 'b'].indexOf(border) !== -1\n                            && cell.rowIndex > -1\n                            && (self.attributes.allowRowResize || moveBorder)\n                            && ((self.attributes.allowRowResizeFromCell && cell.isNormal) || !cell.isNormal || moveBorder)\n                            && !cell.isColumnHeader) {\n                        if (((cell.isRowHeader || cell.isCorner) || (self.attributes.allowRowResizeFromCell && cell.isNormal)) && border === 'b') {\n                            cell.context = 'ns-resize';\n                            cell.dragContext = 'ns-resize';\n                            return cell;\n                        }\n                        if (!(cell.isRowHeader || cell.isCorner) && moveBorder) {\n                            cell.context = yBorderBehavior;\n                            cell.dragContext = border + '-move';\n                            return cell;\n                        }\n                    }\n                    if (cell.style === 'columnHeaderCell') {\n                        cell.context = 'cell';\n                        cell.dragContext = 'column-reorder';\n                        return cell;\n                    }\n                    if (cell.style === 'rowHeaderCell') {\n                        if ((self.attributes.rowGrabZoneSize + (cell.y - self.style.cellBorderWidth) < y)\n                                || !self.attributes.allowRowReordering) {\n                            cell.dragContext = 'cell';\n                            cell.context = 'cell';\n                        } else {\n                            cell.context = self.cursorGrab;\n                            cell.dragContext = 'row-reorder';\n                        }\n                        return cell;\n                    }\n                    if (cell.isGrid) {\n                        self.hasFocus = false;\n                        cell.dragContext = 'cell-grid';\n                        cell.context = 'cell-grid';\n                        return cell;\n                    }\n                    if (cell.style === 'tree-grid') {\n                        self.hasFocus = false;\n                        cell.dragContext = 'tree';\n                        cell.context = 'tree';\n                        return cell;\n                    }\n                    cell.dragContext = 'cell';\n                    cell.context = 'cell';\n                    return cell;\n                }\n            }\n            self.hasFocus = true;\n            self.cursor = 'default';\n            return {\n                dragContext: 'background',\n                context: 'background',\n                style: 'background',\n                isBackground: true\n            };\n        };\n        /**\n         * Gets the bounds of current selection. \n         * @returns {rect} selection.\n         * @memberof canvasDatagrid\n         * @name getSelectionBounds\n         * @method\n         */\n        self.getSelectionBounds = function () {\n            var low = {x: Infinity, y: Infinity},\n                high = {x: -Infinity, y: -Infinity};\n            self.selections.forEach(function (row, rowIndex) {\n                var maxCol, minCol;\n                low.y = rowIndex < low.y ? rowIndex : low.y;\n                high.y = rowIndex > high.y ? rowIndex : high.y;\n                maxCol = Math.max.apply(null, row);\n                minCol = Math.min.apply(null, row);\n                low.x = minCol < low.x ? minCol : low.x;\n                high.x = maxCol > high.x ? maxCol : high.x;\n            });\n            return {\n                top: low.y,\n                left: low.x,\n                bottom: high.y,\n                right: high.x\n            };\n        };\n        /**\n         * Returns an auto generated schema based on data structure.\n         * @memberof canvasDatagrid\n         * @name getSchemaFromData\n         * @method\n         * @tutorial schema\n         * @returns {schema} schema A schema based on the first item in the data array.\n         */\n        self.getSchemaFromData = function (d) {\n            d = d || self.data;\n            return Object.keys(d[0] || {' ': ''}).map(function mapEachSchemaColumn(key, index) {\n                var type = self.getBestGuessDataType(key, d),\n                    i = {\n                        name: key,\n                        title: isNaN(parseInt(key, 10)) ? key : self.integerToAlpha(key).toUpperCase(),\n                        index: index,\n                        columnIndex: index,\n                        type: type,\n                        filter: self.filter(type)\n                    };\n                if (self.storedSettings\n                        && self.storedSettings.visibility\n                        && self.storedSettings.visibility[i.name] !== undefined) {\n                    i.hidden = !self.storedSettings.visibility[i.name];\n                }\n                return i;\n            });\n        };\n        /**\n         * Clears the change log grid.changes that keeps track of changes to the data set.\n         * This does not undo changes or alter data it is simply a convince array to keep\n         * track of changes made to the data since last this method was called.\n         * @memberof canvasDatagrid\n         * @name clearChangeLog\n         * @method\n         */\n        self.clearChangeLog = function () {\n            self.changes = [];\n        };\n        /**\n         * Selects an area of the grid.\n         * @memberof canvasDatagrid\n         * @name selectArea\n         * @method\n         * @param {rect} bounds A rect object representing the selected values.\n         */\n        self.selectArea = function (bounds, ctrl) {\n            self.selectionBounds = bounds || self.selectionBounds;\n            var ev, x, y, s = self.getSchema();\n            if (!ctrl) {\n                self.selections = [];\n            }\n            if (self.selectionBounds.top < -1\n                    || self.selectionBounds.bottom > self.data.length\n                    || self.selectionBounds.left < -1\n                    || self.selectionBounds.right > s.length) {\n                throw new Error('Impossible selection area');\n            }\n            for (x = self.selectionBounds.top; x <= self.selectionBounds.bottom; x += 1) {\n                self.selections[x] = [];\n                for (y = self.selectionBounds.left; y <= self.selectionBounds.right; y += 1) {\n                    if (self.selections[x].indexOf(y) === -1) {\n                        self.selections[x].push(y);\n                    }\n                }\n            }\n            ev = {\n                selections: self.selections,\n                selectionBounds: self.selectionBounds\n            };\n            Object.defineProperty(ev, 'selectedData', {\n                get: function () {\n                    return self.getSelectedData();\n                }\n            });\n            self.dispatchEvent('selectionchanged', ev);\n        };\n        /**\n         * Returns the maximum text width for a given column by column name.\n         * @memberof canvasDatagrid\n         * @name findColumnMaxTextLength\n         * @method\n         * @returns {number} The number of pixels wide the maximum width value in the selected column.\n         * @param {string} name The name of the column to calculate the value's width of.\n         */\n        self.findColumnMaxTextLength = function (name) {\n            var m = -Infinity;\n            if (name === 'cornerCell') {\n                self.ctx.font = self.style.rowHeaderCellFont;\n                return self.ctx.measureText((self.data.length + (self.attributes.showNewRow ? 1 : 0)).toString()).width\n                    + self.style.autosizePadding + self.style.autosizeHeaderCellPadding\n                    + self.style.rowHeaderCellPaddingRight\n                    + self.style.rowHeaderCellPaddingLeft\n                    + (self.attributes.tree ? self.style.treeArrowWidth\n                        + self.style.treeArrowMarginLeft + self.style.treeArrowMarginRight : 0);\n            }\n            var formatter = null;\n            self.getSchema().forEach(function (col) {\n                if (col.name !== name) { return; }\n                self.ctx.font = self.style.columnHeaderCellFont;\n                var t = self.ctx.measureText(col.title || col.name).width\n                    + self.style.headerCellPaddingRight\n                    + self.style.headerCellPaddingLeft;\n                m = t > m ? t : m;\n                formatter = self.formatters[col.type];\n            });\n            self.data.forEach(function (row) {\n                var text = row[name];\n                if (formatter) {\n                    text = formatter({cell:{value:text}});\n                }\n                self.ctx.font = self.style.cellFont;\n                var t = self.ctx.measureText(text).width\n                    + self.style.cellPaddingRight\n                    + self.style.cellPaddingLeft + self.style.cellAutoResizePadding;\n                m = t > m ? t : m;\n            });\n            return m;\n        };\n        /**\n         * Gets the total width of all header columns.\n         * @memberof canvasDatagrid\n         * @name getHeaderWidth\n         * @method\n         */\n        self.getHeaderWidth = function () {\n            return self.getVisibleSchema().reduce(function (total, header) {\n                return total + parseInt(header.width || self.style.cellWidth, 10);\n            }, 0);\n        };\n        /**\n         * Gets the height of a row by index.\n         * @memberof canvasDatagrid\n         * @name getRowHeight\n         * @method\n         * @param {number} rowIndex The row index to lookup.\n         */\n        self.getRowHeight = function (rowIndex) {\n            return ((self.sizes.rows[rowIndex]\n                    || self.style.cellHeight) * self.scale);\n        };\n        /**\n         * Gets the width of a column by index.\n         * @memberof canvasDatagrid\n         * @name getColummnWidth\n         * @method\n         * @param {number} columnIndex The column index to lookup.\n         */\n        self.getColummnWidth = function (columnIndex) {\n            return ((self.sizes.columns[columnIndex]\n                    || self.getSchema()[columnIndex].width\n                    || self.style.cellWidth) * self.scale);\n        };\n        self.formatters.string = function cellFormatterString(e) {\n            return e.cell.value !== undefined ? e.cell.value : '';\n        };\n        self.formatters.rowHeaderCell = self.formatters.string;\n        self.formatters.headerCell = self.formatters.string;\n        self.formatters.number = self.formatters.string;\n        self.formatters.int = self.formatters.string;\n        self.formatters.html = self.formatters.string;\n        self.sorters.string = function (columnName, direction) {\n            var asc = direction === 'asc';\n            return function (a, b) {\n                if (a[columnName] === undefined || a[columnName] === null) {\n                    return 1;\n                }\n                if (b[columnName] === undefined || b[columnName] === null) {\n                    return 0;\n                }\n                if (asc) {\n                    if (!a[columnName].localeCompare) { return 1; }\n                    return a[columnName].localeCompare(b[columnName]);\n                }\n                if (!b[columnName].localeCompare) { return 1; }\n                return b[columnName].localeCompare(a[columnName]);\n            };\n        };\n        self.sorters.number = function (columnName, direction) {\n            var asc = direction === 'asc';\n            return function (a, b) {\n                if (asc) {\n                    return a[columnName] - b[columnName];\n                }\n                return b[columnName] - a[columnName];\n            };\n        };\n        self.sorters.date = function (columnName, direction) {\n            var asc = direction === 'asc';\n            return function (a, b) {\n                if (asc) {\n                    return new Date(a[columnName]).getTime()\n                        - new Date(b[columnName]).getTime();\n                }\n                return new Date(b[columnName]).getTime()\n                        - new Date(a[columnName]).getTime();\n            };\n        };\n    };\n});\n","/*jslint browser: true, unparam: true, todo: true, plusplus: true*/\n/*globals define: true, MutationObserver: false, requestAnimationFrame: false, performance: false, btoa: false*/\ndefine([], function () {\n    'use strict';\n    return function (self) {\n        var touchTimerMs = 50,\n            debounceTouchMove,\n            touchMoving,\n            touchScrollTimeout;\n        self.scrollAnimation = {};\n        self.touchDelta = {};\n        self.touchAnimateTo = {};\n        self.animationFrames = 0;\n        self.getTouchPos = function (e, touchIndex) {\n            var t = touchIndex ? e.touches[touchIndex] : e.touches[0],\n                rect = self.canvas.getBoundingClientRect(),\n                pos;\n            if (!t) { return; }\n            pos = {\n                x: t.clientX - rect.left,\n                y: t.clientY - rect.top\n            };\n            if (self.isChildGrid) {\n                pos.x -= self.canvasOffsetLeft;\n                pos.y -= self.canvasOffsetTop;\n            }\n            return {\n                x: pos.x,\n                y: pos.y,\n                rect: rect\n            };\n        };\n        // shamelessly stolen from from https://gist.github.com/gre/1650294\n        self.easingFunctions = {\n            linear: function (t) { return t; },\n            easeInQuad: function (t) { return t * t; },\n            easeOutQuad: function (t) { return t * (2 - t); },\n            easeInOutQuad: function (t) { return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t; },\n            easeInCubic: function (t) { return t * t * t; },\n            easeOutCubic: function (t) { return (--t) * t * t + 1; },\n            easeInOutCubic: function (t) { return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1; },\n            easeInQuart: function (t) { return t * t * t * t; },\n            easeOutQuart: function (t) { return 1 - (--t) * t * t * t; },\n            easeInOutQuart: function (t) { return t < 0.5 ? 8 * t  * t  * t * t : 1 - 8 * (--t) * t * t * t; },\n            easeInQuint: function (t) { return t * t * t * t * t; },\n            easeOutQuint: function (t) { return 1 + (--t) * t *  t * t * t; },\n            easeInOutQuint: function (t) { return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t; }\n        };\n        self.easing = function (t, b, c, d) {\n            return c * self.easingFunctions[self.attributes.touchEasingMethod](t / d) + b;\n        };\n        self.calculatePPSTimed = function () {\n            self.xPPST = -((self.touchDelta.x - self.touchSigmaTimed.x) / (self.touchDelta.t - self.touchSigmaTimed.t));\n            self.yPPST = -((self.touchDelta.y - self.touchSigmaTimed.y) / (self.touchDelta.t - self.touchSigmaTimed.t));\n            self.touchSigmaTimed = {\n                x: self.touchDelta.x,\n                y: self.touchDelta.y,\n                t: performance.now()\n            };\n        };\n        self.calculatePPS = function () {\n            self.xPPS = -((self.touchDelta.x - self.touchSigma.x) / (self.touchDelta.t - self.touchSigma.t));\n            self.yPPS = -((self.touchDelta.y - self.touchSigma.y) / (self.touchDelta.t - self.touchSigma.t));\n            self.touchSigma = {\n                x: self.touchDelta.x,\n                y: self.touchDelta.y,\n                t: performance.now()\n            };\n        };\n        self.touchEndAnimation = function () {\n            if (!self.canvas || !self.scrollBox.scrollTo) { return requestAnimationFrame(self.touchEndAnimation); }\n            var n = performance.now(),\n                d = self.attributes.touchReleaseAnimationDurationMs,\n                t;\n            t = n - self.touchDelta.t;\n            self.animationFrames += 1;\n            self.scrollAnimation.x = self.easing(t, self.touchDelta.scrollLeft, self.touchAnimateTo.x, d);\n            self.scrollAnimation.y = self.easing(t, self.touchDelta.scrollTop, self.touchAnimateTo.y, d);\n            if (t > d || (self.scrollAnimation.y === self.scrollBox.scrollTop\n                    && self.scrollAnimation.x === self.scrollBox.scrollLeft) || self.stopAnimation) {\n                return;\n            }\n            self.scrollBox.scrollTo(self.scrollAnimation.x, self.scrollAnimation.y);\n            requestAnimationFrame(self.touchEndAnimation);\n        };\n        self.touchEditCell = function (cell) {\n            self.beginEditAt(cell.columnIndex, cell.rowIndex);\n        };\n        self.touchCell = function (e) {\n            return function () {\n                clearInterval(self.calculatePPSTimer);\n                var i, pos = self.getTouchPos(e);\n                if (Math.abs(self.touchDelta.x) + Math.abs(self.touchDelta.y) < self.attributes.touchDeadZone) {\n                    i = self.getCellAt(pos.x, pos.y);\n                    if (!i) { return; }\n                    if (self.touchingCell && self.touchingCell.rowIndex === i.rowIndex\n                            && self.touchingCell.columnIndex === i.columnIndex) {\n                        self.touchEditCell(i);\n                        return;\n                    }\n                    if (self.input && self.input.editCell) {\n                        self.endEdit();\n                    }\n                    self.touchingCell = i;\n                    self.selectArea({\n                        top: i.rowIndex,\n                        bottom: i.rowIndex,\n                        left: i.columnIndex,\n                        right: i.columnIndex\n                    });\n                    self.draw(true);\n                }\n            };\n        };\n        self.touchstart = function (e) {\n            if (e.changedTouches[0]) {\n                self.touchStart = self.getTouchPos(e);\n                self.startingCell = self.getCellAt(self.touchStart.x, self.touchStart.y, true);\n            }\n            if (self.dispatchEvent('touchstart', {NativeEvent: e, cell: self.startingCell})) { return; }\n            self.disposeContextMenu();\n            clearInterval(self.calculatePPSTimer);\n            clearTimeout(self.touchContextTimeout);\n            self.touchStartEvent = e;\n            self.stopAnimation = true;\n            self.animationFrames = 0;\n            self.stopPropagation(e);\n            e.preventDefault();\n            if (e.touches.length === 1 && e.changedTouches[0] && !self.zoomAltered) {\n                self.touchLength = 1;\n                self.touchStart = self.touchStart || self.touchStart1;\n                self.touchScrollStart = {\n                    x: self.scrollBox.scrollLeft,\n                    y: self.scrollBox.scrollTop,\n                    t: performance.now()\n                };\n                self.touchDelta = {\n                    x: 0,\n                    y: 0,\n                    scrollLeft: self.scrollBox.scrollLeft,\n                    scrollTop: self.scrollBox.scrollTop,\n                    t: self.touchScrollStart.t\n                };\n                self.touchSigma = {\n                    x: self.touchDelta.x,\n                    y: self.touchDelta.y,\n                    t: self.touchDelta.t\n                };\n                self.touchSigmaTimed = {\n                    x: self.touchDelta.x,\n                    y: self.touchDelta.y,\n                    t: self.touchDelta.t\n                };\n                self.touchContextTimeout = setTimeout(function () {\n                    self.contextmenuEvent(e, self.touchStart);\n                }, self.attributes.touchContextMenuTimeMs);\n                self.calculatePPSTimer = setInterval(self.calculatePPSTimed, touchTimerMs);\n                if (self.startingCell && (self.startingCell.isGrid || ['tree', 'inherit'].indexOf(self.startingCell.context) !== -1)) {\n                    self.hasFocus = false;\n                    return;\n                }\n                self.hasFocus = true;\n                if (self.startingCell.isHeader) {\n                    if (self.startingCell.isRowHeader) {\n                        self.selectArea({\n                            top: self.startingCell.rowIndex,\n                            bottom: self.startingCell.rowIndex,\n                            left: 0,\n                            right: self.getVisibleSchema().length - 1,\n                        });\n                        self.draw(true);\n                    } else if (self.startingCell.isColumnHeader) {\n                        if (self.attributes.columnHeaderClickBehavior === 'sort') {\n                            if (self.orderBy === self.startingCell.header.name) {\n                                self.orderDirection = self.orderDirection === 'asc' ? 'desc' : 'asc';\n                            } else {\n                                self.orderDirection = 'asc';\n                            }\n                            self.order(self.startingCell.header.name, self.orderDirection);\n                        }\n                        if (self.attributes.columnHeaderClickBehavior === 'select') {\n                            self.selectArea({\n                                top: 0,\n                                bottom: self.data.length - 1,\n                                left: self.startingCell.columnIndex,\n                                right: self.startingCell.columnIndex,\n                            });\n                            self.draw(true);\n                        }\n                    }\n                    self.touchEndEvents(e);\n                    return;\n                }\n            }\n            if (self.zoomAltered) { return; }\n            document.body.addEventListener('touchmove', self.touchmove, {passive: false});\n            document.body.addEventListener('touchend', self.touchend, false);\n            document.body.addEventListener('touchcancel', self.touchcancel, false);\n            self.draw(true);\n        };\n        self.touchSelect = function (cell, handleType) {\n            if (cell.rowIndex === undefined || cell.columnIndex === undefined) { return; }\n            self.touchSelecting = true;\n            var bounds = self.getSelectionBounds();\n            if (handleType === 'selection-handle-bl'\n                    && cell.rowIndex >= bounds.top\n                    && cell.columnIndex <= bounds.right) {\n                bounds.bottom = cell.rowIndex;\n                bounds.left = cell.columnIndex;\n            } else if (handleType === 'selection-handle-tl'\n                    && cell.rowIndex <= bounds.bottom\n                    && cell.columnIndex <= bounds.right) {\n                bounds.top = cell.rowIndex;\n                bounds.left = cell.columnIndex;\n            } else if (handleType === 'selection-handle-tr'\n                    && cell.rowIndex <= bounds.bottom\n                    && cell.columnIndex >= bounds.left) {\n                bounds.top = cell.rowIndex;\n                bounds.right = cell.columnIndex;\n            } else if (handleType === 'selection-handle-br'\n                    && cell.rowIndex >= bounds.top\n                    && cell.columnIndex >= bounds.left) {\n                bounds.bottom = cell.rowIndex;\n                bounds.right = cell.columnIndex;\n            }\n            if (self.attributes.selectionMode === 'row' || cell.rowIndex === -1) {\n                bounds.left = 0;\n                bounds.right = self.getSchema().length - 1;\n            } else {\n                bounds.left = Math.max(0, bounds.left);\n            }\n            self.selectArea(bounds);\n            self.draw(true);\n        };\n        function touchMove(e) {\n            var ch, rw, rScrollZone, lScrollZone, bScrollZone, tScrollZone, sbw, t1, t2;\n            if (self.dispatchEvent('beforetouchmove', {NativeEvent: e})) { return; }\n            clearTimeout(touchScrollTimeout);\n            if (e.changedTouches[0]) {\n                self.touchPosition = self.getTouchPos(e);\n            }\n            if (e.changedTouches[1]) {\n                self.touchPosition1 = self.getTouchPos(e, 1);\n            }\n            if (Math.abs(self.touchDelta.x) + Math.abs(self.touchDelta.y) > self.attributes.touchDeadZone) {\n                clearTimeout(self.touchContextTimeout);\n            }\n            if (e.touches.length === 2 && self.touchPosition && self.touchPosition1) {\n                t1 = self.touchPosition.y;\n                t2 = self.touchPosition1.y;\n                if (!self.zoomDeltaStart) {\n                    self.zoomDeltaStart = Math.abs(t1 - t2);\n                    self.startScale = self.scale;\n                }\n                self.touchLength = 2;\n                self.scaleDelta = self.zoomDeltaStart - Math.abs(t1 - t2);\n                self.scale = self.startScale - (self.scaleDelta * self.attributes.touchZoomSensitivity);\n                self.scale = Math.min(Math.max(self.scale, self.attributes.touchZoomMin), self.attributes.touchZoomMax);\n                self.zoomAltered = true;\n                self.resize(true);\n                self.resizeChildGrids();\n                return;\n            }\n            if (self.zoomAltered) { return; }\n            self.touchLength = 1;\n            self.touchPosition = self.touchPosition || self.touchPosition1;\n            ch = self.getColumnHeaderCellHeight();\n            rw = self.getRowHeaderCellWidth();\n            rScrollZone = self.width - self.style.scrollBarWidth - self.touchPosition.x < self.attributes.selectionScrollZone;\n            lScrollZone = self.touchPosition.x - rw < self.attributes.selectionScrollZone;\n            bScrollZone = self.height - self.style.scrollBarWidth - self.touchPosition.y < self.attributes.selectionScrollZone;\n            tScrollZone = self.touchPosition.y - ch < self.attributes.selectionScrollZone;\n            sbw = self.style.scrollBarWidth;\n            function touchScroll() {\n                var x = self.scrollBox.scrollLeft,\n                    y = self.scrollBox.scrollTop;\n                x += (rScrollZone ? self.attributes.selectionScrollIncrement : 0);\n                y += (bScrollZone ? self.attributes.selectionScrollIncrement : 0);\n                y -= (tScrollZone ? self.attributes.selectionScrollIncrement : 0);\n                x -= (lScrollZone ? self.attributes.selectionScrollIncrement : 0);\n                self.scrollBox.scrollTo(x, y);\n                touchScrollTimeout = setTimeout(touchScroll, self.attributes.scrollRepeatRate);\n            }\n            e.stopPropagation();\n            self.touchDelta = {\n                x: self.touchPosition.x - self.touchStart.x,\n                y: self.touchPosition.y - self.touchStart.y,\n                scrollLeft: self.scrollBox.scrollLeft,\n                scrollTop: self.scrollBox.scrollTop,\n                t: performance.now()\n            };\n            self.currentCell = self.getCellAt(self.touchPosition.x, self.touchPosition.y);\n            self.dispatchEvent('touchmove', {NativeEvent: e, cell: self.currentCell});\n            self.calculatePPS();\n            self.touchDuration = performance.now() - self.touchScrollStart.t;\n            self.stopAnimation = true;\n            self.animationFrames = 0;\n            if (self.touchSelecting && (rScrollZone || lScrollZone || tScrollZone || bScrollZone)) {\n                touchScroll();\n            }\n            if (/vertical-scroll-/.test(self.startingCell.style)) {\n                self.scrollBox.scrollTop = self.scrollBox.scrollHeight\n                    * ((self.touchPosition.y - ch - sbw) / (self.scrollBox.height - sbw - ch));\n                return;\n            }\n            if (/horizontal-scroll-/.test(self.startingCell.style)) {\n                self.scrollBox.scrollLeft = self.scrollBox.scrollWidth\n                    * ((self.touchPosition.x - rw - sbw) / (self.scrollBox.width - sbw - rw));\n                return;\n            }\n            if (/selection-handle-/.test(self.startingCell.style)) {\n                self.touchSelect(self.currentCell, self.startingCell.style);\n                return;\n            }\n            self.scrollBox.scrollTo(self.touchScrollStart.x - self.touchDelta.x,\n                self.touchScrollStart.y - self.touchDelta.y);\n        };\n        self.touchmove = function (e) {\n            if (touchMoving) {\n                return;\n            }\n            requestAnimationFrame(function () {\n                touchMoving = true;\n                touchMove(e);\n                touchMoving = false;\n            });\n        };\n        self.touchEndEvents = function (e) {\n            self.zoomDeltaStart = undefined;\n            self.touchSelecting = false;\n            clearInterval(self.touchScrollTimeout);\n            clearInterval(self.touchContextTimeout);\n            clearInterval(self.calculatePPSTimer);\n            e.stopPropagation();\n            document.body.removeEventListener('touchmove', self.touchmove, {passive: false});\n            document.body.removeEventListener('touchend', self.touchend, false);\n            document.body.removeEventListener('touchcancel', self.touchcancel, false);\n        };\n        self.touchend = function (e) {\n            if (self.dispatchEvent('touchend', {NativeEvent: e, cell: self.currentCell})) { return; }\n            self.zoomDeltaStart = undefined;\n            if (e.changedTouches[0]) {\n                self.touchPosition = undefined;\n            }\n            if (e.changedTouches[1]) {\n                self.touchPosition1 = undefined;\n            }\n            if (self.zoomAltered) {\n                if (e.touches.length === 0) {\n                    self.zoomAltered = false;\n                }\n                return;\n            }\n            var dz = Math.abs(self.touchDelta.x) + Math.abs(self.touchDelta.y) < self.attributes.touchDeadZone;\n            if (isNaN(self.xPPS)) {\n                self.xPPS = 0;\n            }\n            if (isNaN(self.yPPS)) {\n                self.yPPS = 0;\n            }\n            if (isNaN(self.xPPST)) {\n                self.xPPST = 0;\n            }\n            if (isNaN(self.yPPST)) {\n                self.yPPST = 0;\n            }\n            self.touchAnimateTo.x = self.xPPS * self.attributes.touchReleaseAcceleration;\n            self.touchAnimateTo.y = self.yPPS * self.attributes.touchReleaseAcceleration;\n            self.calculatePPSTimed();\n            if (dz && !self.contextMenu) {\n                self.touchCell(self.touchStartEvent)();\n            } else if (self.animationFrames === 0\n                    && (Math.abs(self.xPPST) > self.attributes.scrollAnimationPPSThreshold\n                        || Math.abs(self.yPPST) > self.attributes.scrollAnimationPPSThreshold)\n                    && !/-scroll-/.test(self.startingCell.style)\n                    && !dz) {\n                self.stopAnimation = false;\n                self.touchEndAnimation();\n            }\n            self.touchEndEvents(e);\n        };\n        self.touchcancel = function (e) {\n            if (self.dispatchEvent('touchcancel', {NativeEvent: e, cell: self.currentCell})) { return; }\n            self.touchEndEvents(e);\n        };\n    };\n});\n","module.exports=function(e){var o={};function a(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=o,a.d=function(e,o,t){a.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,o){if(1&o&&(e=a(e)),8&o)return e;if(4&o&&\"object\"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,\"default\",{enumerable:!0,value:e}),2&o&&\"string\"!=typeof e)for(var r in e)a.d(t,r,function(o){return e[o]}.bind(null,r));return t},a.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(o,\"a\",o),o},a.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},a.p=\"\",a(a.s=0)}([function(e,o,a){\"use strict\";Object.defineProperty(o,\"__esModule\",{value:!0});var t=a(1),r=Object.keys(t.default).reduce((function(e,o){return e.concat(t.default[o])}),[]);o.default=function(e){return-1===r.indexOf(e.key)}},function(e,o,a){\"use strict\";Object.defineProperty(o,\"__esModule\",{value:!0});o.default={modifier:[\"Alt\",\"AltGraph\",\"CapsLock\",\"Control\",\"Fn\",\"FnLock\",\"Meta\",\"NumLock\",\"ScrollLock\",\"Shift\",\"Symbol\",\"SymbolLock\"],legacyModifier:[\"Hyper\",\"Super\"],whiteSpace:[\"Enter\",\"Tab\"],navigation:[\"ArrowDown\",\"ArrowLeft\",\"ArrowRight\",\"ArrowUp\",\"End\",\"Home\",\"PageDown\",\"PageUp\"],editing:[\"Backspace\",\"Clear\",\"Copy\",\"CrSel\",\"Cut\",\"Delete\",\"EraseEof\",\"ExSel\",\"Insert\",\"Paste\",\"Redo\",\"Undo\"],ui:[\"Accept\",\"Again\",\"Attn\",\"Cancel\",\"ContextMenu\",\"Escape\",\"Execute\",\"Find\",\"Help\",\"Pause\",\"Play\",\"Props\",\"Select\",\"ZoomIn\",\"ZoomOut\"],device:[\"BrightnessDown\",\"BrightnessUp\",\"Eject\",\"LogOff\",\"Power\",\"PowerOff\",\"PrintScreen\",\"Hibernate\",\"Standby\",\"WakeUp\"],imeCompositionKeys:[\"AllCandidates\",\"Alphanumeric\",\"CodeInput\",\"Compose\",\"Convert\",\"Dead\",\"FinalMode\",\"GroupFirst\",\"GroupLast\",\"GroupNext\",\"GroupPrevious\",\"ModeChange\",\"NextCandidate\",\"NonConvert\",\"PreviousCandidate\",\"Process\",\"SingleCandidate\"],koreanSpecific:[\"HangulMode\",\"HanjaMode\",\"JunjaMode\"],japaneseSpecific:[\"Eisu\",\"Hankaku\",\"Hiragana\",\"HiraganaKatakana\",\"KanaMode\",\"KanjiMode\",\"Katakana\",\"Romaji\",\"Zenkaku\",\"ZenkakuHankaku\"],commonFunction:[\"F1\",\"F2\",\"F3\",\"F4\",\"F5\",\"F6\",\"F7\",\"F8\",\"F9\",\"F10\",\"F11\",\"F12\",\"Soft1\",\"Soft2\",\"Soft3\",\"Soft4\"],multimedia:[\"ChannelDown\",\"ChannelUp\",\"Close\",\"MailForward\",\"MailReply\",\"MailSend\",\"MediaClose\",\"MediaFastForward\",\"MediaPause\",\"MediaPlay\",\"MediaPlayPause\",\"MediaRecord\",\"MediaRewind\",\"MediaStop\",\"MediaTrackNext\",\"MediaTrackPrevious\",\"New\",\"Open\",\"Print\",\"Save\",\"SpellCheck\"],multimediaNumpad:[\"Key11\",\"Key12\"],audio:[\"AudioBalanceLeft\",\"AudioBalanceRight\",\"AudioBassBoostDown\",\"AudioBassBoostToggle\",\"AudioBassBoostUp\",\"AudioFaderFront\",\"AudioFaderRear\",\"AudioSurroundModeNext\",\"AudioTrebleDown\",\"AudioTrebleUp\",\"AudioVolumeDown\",\"AudioVolumeUp\",\"AudioVolumeMute\",\"MicrophoneToggle\",\"MicrophoneVolumeDown\",\"MicrophoneVolumeUp\",\"MicrophoneVolumeMute\"],speech:[\"SpeechCorrectionList\",\"SpeechInputToggle\"],application:[\"LaunchApplication1\",\"LaunchApplication2\",\"LaunchCalendar\",\"LaunchContacts\",\"LaunchMail\",\"LaunchMediaPlayer\",\"LaunchMusicPlayer\",\"LaunchPhone\",\"LaunchScreenSaver\",\"LaunchSpreadsheet\",\"LaunchWebBrowser\",\"LaunchWebCam\",\"LaunchWordProcessor\"],browser:[\"BrowserBack\",\"BrowserFavorites\",\"BrowserForward\",\"BrowserHome\",\"BrowserRefresh\",\"BrowserSearch\",\"BrowserStop\"],mobilePhone:[\"AppSwitch\",\"Call\",\"Camera\",\"CameraFocus\",\"EndCall\",\"GoBack\",\"GoHome\",\"HeadsetHook\",\"LastNumberRedial\",\"Notification\",\"MannerMode\",\"VoiceDial\"],tv:[\"TV\",\"TV3DMode\",\"TVAntennaCable\",\"TVAudioDescription\",\"TVAudioDescriptionMixDown\",\"TVAudioDescriptionMixUp\",\"TVContentsMenu\",\"TVDataService\",\"TVInput\",\"TVInputComponent1\",\"TVInputComponent2\",\"TVInputComposite1\",\"TVInputComposite2\",\"TVInputHDMI1\",\"TVInputHDMI2\",\"TVInputHDMI3\",\"TVInputHDMI4\",\"TVInputVGA1\",\"TVMediaContext\",\"TVNetwork\",\"TVNumberEntry\",\"TVPower\",\"TVRadioService\",\"TVSatellite\",\"TVSatelliteBS\",\"TVSatelliteCS\",\"TVSatelliteToggle\",\"TVTerrestrialAnalog\",\"TVTerrestrialDigital\",\"TVTimer\"],mediaControls:[\"AVRInput\",\"AVRPower\",\"ColorF0Red\",\"ColorF1Green\",\"ColorF2Yellow\",\"ColorF3Blue\",\"ColorF4Grey\",\"ColorF5Brown\",\"ClosedCaptionToggle\",\"Dimmer\",\"DisplaySwap\",\"DVR\",\"Exit\",\"FavoriteClear0\",\"FavoriteClear1\",\"FavoriteClear2\",\"FavoriteClear3\",\"FavoriteRecall0\",\"FavoriteRecall1\",\"FavoriteRecall2\",\"FavoriteRecall3\",\"FavoriteStore0\",\"FavoriteStore1\",\"FavoriteStore2\",\"FavoriteStore3\",\"Guide\",\"GuideNextDay\",\"GuidePreviousDay\",\"Info\",\"InstantReplay\",\"Link\",\"ListProgram\",\"LiveContent\",\"Lock\",\"MediaApps\",\"MediaAudioTrack\",\"MediaLast\",\"MediaSkipBackward\",\"MediaSkipForward\",\"MediaStepBackward\",\"MediaStepForward\",\"MediaTopMenu\",\"NavigateIn\",\"NavigateNext\",\"NavigateOut\",\"NavigatePrevious\",\"NextFavoriteChannel\",\"NextUserProfile\",\"OnDemand\",\"Pairing\",\"PinPDown\",\"PinPMove\",\"PinPToggle\",\"PinPUp\",\"PlaySpeedDown\",\"PlaySpeedReset\",\"PlaySpeedUp\",\"RandomToggle\",\"RcLowBattery\",\"RecordSpeedNext\",\"RfBypass\",\"ScanChannelsToggle\",\"ScreenModeNext\",\"Settings\",\"SplitScreenToggle\",\"STBInput\",\"STBPower\",\"Subtitle\",\"Teletext\",\"VideoModeNext\",\"Wink\",\"ZoomToggle\"]}}]).default;"],"sourceRoot":""}